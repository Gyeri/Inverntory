{"version":3,"file":"static/js/911.88afc799.chunk.js","mappings":"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GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAChB,CAAC,EAAG,EAAG,EAA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","sources":["../node_modules/quagga/dist/quagga.js"],"sourcesContent":["(function (root, factory) {\n    var factorySource = factory.toString();\n\n    if (typeof module !== 'undefined') {\n        module.exports = factory(factorySource);\n    } else {\n        //Browser globals case. Just assign the\n        //result to a property on the global.\n        root.Quagga = factory(factorySource);\n    }\n}(this, function (__factorySource__) {/**\n * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that \"directory\" and not name of the baseName's\n                //module. For instance, baseName of \"one/two/three\", maps to\n                //\"one/two/three.js\", but we want the directory, \"one/two\" for\n                //this normalization.\n                baseParts = baseParts.slice(0, baseParts.length - 1);\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                name = baseParts.concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('image_loader',[],function() {\n    \"use strict\";\n\n    var ImageLoader = {};\n    ImageLoader.load = function(directory, callback, offset, size, sequence) {\n        var htmlImagesSrcArray = new Array(size),\n            htmlImagesArray = new Array(htmlImagesSrcArray.length),\n            i,\n            img,\n            num;\n            \n        if (sequence === false) {\n            htmlImagesSrcArray[0] = directory;\n        } else {\n            for ( i = 0; i < htmlImagesSrcArray.length; i++) {\n                num = (offset + i);\n                htmlImagesSrcArray[i] = directory + \"image-\" + (\"00\" + num).slice(-3) + \".jpg\";\n            }\n        }\n        htmlImagesArray.notLoaded = [];\n        htmlImagesArray.addImage = function(img) {\n            htmlImagesArray.notLoaded.push(img);\n        };\n        htmlImagesArray.loaded = function(loadedImg) {\n            var notloadedImgs = htmlImagesArray.notLoaded;\n            for (var x = 0; x < notloadedImgs.length; x++) {\n                if (notloadedImgs[x] == loadedImg) {\n                    notloadedImgs.splice(x, 1);\n                    for (var y = 0; y < htmlImagesSrcArray.length; y++) {\n                        var imgName = htmlImagesSrcArray[y].substr(htmlImagesSrcArray[y].lastIndexOf(\"/\"));\n                        if (loadedImg.src.lastIndexOf(imgName) != -1) {\n                            htmlImagesArray[y] = loadedImg;\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n            if (notloadedImgs.length === 0) {\n                console.log(\"Images loaded\");\n                callback.apply(null, [htmlImagesArray]);\n            }\n        };\n        \n        for ( i = 0; i < htmlImagesSrcArray.length; i++) {\n            img = new Image();\n            htmlImagesArray.addImage(img);\n            addOnloadHandler(img, htmlImagesArray);\n            img.src = htmlImagesSrcArray[i];\n        }\n    };\n    \n    function addOnloadHandler(img, htmlImagesArray) {\n        img.onload = function() {\n            htmlImagesArray.loaded(this);\n        };\n    }\n\n    return (ImageLoader);\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('input_stream',[\"image_loader\"], function(ImageLoader) {\n    \"use strict\";\n\n    var InputStream = {};\n    InputStream.createVideoStream = function(video) {\n        var that = {},\n            _config = null,\n            _eventNames = ['canrecord', 'ended'],\n            _eventHandlers = {},\n            _calculatedWidth,\n            _calculatedHeight,\n            _topRight = {x: 0, y: 0},\n            _canvasSize = {x: 0, y: 0};\n\n        function initSize() {\n            var width = video.videoWidth,\n                height = video.videoHeight;\n\n            _calculatedWidth = _config.size ? width/height > 1 ? _config.size : Math.floor((width/height) * _config.size) : width;\n            _calculatedHeight = _config.size ? width/height > 1 ? Math.floor((height/width) * _config.size) : _config.size : height;\n\n            _canvasSize.x = _calculatedWidth;\n            _canvasSize.y = _calculatedHeight;\n        }\n\n        that.getRealWidth = function() {\n            return video.videoWidth;\n        };\n\n        that.getRealHeight = function() {\n            return video.videoHeight;\n        };\n\n        that.getWidth = function() {\n            return _calculatedWidth;\n        };\n\n        that.getHeight = function() {\n            return _calculatedHeight;\n        };\n\n        that.setWidth = function(width) {\n            _calculatedWidth = width;\n        };\n\n        that.setHeight = function(height) {\n            _calculatedHeight = height;\n        };\n\n        that.setInputStream = function(config) {\n            _config = config;\n            video.src = (typeof config.src !== 'undefined') ? config.src : '';\n        };\n\n        that.ended = function() {\n            return video.ended;\n        };\n\n        that.getConfig = function() {\n            return _config;\n        };\n\n        that.setAttribute = function(name, value) {\n            video.setAttribute(name, value);\n        };\n\n        that.pause = function() {\n            video.pause();\n        };\n\n        that.play = function() {\n            video.play();\n        };\n\n        that.setCurrentTime = function(time) {\n            if (_config.type !== \"LiveStream\")\n                video.currentTime = time;\n        };\n\n        that.addEventListener = function(event, f, bool) {\n            if (_eventNames.indexOf(event) !== -1) {\n                if (!_eventHandlers[event]) {\n                    _eventHandlers[event] = [];\n                }\n                _eventHandlers[event].push(f);\n            } else {\n                video.addEventListener(event, f, bool);\n            }\n        };\n\n        that.clearEventHandlers = function() {\n            _eventNames.forEach(function(eventName) {\n                var handlers = _eventHandlers[eventName];\n                if (handlers && handlers.length > 0) {\n                    handlers.forEach(function(handler) {\n                        video.removeEventListener(eventName, handler);\n                    });\n                }\n            });\n        };\n\n        that.trigger = function(eventName, args) {\n            var j,\n                handlers = _eventHandlers[eventName];\n\n            if (eventName === 'canrecord') {\n                initSize();\n            }\n            if (handlers && handlers.length > 0) {\n                for ( j = 0; j < handlers.length; j++) {\n                    handlers[j].apply(that, args);\n                }\n            }\n        };\n\n        that.setTopRight = function(topRight) {\n            _topRight.x = topRight.x;\n            _topRight.y = topRight.y;\n        };\n\n        that.getTopRight = function() {\n            return _topRight;\n        };\n\n        that.setCanvasSize = function(size) {\n            _canvasSize.x = size.x;\n            _canvasSize.y = size.y;\n        };\n\n        that.getCanvasSize = function() {\n            return _canvasSize;\n        };\n\n        that.getFrame = function() {\n            return video;\n        };\n\n        return that;\n    };\n\n    InputStream.createLiveStream = function(video) {\n        video.setAttribute(\"autoplay\", true);\n        var that = InputStream.createVideoStream(video);\n\n        that.ended = function() {\n            return false;\n        };\n\n        return that;\n    };\n\n    InputStream.createImageStream = function() {\n        var that = {};\n        var _config = null;\n\n        var width = 0,\n            height = 0,\n            frameIdx = 0,\n            paused = true,\n            loaded = false,\n            imgArray = null,\n            size = 0,\n            offset = 1,\n            baseUrl = null,\n            ended = false,\n            calculatedWidth,\n            calculatedHeight,\n            _eventNames = ['canrecord', 'ended'],\n            _eventHandlers = {},\n            _topRight = {x: 0, y: 0},\n            _canvasSize = {x: 0, y: 0};\n\n        function loadImages() {\n            loaded = false;\n            ImageLoader.load(baseUrl, function(imgs) {\n                imgArray = imgs;\n                width = imgs[0].width;\n                height = imgs[0].height;\n                calculatedWidth = _config.size ? width/height > 1 ? _config.size : Math.floor((width/height) * _config.size) : width;\n                calculatedHeight = _config.size ? width/height > 1 ? Math.floor((height/width) * _config.size) : _config.size : height;\n                _canvasSize.x = calculatedWidth;\n                _canvasSize.y = calculatedHeight;\n                loaded = true;\n                frameIdx = 0;\n                setTimeout(function() {\n                    publishEvent(\"canrecord\", []);\n                }, 0);\n            }, offset, size, _config.sequence);\n        }\n\n        function publishEvent(eventName, args) {\n            var j,\n                handlers = _eventHandlers[eventName];\n                \n            if (handlers && handlers.length > 0) {\n                for ( j = 0; j < handlers.length; j++) {\n                    handlers[j].apply(that, args);\n                }\n            }\n        }\n\n\n        that.trigger = publishEvent;\n\n        that.getWidth = function() {\n            return calculatedWidth;\n        };\n\n        that.getHeight = function() {\n            return calculatedHeight;\n        };\n\n        that.setWidth = function(width) {\n            calculatedWidth = width;\n        };\n\n        that.setHeight = function(height) {\n            calculatedHeight = height;\n        };\n\n        that.getRealWidth = function() {\n            return width;\n        };\n\n        that.getRealHeight = function() {\n            return height;\n        };\n\n        that.setInputStream = function(stream) {\n            _config = stream;\n            if (stream.sequence === false) {\n                baseUrl = stream.src;\n                size = 1;\n            } else {\n                baseUrl = stream.src;\n                size = stream.length;\n            }\n            loadImages();\n        };\n\n        that.ended = function() {\n            return ended;\n        };\n\n        that.setAttribute = function() {};\n\n        that.getConfig = function() {\n            return _config;\n        };\n\n        that.pause = function() {\n            paused = true;\n        };\n\n        that.play = function() {\n            paused = false;\n        };\n\n        that.setCurrentTime = function(time) {\n            frameIdx = time;\n        };\n\n        that.addEventListener = function(event, f) {\n            if (_eventNames.indexOf(event) !== -1) {\n                if (!_eventHandlers[event]) {\n                    _eventHandlers[event] = [];\n                }\n                _eventHandlers[event].push(f);\n            }\n        };\n\n        that.setTopRight = function(topRight) {\n            _topRight.x = topRight.x;\n            _topRight.y = topRight.y;\n        };\n\n        that.getTopRight = function() {\n            return _topRight;\n        };\n\n        that.setCanvasSize = function(size) {\n            _canvasSize.x = size.x;\n            _canvasSize.y = size.y;\n        };\n\n        that.getCanvasSize = function() {\n            return _canvasSize;\n        };\n\n        that.getFrame = function() {\n            var frame;\n            \n            if (!loaded){\n                return null;\n            }\n            if (!paused) {\n                frame = imgArray[frameIdx];\n                if (frameIdx < (size - 1)) {\n                    frameIdx++;\n                } else {\n                    setTimeout(function() {\n                        ended = true;\n                        publishEvent(\"ended\", []);\n                    }, 0);\n                }\n            }\n            return frame;\n        };\n\n        return that;\n    };\n\n    return (InputStream);\n});\n\n/*\n * typedefs.js\n * Normalizes browser-specific prefixes\n */\n\nglMatrixArrayType = Float32Array;\nif (typeof window !== 'undefined') {\n    window.requestAnimFrame = (function () {\n        return window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.oRequestAnimationFrame ||\n            window.msRequestAnimationFrame ||\n            function (/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\n                window.setTimeout(callback, 1000 / 60);\n            };\n    })();\n\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n    window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n}\nMath.imul = Math.imul || function(a, b) {\n    var ah = (a >>> 16) & 0xffff,\n        al = a & 0xffff,\n        bh = (b >>> 16) & 0xffff,\n        bl = b & 0xffff;\n    // the shift by 0 fixes the sign on the high part\n    // the final |0 converts the unsigned value into a signed value\n    return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0)|0);\n};\ndefine(\"typedefs\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.typedefs;\n    };\n}(this)));\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('subImage',[\"typedefs\"], function() {\n    \"use strict\";\n\n    /**\n     * Construct representing a part of another {ImageWrapper}. Shares data\n     * between the parent and the child.\n     * @param from {ImageRef} The position where to start the {SubImage} from. (top-left corner)\n     * @param size {ImageRef} The size of the resulting image\n     * @param I {ImageWrapper} The {ImageWrapper} to share from\n     * @returns {SubImage} A shared part of the original image\n     */\n    function SubImage(from, size, I) {\n        if (!I) {\n            I = {\n                data : null,\n                size : size\n            };\n        }\n        this.data = I.data;\n        this.originalSize = I.size;\n        this.I = I;\n\n        this.from = from;\n        this.size = size;\n    }\n\n    /**\n     * Displays the {SubImage} in a given canvas\n     * @param canvas {Canvas} The canvas element to write to\n     * @param scale {Number} Scale which is applied to each pixel-value\n     */\n    SubImage.prototype.show = function(canvas, scale) {\n        var ctx,\n            frame,\n            data,\n            current,\n            y,\n            x,\n            pixel;\n            \n        if (!scale) {\n            scale = 1.0;\n        }\n        ctx = canvas.getContext('2d');\n        canvas.width = this.size.x;\n        canvas.height = this.size.y;\n        frame = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        data = frame.data;\n        current = 0;\n        for (y = 0; y < this.size.y; y++) {\n            for (x = 0; x < this.size.x; x++) {\n                pixel = y * this.size.x + x;\n                current = this.get(x, y) * scale;\n                data[pixel * 4 + 0] = current;\n                data[pixel * 4 + 1] = current;\n                data[pixel * 4 + 2] = current;\n                data[pixel * 4 + 3] = 255;\n            }\n        }\n        frame.data = data;\n        ctx.putImageData(frame, 0, 0);\n    };\n\n    /**\n     * Retrieves a given pixel position from the {SubImage}\n     * @param x {Number} The x-position\n     * @param y {Number} The y-position\n     * @returns {Number} The grayscale value at the pixel-position\n     */\n    SubImage.prototype.get = function(x, y) {\n        return this.data[(this.from.y + y) * this.originalSize.x + this.from.x + x];\n    };\n\n    /**\n     * Updates the underlying data from a given {ImageWrapper}\n     * @param image {ImageWrapper} The updated image\n     */\n    SubImage.prototype.updateData = function(image) {\n        this.originalSize = image.size;\n        this.data = image.data;\n    };\n\n    /**\n     * Updates the position of the shared area\n     * @param from {x,y} The new location\n     * @returns {SubImage} returns {this} for possible chaining\n     */\n    SubImage.prototype.updateFrom = function(from) {\n        this.from = from;\n        return this;\n    };\n    \n    return (SubImage);\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define, vec2 */\n\ndefine('cluster',[],function() {\n    \"use strict\";\n    \n    /**\n     * Creates a cluster for grouping similar orientations of datapoints \n     */\n    var Cluster = {\n        create : function(point, threshold) {\n            var points = [], center = {\n                rad : 0,\n                vec : vec2.create([0, 0])\n            }, pointMap = {};\n\n            function init() {\n                add(point);\n                updateCenter();\n            }\n\n            function add(point) {\n                pointMap[point.id] = point;\n                points.push(point);\n            }\n\n            function updateCenter() {\n                var i, sum = 0;\n                for ( i = 0; i < points.length; i++) {\n                    sum += points[i].rad;\n                }\n                center.rad = sum / points.length;\n                center.vec = vec2.create([Math.cos(center.rad), Math.sin(center.rad)]);\n            }\n\n            init();\n\n            return {\n                add : function(point) {\n                    if (!pointMap[point.id]) {\n                        add(point);\n                        updateCenter();\n                    }\n                },\n                fits : function(point) {\n                    // check cosine similarity to center-angle\n                    var similarity = Math.abs(vec2.dot(point.point.vec, center.vec));\n                    if (similarity > threshold) {\n                        return true;\n                    }\n                    return false;\n                },\n                getPoints : function() {\n                    return points;\n                },\n                getCenter : function() {\n                    return center;\n                }\n            };\n        },\n        createPoint : function(point, id, property) {\n            return {\n                rad : point[property],\n                point : point,\n                id : id\n            };\n        }\n    };\n\n    return (Cluster);\n});\n\n/* \n * glMatrix.js - High performance matrix and vector operations for WebGL\n * version 0.9.6\n */\n \n/*\n * Copyright (c) 2011 Brandon Jones\n *\n * This software is provided 'as-is', without any express or implied\n * warranty. In no event will the authors be held liable for any damages\n * arising from the use of this software.\n *\n * Permission is granted to anyone to use this software for any purpose,\n * including commercial applications, and to alter it and redistribute it\n * freely, subject to the following restrictions:\n *\n *    1. The origin of this software must not be misrepresented; you must not\n *    claim that you wrote the original software. If you use this software\n *    in a product, an acknowledgment in the product documentation would be\n *    appreciated but is not required.\n *\n *    2. Altered source versions must be plainly marked as such, and must not\n *    be misrepresented as being the original software.\n *\n *    3. This notice may not be removed or altered from any source\n *    distribution.\n */\n\n\n\n/*\n * vec3 - 3 Dimensional Vector\n */\nvar vec3 = {};\n\n/*\n * vec3.create\n * Creates a new instance of a vec3 using the default array type\n * Any javascript array containing at least 3 numeric elements can serve as a vec3\n *\n * Params:\n * vec - Optional, vec3 containing values to initialize with\n *\n * Returns:\n * New vec3\n */\nvec3.create = function(vec) {\t\n\tvar dest;\n\tif(vec) {\n\t\tdest = new glMatrixArrayType(3);\n\t\tdest[0] = vec[0];\n\t\tdest[1] = vec[1];\n\t\tdest[2] = vec[2];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(3);\n\t}\n\t\n\treturn dest;\n};\n\n/*\n * vec3.set\n * Copies the values of one vec3 to another\n *\n * Params:\n * vec - vec3 containing values to copy\n * dest - vec3 receiving copied values\n *\n * Returns:\n * dest\n */\nvec3.set = function(vec, dest) {\n\tdest[0] = vec[0];\n\tdest[1] = vec[1];\n\tdest[2] = vec[2];\n\t\n\treturn dest;\n};\n\n/*\n * vec3.add\n * Performs a vector addition\n *\n * Params:\n * vec - vec3, first operand\n * vec2 - vec3, second operand\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.add = function(vec, vec2, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] += vec2[0];\n\t\tvec[1] += vec2[1];\n\t\tvec[2] += vec2[2];\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0] + vec2[0];\n\tdest[1] = vec[1] + vec2[1];\n\tdest[2] = vec[2] + vec2[2];\n\treturn dest;\n};\n\n/*\n * vec3.subtract\n * Performs a vector subtraction\n *\n * Params:\n * vec - vec3, first operand\n * vec2 - vec3, second operand\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.subtract = function(vec, vec2, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] -= vec2[0];\n\t\tvec[1] -= vec2[1];\n\t\tvec[2] -= vec2[2];\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0] - vec2[0];\n\tdest[1] = vec[1] - vec2[1];\n\tdest[2] = vec[2] - vec2[2];\n\treturn dest;\n};\n\n/*\n * vec3.negate\n * Negates the components of a vec3\n *\n * Params:\n * vec - vec3 to negate\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.negate = function(vec, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tdest[0] = -vec[0];\n\tdest[1] = -vec[1];\n\tdest[2] = -vec[2];\n\treturn dest;\n};\n\n/*\n * vec3.scale\n * Multiplies the components of a vec3 by a scalar value\n *\n * Params:\n * vec - vec3 to scale\n * val - Numeric value to scale by\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.scale = function(vec, val, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] *= val;\n\t\tvec[1] *= val;\n\t\tvec[2] *= val;\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0]*val;\n\tdest[1] = vec[1]*val;\n\tdest[2] = vec[2]*val;\n\treturn dest;\n};\n\n/*\n * vec3.normalize\n * Generates a unit vector of the same direction as the provided vec3\n * If vector length is 0, returns [0, 0, 0]\n *\n * Params:\n * vec - vec3 to normalize\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.normalize = function(vec, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\tvar len = Math.sqrt(x*x + y*y + z*z);\n\t\n\tif (!len) {\n\t\tdest[0] = 0;\n\t\tdest[1] = 0;\n\t\tdest[2] = 0;\n\t\treturn dest;\n\t} else if (len == 1) {\n\t\tdest[0] = x;\n\t\tdest[1] = y;\n\t\tdest[2] = z;\n\t\treturn dest;\n\t}\n\t\n\tlen = 1 / len;\n\tdest[0] = x*len;\n\tdest[1] = y*len;\n\tdest[2] = z*len;\n\treturn dest;\n};\n\n/*\n * vec3.cross\n * Generates the cross product of two vec3s\n *\n * Params:\n * vec - vec3, first operand\n * vec2 - vec3, second operand\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.cross = function(vec, vec2, dest){\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\tvar x2 = vec2[0], y2 = vec2[1], z2 = vec2[2];\n\t\n\tdest[0] = y*z2 - z*y2;\n\tdest[1] = z*x2 - x*z2;\n\tdest[2] = x*y2 - y*x2;\n\treturn dest;\n};\n\n/*\n * vec3.length\n * Caclulates the length of a vec3\n *\n * Params:\n * vec - vec3 to calculate length of\n *\n * Returns:\n * Length of vec\n */\nvec3.length = function(vec){\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\treturn Math.sqrt(x*x + y*y + z*z);\n};\n\n/*\n * vec3.dot\n * Caclulates the dot product of two vec3s\n *\n * Params:\n * vec - vec3, first operand\n * vec2 - vec3, second operand\n *\n * Returns:\n * Dot product of vec and vec2\n */\nvec3.dot = function(vec, vec2){\n\treturn vec[0]*vec2[0] + vec[1]*vec2[1] + vec[2]*vec2[2];\n};\n\n/*\n * vec3.direction\n * Generates a unit vector pointing from one vector to another\n *\n * Params:\n * vec - origin vec3\n * vec2 - vec3 to point to\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.direction = function(vec, vec2, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0] - vec2[0];\n\tvar y = vec[1] - vec2[1];\n\tvar z = vec[2] - vec2[2];\n\t\n\tvar len = Math.sqrt(x*x + y*y + z*z);\n\tif (!len) { \n\t\tdest[0] = 0; \n\t\tdest[1] = 0; \n\t\tdest[2] = 0;\n\t\treturn dest; \n\t}\n\t\n\tlen = 1 / len;\n\tdest[0] = x * len; \n\tdest[1] = y * len; \n\tdest[2] = z * len;\n\treturn dest; \n};\n\n/*\n * vec3.lerp\n * Performs a linear interpolation between two vec3\n *\n * Params:\n * vec - vec3, first vector\n * vec2 - vec3, second vector\n * lerp - interpolation amount between the two inputs\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nvec3.lerp = function(vec, vec2, lerp, dest){\n    if(!dest) { dest = vec; }\n    \n    dest[0] = vec[0] + lerp * (vec2[0] - vec[0]);\n    dest[1] = vec[1] + lerp * (vec2[1] - vec[1]);\n    dest[2] = vec[2] + lerp * (vec2[2] - vec[2]);\n    \n    return dest;\n};\n\n/*\n * vec3.str\n * Returns a string representation of a vector\n *\n * Params:\n * vec - vec3 to represent as a string\n *\n * Returns:\n * string representation of vec\n */\nvec3.str = function(vec) {\n\treturn '[' + vec[0] + ', ' + vec[1] + ', ' + vec[2] + ']'; \n};\n\n/*\n * mat3 - 3x3 Matrix\n */\nvar mat3 = {};\n\n/*\n * mat3.create\n * Creates a new instance of a mat3 using the default array type\n * Any javascript array containing at least 9 numeric elements can serve as a mat3\n *\n * Params:\n * mat - Optional, mat3 containing values to initialize with\n *\n * Returns:\n * New mat3\n */\nmat3.create = function(mat) {\n\tvar dest;\n\t\n\tif(mat) {\n\t\tdest = new glMatrixArrayType(9);\n\t\tdest[0] = mat[0];\n\t\tdest[1] = mat[1];\n\t\tdest[2] = mat[2];\n\t\tdest[3] = mat[3];\n\t\tdest[4] = mat[4];\n\t\tdest[5] = mat[5];\n\t\tdest[6] = mat[6];\n\t\tdest[7] = mat[7];\n\t\tdest[8] = mat[8];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0,0,0,0,0,0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(9);\n\t}\n\t\n\treturn dest;\n};\n\n/*\n * mat3.set\n * Copies the values of one mat3 to another\n *\n * Params:\n * mat - mat3 containing values to copy\n * dest - mat3 receiving copied values\n *\n * Returns:\n * dest\n */\nmat3.set = function(mat, dest) {\n\tdest[0] = mat[0];\n\tdest[1] = mat[1];\n\tdest[2] = mat[2];\n\tdest[3] = mat[3];\n\tdest[4] = mat[4];\n\tdest[5] = mat[5];\n\tdest[6] = mat[6];\n\tdest[7] = mat[7];\n\tdest[8] = mat[8];\n\treturn dest;\n};\n\n/*\n * mat3.identity\n * Sets a mat3 to an identity matrix\n *\n * Params:\n * dest - mat3 to set\n *\n * Returns:\n * dest\n */\nmat3.identity = function(dest) {\n\tdest[0] = 1;\n\tdest[1] = 0;\n\tdest[2] = 0;\n\tdest[3] = 0;\n\tdest[4] = 1;\n\tdest[5] = 0;\n\tdest[6] = 0;\n\tdest[7] = 0;\n\tdest[8] = 1;\n\treturn dest;\n};\n\n/*\n * mat4.transpose\n * Transposes a mat3 (flips the values over the diagonal)\n *\n * Params:\n * mat - mat3 to transpose\n * dest - Optional, mat3 receiving transposed values. If not specified result is written to mat\n *\n * Returns:\n * dest is specified, mat otherwise\n */\nmat3.transpose = function(mat, dest) {\n\t// If we are transposing ourselves we can skip a few steps but have to cache some values\n\tif(!dest || mat == dest) { \n\t\tvar a01 = mat[1], a02 = mat[2];\n\t\tvar a12 = mat[5];\n\t\t\n        mat[1] = mat[3];\n        mat[2] = mat[6];\n        mat[3] = a01;\n        mat[5] = mat[7];\n        mat[6] = a02;\n        mat[7] = a12;\n\t\treturn mat;\n\t}\n\t\n\tdest[0] = mat[0];\n\tdest[1] = mat[3];\n\tdest[2] = mat[6];\n\tdest[3] = mat[1];\n\tdest[4] = mat[4];\n\tdest[5] = mat[7];\n\tdest[6] = mat[2];\n\tdest[7] = mat[5];\n\tdest[8] = mat[8];\n\treturn dest;\n};\n\n/*\n * mat3.toMat4\n * Copies the elements of a mat3 into the upper 3x3 elements of a mat4\n *\n * Params:\n * mat - mat3 containing values to copy\n * dest - Optional, mat4 receiving copied values\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nmat3.toMat4 = function(mat, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\t\n\tdest[0] = mat[0];\n\tdest[1] = mat[1];\n\tdest[2] = mat[2];\n\tdest[3] = 0;\n\n\tdest[4] = mat[3];\n\tdest[5] = mat[4];\n\tdest[6] = mat[5];\n\tdest[7] = 0;\n\n\tdest[8] = mat[6];\n\tdest[9] = mat[7];\n\tdest[10] = mat[8];\n\tdest[11] = 0;\n\n\tdest[12] = 0;\n\tdest[13] = 0;\n\tdest[14] = 0;\n\tdest[15] = 1;\n\t\n\treturn dest;\n};\n\n/*\n * mat3.str\n * Returns a string representation of a mat3\n *\n * Params:\n * mat - mat3 to represent as a string\n *\n * Returns:\n * string representation of mat\n */\nmat3.str = function(mat) {\n\treturn '[' + mat[0] + ', ' + mat[1] + ', ' + mat[2] + \n\t\t', ' + mat[3] + ', '+ mat[4] + ', ' + mat[5] + \n\t\t', ' + mat[6] + ', ' + mat[7] + ', '+ mat[8] + ']';\n};\n\n/*\n * mat4 - 4x4 Matrix\n */\nvar mat4 = {};\n\n/*\n * mat4.create\n * Creates a new instance of a mat4 using the default array type\n * Any javascript array containing at least 16 numeric elements can serve as a mat4\n *\n * Params:\n * mat - Optional, mat4 containing values to initialize with\n *\n * Returns:\n * New mat4\n */\nmat4.create = function(mat) {\n\tvar dest;\n\t\n\tif(mat) {\n\t\tdest = new glMatrixArrayType(16);\n\t\tdest[0] = mat[0];\n\t\tdest[1] = mat[1];\n\t\tdest[2] = mat[2];\n\t\tdest[3] = mat[3];\n\t\tdest[4] = mat[4];\n\t\tdest[5] = mat[5];\n\t\tdest[6] = mat[6];\n\t\tdest[7] = mat[7];\n\t\tdest[8] = mat[8];\n\t\tdest[9] = mat[9];\n\t\tdest[10] = mat[10];\n\t\tdest[11] = mat[11];\n\t\tdest[12] = mat[12];\n\t\tdest[13] = mat[13];\n\t\tdest[14] = mat[14];\n\t\tdest[15] = mat[15];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(16);\n\t}\n\t\n\treturn dest;\n};\n\n/*\n * mat4.set\n * Copies the values of one mat4 to another\n *\n * Params:\n * mat - mat4 containing values to copy\n * dest - mat4 receiving copied values\n *\n * Returns:\n * dest\n */\nmat4.set = function(mat, dest) {\n\tdest[0] = mat[0];\n\tdest[1] = mat[1];\n\tdest[2] = mat[2];\n\tdest[3] = mat[3];\n\tdest[4] = mat[4];\n\tdest[5] = mat[5];\n\tdest[6] = mat[6];\n\tdest[7] = mat[7];\n\tdest[8] = mat[8];\n\tdest[9] = mat[9];\n\tdest[10] = mat[10];\n\tdest[11] = mat[11];\n\tdest[12] = mat[12];\n\tdest[13] = mat[13];\n\tdest[14] = mat[14];\n\tdest[15] = mat[15];\n\treturn dest;\n};\n\n/*\n * mat4.identity\n * Sets a mat4 to an identity matrix\n *\n * Params:\n * dest - mat4 to set\n *\n * Returns:\n * dest\n */\nmat4.identity = function(dest) {\n\tdest[0] = 1;\n\tdest[1] = 0;\n\tdest[2] = 0;\n\tdest[3] = 0;\n\tdest[4] = 0;\n\tdest[5] = 1;\n\tdest[6] = 0;\n\tdest[7] = 0;\n\tdest[8] = 0;\n\tdest[9] = 0;\n\tdest[10] = 1;\n\tdest[11] = 0;\n\tdest[12] = 0;\n\tdest[13] = 0;\n\tdest[14] = 0;\n\tdest[15] = 1;\n\treturn dest;\n};\n\n/*\n * mat4.transpose\n * Transposes a mat4 (flips the values over the diagonal)\n *\n * Params:\n * mat - mat4 to transpose\n * dest - Optional, mat4 receiving transposed values. If not specified result is written to mat\n *\n * Returns:\n * dest is specified, mat otherwise\n */\nmat4.transpose = function(mat, dest) {\n\t// If we are transposing ourselves we can skip a few steps but have to cache some values\n\tif(!dest || mat == dest) { \n\t\tvar a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\t\tvar a12 = mat[6], a13 = mat[7];\n\t\tvar a23 = mat[11];\n\t\t\n\t\tmat[1] = mat[4];\n\t\tmat[2] = mat[8];\n\t\tmat[3] = mat[12];\n\t\tmat[4] = a01;\n\t\tmat[6] = mat[9];\n\t\tmat[7] = mat[13];\n\t\tmat[8] = a02;\n\t\tmat[9] = a12;\n\t\tmat[11] = mat[14];\n\t\tmat[12] = a03;\n\t\tmat[13] = a13;\n\t\tmat[14] = a23;\n\t\treturn mat;\n\t}\n\t\n\tdest[0] = mat[0];\n\tdest[1] = mat[4];\n\tdest[2] = mat[8];\n\tdest[3] = mat[12];\n\tdest[4] = mat[1];\n\tdest[5] = mat[5];\n\tdest[6] = mat[9];\n\tdest[7] = mat[13];\n\tdest[8] = mat[2];\n\tdest[9] = mat[6];\n\tdest[10] = mat[10];\n\tdest[11] = mat[14];\n\tdest[12] = mat[3];\n\tdest[13] = mat[7];\n\tdest[14] = mat[11];\n\tdest[15] = mat[15];\n\treturn dest;\n};\n\n/*\n * mat4.determinant\n * Calculates the determinant of a mat4\n *\n * Params:\n * mat - mat4 to calculate determinant of\n *\n * Returns:\n * determinant of mat\n */\nmat4.determinant = function(mat) {\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\tvar a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];\n\n\treturn\ta30*a21*a12*a03 - a20*a31*a12*a03 - a30*a11*a22*a03 + a10*a31*a22*a03 +\n\t\t\ta20*a11*a32*a03 - a10*a21*a32*a03 - a30*a21*a02*a13 + a20*a31*a02*a13 +\n\t\t\ta30*a01*a22*a13 - a00*a31*a22*a13 - a20*a01*a32*a13 + a00*a21*a32*a13 +\n\t\t\ta30*a11*a02*a23 - a10*a31*a02*a23 - a30*a01*a12*a23 + a00*a31*a12*a23 +\n\t\t\ta10*a01*a32*a23 - a00*a11*a32*a23 - a20*a11*a02*a33 + a10*a21*a02*a33 +\n\t\t\ta20*a01*a12*a33 - a00*a21*a12*a33 - a10*a01*a22*a33 + a00*a11*a22*a33;\n};\n\n/*\n * mat4.inverse\n * Calculates the inverse matrix of a mat4\n *\n * Params:\n * mat - mat4 to calculate inverse of\n * dest - Optional, mat4 receiving inverse matrix. If not specified result is written to mat\n *\n * Returns:\n * dest is specified, mat otherwise\n */\nmat4.inverse = function(mat, dest) {\n\tif(!dest) { dest = mat; }\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\tvar a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];\n\t\n\tvar b00 = a00*a11 - a01*a10;\n\tvar b01 = a00*a12 - a02*a10;\n\tvar b02 = a00*a13 - a03*a10;\n\tvar b03 = a01*a12 - a02*a11;\n\tvar b04 = a01*a13 - a03*a11;\n\tvar b05 = a02*a13 - a03*a12;\n\tvar b06 = a20*a31 - a21*a30;\n\tvar b07 = a20*a32 - a22*a30;\n\tvar b08 = a20*a33 - a23*a30;\n\tvar b09 = a21*a32 - a22*a31;\n\tvar b10 = a21*a33 - a23*a31;\n\tvar b11 = a22*a33 - a23*a32;\n\t\n\t// Calculate the determinant (inlined to avoid double-caching)\n\tvar invDet = 1/(b00*b11 - b01*b10 + b02*b09 + b03*b08 - b04*b07 + b05*b06);\n\t\n\tdest[0] = (a11*b11 - a12*b10 + a13*b09)*invDet;\n\tdest[1] = (-a01*b11 + a02*b10 - a03*b09)*invDet;\n\tdest[2] = (a31*b05 - a32*b04 + a33*b03)*invDet;\n\tdest[3] = (-a21*b05 + a22*b04 - a23*b03)*invDet;\n\tdest[4] = (-a10*b11 + a12*b08 - a13*b07)*invDet;\n\tdest[5] = (a00*b11 - a02*b08 + a03*b07)*invDet;\n\tdest[6] = (-a30*b05 + a32*b02 - a33*b01)*invDet;\n\tdest[7] = (a20*b05 - a22*b02 + a23*b01)*invDet;\n\tdest[8] = (a10*b10 - a11*b08 + a13*b06)*invDet;\n\tdest[9] = (-a00*b10 + a01*b08 - a03*b06)*invDet;\n\tdest[10] = (a30*b04 - a31*b02 + a33*b00)*invDet;\n\tdest[11] = (-a20*b04 + a21*b02 - a23*b00)*invDet;\n\tdest[12] = (-a10*b09 + a11*b07 - a12*b06)*invDet;\n\tdest[13] = (a00*b09 - a01*b07 + a02*b06)*invDet;\n\tdest[14] = (-a30*b03 + a31*b01 - a32*b00)*invDet;\n\tdest[15] = (a20*b03 - a21*b01 + a22*b00)*invDet;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.toRotationMat\n * Copies the upper 3x3 elements of a mat4 into another mat4\n *\n * Params:\n * mat - mat4 containing values to copy\n * dest - Optional, mat4 receiving copied values\n *\n * Returns:\n * dest is specified, a new mat4 otherwise\n */\nmat4.toRotationMat = function(mat, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\t\n\tdest[0] = mat[0];\n\tdest[1] = mat[1];\n\tdest[2] = mat[2];\n\tdest[3] = mat[3];\n\tdest[4] = mat[4];\n\tdest[5] = mat[5];\n\tdest[6] = mat[6];\n\tdest[7] = mat[7];\n\tdest[8] = mat[8];\n\tdest[9] = mat[9];\n\tdest[10] = mat[10];\n\tdest[11] = mat[11];\n\tdest[12] = 0;\n\tdest[13] = 0;\n\tdest[14] = 0;\n\tdest[15] = 1;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.toMat3\n * Copies the upper 3x3 elements of a mat4 into a mat3\n *\n * Params:\n * mat - mat4 containing values to copy\n * dest - Optional, mat3 receiving copied values\n *\n * Returns:\n * dest is specified, a new mat3 otherwise\n */\nmat4.toMat3 = function(mat, dest) {\n\tif(!dest) { dest = mat3.create(); }\n\t\n\tdest[0] = mat[0];\n\tdest[1] = mat[1];\n\tdest[2] = mat[2];\n\tdest[3] = mat[4];\n\tdest[4] = mat[5];\n\tdest[5] = mat[6];\n\tdest[6] = mat[8];\n\tdest[7] = mat[9];\n\tdest[8] = mat[10];\n\t\n\treturn dest;\n};\n\n/*\n * mat4.toInverseMat3\n * Calculates the inverse of the upper 3x3 elements of a mat4 and copies the result into a mat3\n * The resulting matrix is useful for calculating transformed normals\n *\n * Params:\n * mat - mat4 containing values to invert and copy\n * dest - Optional, mat3 receiving values\n *\n * Returns:\n * dest is specified, a new mat3 otherwise\n */\nmat4.toInverseMat3 = function(mat, dest) {\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10];\n\t\n\tvar b01 = a22*a11-a12*a21;\n\tvar b11 = -a22*a10+a12*a20;\n\tvar b21 = a21*a10-a11*a20;\n\t\t\n\tvar d = a00*b01 + a01*b11 + a02*b21;\n\tif (!d) { return null; }\n\tvar id = 1/d;\n\t\n\tif(!dest) { dest = mat3.create(); }\n\t\n\tdest[0] = b01*id;\n\tdest[1] = (-a22*a01 + a02*a21)*id;\n\tdest[2] = (a12*a01 - a02*a11)*id;\n\tdest[3] = b11*id;\n\tdest[4] = (a22*a00 - a02*a20)*id;\n\tdest[5] = (-a12*a00 + a02*a10)*id;\n\tdest[6] = b21*id;\n\tdest[7] = (-a21*a00 + a01*a20)*id;\n\tdest[8] = (a11*a00 - a01*a10)*id;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.multiply\n * Performs a matrix multiplication\n *\n * Params:\n * mat - mat4, first operand\n * mat2 - mat4, second operand\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.multiply = function(mat, mat2, dest) {\n\tif(!dest) { dest = mat; }\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\tvar a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];\n\t\n\tvar b00 = mat2[0], b01 = mat2[1], b02 = mat2[2], b03 = mat2[3];\n\tvar b10 = mat2[4], b11 = mat2[5], b12 = mat2[6], b13 = mat2[7];\n\tvar b20 = mat2[8], b21 = mat2[9], b22 = mat2[10], b23 = mat2[11];\n\tvar b30 = mat2[12], b31 = mat2[13], b32 = mat2[14], b33 = mat2[15];\n\t\n\tdest[0] = b00*a00 + b01*a10 + b02*a20 + b03*a30;\n\tdest[1] = b00*a01 + b01*a11 + b02*a21 + b03*a31;\n\tdest[2] = b00*a02 + b01*a12 + b02*a22 + b03*a32;\n\tdest[3] = b00*a03 + b01*a13 + b02*a23 + b03*a33;\n\tdest[4] = b10*a00 + b11*a10 + b12*a20 + b13*a30;\n\tdest[5] = b10*a01 + b11*a11 + b12*a21 + b13*a31;\n\tdest[6] = b10*a02 + b11*a12 + b12*a22 + b13*a32;\n\tdest[7] = b10*a03 + b11*a13 + b12*a23 + b13*a33;\n\tdest[8] = b20*a00 + b21*a10 + b22*a20 + b23*a30;\n\tdest[9] = b20*a01 + b21*a11 + b22*a21 + b23*a31;\n\tdest[10] = b20*a02 + b21*a12 + b22*a22 + b23*a32;\n\tdest[11] = b20*a03 + b21*a13 + b22*a23 + b23*a33;\n\tdest[12] = b30*a00 + b31*a10 + b32*a20 + b33*a30;\n\tdest[13] = b30*a01 + b31*a11 + b32*a21 + b33*a31;\n\tdest[14] = b30*a02 + b31*a12 + b32*a22 + b33*a32;\n\tdest[15] = b30*a03 + b31*a13 + b32*a23 + b33*a33;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.multiplyVec3\n * Transforms a vec3 with the given matrix\n * 4th vector component is implicitly '1'\n *\n * Params:\n * mat - mat4 to transform the vector with\n * vec - vec3 to transform\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nmat4.multiplyVec3 = function(mat, vec, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\t\n\tdest[0] = mat[0]*x + mat[4]*y + mat[8]*z + mat[12];\n\tdest[1] = mat[1]*x + mat[5]*y + mat[9]*z + mat[13];\n\tdest[2] = mat[2]*x + mat[6]*y + mat[10]*z + mat[14];\n\t\n\treturn dest;\n};\n\n/*\n * mat4.multiplyVec4\n * Transforms a vec4 with the given matrix\n *\n * Params:\n * mat - mat4 to transform the vector with\n * vec - vec4 to transform\n * dest - Optional, vec4 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nmat4.multiplyVec4 = function(mat, vec, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2], w = vec[3];\n\t\n\tdest[0] = mat[0]*x + mat[4]*y + mat[8]*z + mat[12]*w;\n\tdest[1] = mat[1]*x + mat[5]*y + mat[9]*z + mat[13]*w;\n\tdest[2] = mat[2]*x + mat[6]*y + mat[10]*z + mat[14]*w;\n\tdest[3] = mat[3]*x + mat[7]*y + mat[11]*z + mat[15]*w;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.translate\n * Translates a matrix by the given vector\n *\n * Params:\n * mat - mat4 to translate\n * vec - vec3 specifying the translation\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.translate = function(mat, vec, dest) {\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\t\n\tif(!dest || mat == dest) {\n\t\tmat[12] = mat[0]*x + mat[4]*y + mat[8]*z + mat[12];\n\t\tmat[13] = mat[1]*x + mat[5]*y + mat[9]*z + mat[13];\n\t\tmat[14] = mat[2]*x + mat[6]*y + mat[10]*z + mat[14];\n\t\tmat[15] = mat[3]*x + mat[7]*y + mat[11]*z + mat[15];\n\t\treturn mat;\n\t}\n\t\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\t\n\tdest[0] = a00;\n\tdest[1] = a01;\n\tdest[2] = a02;\n\tdest[3] = a03;\n\tdest[4] = a10;\n\tdest[5] = a11;\n\tdest[6] = a12;\n\tdest[7] = a13;\n\tdest[8] = a20;\n\tdest[9] = a21;\n\tdest[10] = a22;\n\tdest[11] = a23;\n\t\n\tdest[12] = a00*x + a10*y + a20*z + mat[12];\n\tdest[13] = a01*x + a11*y + a21*z + mat[13];\n\tdest[14] = a02*x + a12*y + a22*z + mat[14];\n\tdest[15] = a03*x + a13*y + a23*z + mat[15];\n\treturn dest;\n};\n\n/*\n * mat4.scale\n * Scales a matrix by the given vector\n *\n * Params:\n * mat - mat4 to scale\n * vec - vec3 specifying the scale for each axis\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.scale = function(mat, vec, dest) {\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\t\n\tif(!dest || mat == dest) {\n\t\tmat[0] *= x;\n\t\tmat[1] *= x;\n\t\tmat[2] *= x;\n\t\tmat[3] *= x;\n\t\tmat[4] *= y;\n\t\tmat[5] *= y;\n\t\tmat[6] *= y;\n\t\tmat[7] *= y;\n\t\tmat[8] *= z;\n\t\tmat[9] *= z;\n\t\tmat[10] *= z;\n\t\tmat[11] *= z;\n\t\treturn mat;\n\t}\n\t\n\tdest[0] = mat[0]*x;\n\tdest[1] = mat[1]*x;\n\tdest[2] = mat[2]*x;\n\tdest[3] = mat[3]*x;\n\tdest[4] = mat[4]*y;\n\tdest[5] = mat[5]*y;\n\tdest[6] = mat[6]*y;\n\tdest[7] = mat[7]*y;\n\tdest[8] = mat[8]*z;\n\tdest[9] = mat[9]*z;\n\tdest[10] = mat[10]*z;\n\tdest[11] = mat[11]*z;\n\tdest[12] = mat[12];\n\tdest[13] = mat[13];\n\tdest[14] = mat[14];\n\tdest[15] = mat[15];\n\treturn dest;\n};\n\n/*\n * mat4.rotate\n * Rotates a matrix by the given angle around the specified axis\n * If rotating around a primary axis (X,Y,Z) one of the specialized rotation functions should be used instead for performance\n *\n * Params:\n * mat - mat4 to rotate\n * angle - angle (in radians) to rotate\n * axis - vec3 representing the axis to rotate around \n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.rotate = function(mat, angle, axis, dest) {\n\tvar x = axis[0], y = axis[1], z = axis[2];\n\tvar len = Math.sqrt(x*x + y*y + z*z);\n\tif (!len) { return null; }\n\tif (len != 1) {\n\t\tlen = 1 / len;\n\t\tx *= len; \n\t\ty *= len; \n\t\tz *= len;\n\t}\n\t\n\tvar s = Math.sin(angle);\n\tvar c = Math.cos(angle);\n\tvar t = 1-c;\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\t\n\t// Construct the elements of the rotation matrix\n\tvar b00 = x*x*t + c, b01 = y*x*t + z*s, b02 = z*x*t - y*s;\n\tvar b10 = x*y*t - z*s, b11 = y*y*t + c, b12 = z*y*t + x*s;\n\tvar b20 = x*z*t + y*s, b21 = y*z*t - x*s, b22 = z*z*t + c;\n\t\n\tif(!dest) { \n\t\tdest = mat; \n\t} else if(mat != dest) { // If the source and destination differ, copy the unchanged last row\n\t\tdest[12] = mat[12];\n\t\tdest[13] = mat[13];\n\t\tdest[14] = mat[14];\n\t\tdest[15] = mat[15];\n\t}\n\t\n\t// Perform rotation-specific matrix multiplication\n\tdest[0] = a00*b00 + a10*b01 + a20*b02;\n\tdest[1] = a01*b00 + a11*b01 + a21*b02;\n\tdest[2] = a02*b00 + a12*b01 + a22*b02;\n\tdest[3] = a03*b00 + a13*b01 + a23*b02;\n\t\n\tdest[4] = a00*b10 + a10*b11 + a20*b12;\n\tdest[5] = a01*b10 + a11*b11 + a21*b12;\n\tdest[6] = a02*b10 + a12*b11 + a22*b12;\n\tdest[7] = a03*b10 + a13*b11 + a23*b12;\n\t\n\tdest[8] = a00*b20 + a10*b21 + a20*b22;\n\tdest[9] = a01*b20 + a11*b21 + a21*b22;\n\tdest[10] = a02*b20 + a12*b21 + a22*b22;\n\tdest[11] = a03*b20 + a13*b21 + a23*b22;\n\treturn dest;\n};\n\n/*\n * mat4.rotateX\n * Rotates a matrix by the given angle around the X axis\n *\n * Params:\n * mat - mat4 to rotate\n * angle - angle (in radians) to rotate\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.rotateX = function(mat, angle, dest) {\n\tvar s = Math.sin(angle);\n\tvar c = Math.cos(angle);\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\n\tif(!dest) { \n\t\tdest = mat; \n\t} else if(mat != dest) { // If the source and destination differ, copy the unchanged rows\n\t\tdest[0] = mat[0];\n\t\tdest[1] = mat[1];\n\t\tdest[2] = mat[2];\n\t\tdest[3] = mat[3];\n\t\t\n\t\tdest[12] = mat[12];\n\t\tdest[13] = mat[13];\n\t\tdest[14] = mat[14];\n\t\tdest[15] = mat[15];\n\t}\n\t\n\t// Perform axis-specific matrix multiplication\n\tdest[4] = a10*c + a20*s;\n\tdest[5] = a11*c + a21*s;\n\tdest[6] = a12*c + a22*s;\n\tdest[7] = a13*c + a23*s;\n\t\n\tdest[8] = a10*-s + a20*c;\n\tdest[9] = a11*-s + a21*c;\n\tdest[10] = a12*-s + a22*c;\n\tdest[11] = a13*-s + a23*c;\n\treturn dest;\n};\n\n/*\n * mat4.rotateY\n * Rotates a matrix by the given angle around the Y axis\n *\n * Params:\n * mat - mat4 to rotate\n * angle - angle (in radians) to rotate\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.rotateY = function(mat, angle, dest) {\n\tvar s = Math.sin(angle);\n\tvar c = Math.cos(angle);\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];\n\t\n\tif(!dest) { \n\t\tdest = mat; \n\t} else if(mat != dest) { // If the source and destination differ, copy the unchanged rows\n\t\tdest[4] = mat[4];\n\t\tdest[5] = mat[5];\n\t\tdest[6] = mat[6];\n\t\tdest[7] = mat[7];\n\t\t\n\t\tdest[12] = mat[12];\n\t\tdest[13] = mat[13];\n\t\tdest[14] = mat[14];\n\t\tdest[15] = mat[15];\n\t}\n\t\n\t// Perform axis-specific matrix multiplication\n\tdest[0] = a00*c + a20*-s;\n\tdest[1] = a01*c + a21*-s;\n\tdest[2] = a02*c + a22*-s;\n\tdest[3] = a03*c + a23*-s;\n\t\n\tdest[8] = a00*s + a20*c;\n\tdest[9] = a01*s + a21*c;\n\tdest[10] = a02*s + a22*c;\n\tdest[11] = a03*s + a23*c;\n\treturn dest;\n};\n\n/*\n * mat4.rotateZ\n * Rotates a matrix by the given angle around the Z axis\n *\n * Params:\n * mat - mat4 to rotate\n * angle - angle (in radians) to rotate\n * dest - Optional, mat4 receiving operation result. If not specified result is written to mat\n *\n * Returns:\n * dest if specified, mat otherwise\n */\nmat4.rotateZ = function(mat, angle, dest) {\n\tvar s = Math.sin(angle);\n\tvar c = Math.cos(angle);\n\t\n\t// Cache the matrix values (makes for huge speed increases!)\n\tvar a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];\n\tvar a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];\n\t\n\tif(!dest) { \n\t\tdest = mat; \n\t} else if(mat != dest) { // If the source and destination differ, copy the unchanged last row\n\t\tdest[8] = mat[8];\n\t\tdest[9] = mat[9];\n\t\tdest[10] = mat[10];\n\t\tdest[11] = mat[11];\n\t\t\n\t\tdest[12] = mat[12];\n\t\tdest[13] = mat[13];\n\t\tdest[14] = mat[14];\n\t\tdest[15] = mat[15];\n\t}\n\t\n\t// Perform axis-specific matrix multiplication\n\tdest[0] = a00*c + a10*s;\n\tdest[1] = a01*c + a11*s;\n\tdest[2] = a02*c + a12*s;\n\tdest[3] = a03*c + a13*s;\n\t\n\tdest[4] = a00*-s + a10*c;\n\tdest[5] = a01*-s + a11*c;\n\tdest[6] = a02*-s + a12*c;\n\tdest[7] = a03*-s + a13*c;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.frustum\n * Generates a frustum matrix with the given bounds\n *\n * Params:\n * left, right - scalar, left and right bounds of the frustum\n * bottom, top - scalar, bottom and top bounds of the frustum\n * near, far - scalar, near and far bounds of the frustum\n * dest - Optional, mat4 frustum matrix will be written into\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nmat4.frustum = function(left, right, bottom, top, near, far, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\tvar rl = (right - left);\n\tvar tb = (top - bottom);\n\tvar fn = (far - near);\n\tdest[0] = (near*2) / rl;\n\tdest[1] = 0;\n\tdest[2] = 0;\n\tdest[3] = 0;\n\tdest[4] = 0;\n\tdest[5] = (near*2) / tb;\n\tdest[6] = 0;\n\tdest[7] = 0;\n\tdest[8] = (right + left) / rl;\n\tdest[9] = (top + bottom) / tb;\n\tdest[10] = -(far + near) / fn;\n\tdest[11] = -1;\n\tdest[12] = 0;\n\tdest[13] = 0;\n\tdest[14] = -(far*near*2) / fn;\n\tdest[15] = 0;\n\treturn dest;\n};\n\n/*\n * mat4.perspective\n * Generates a perspective projection matrix with the given bounds\n *\n * Params:\n * fovy - scalar, vertical field of view\n * aspect - scalar, aspect ratio. typically viewport width/height\n * near, far - scalar, near and far bounds of the frustum\n * dest - Optional, mat4 frustum matrix will be written into\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nmat4.perspective = function(fovy, aspect, near, far, dest) {\n\tvar top = near*Math.tan(fovy*Math.PI / 360.0);\n\tvar right = top*aspect;\n\treturn mat4.frustum(-right, right, -top, top, near, far, dest);\n};\n\n/*\n * mat4.ortho\n * Generates a orthogonal projection matrix with the given bounds\n *\n * Params:\n * left, right - scalar, left and right bounds of the frustum\n * bottom, top - scalar, bottom and top bounds of the frustum\n * near, far - scalar, near and far bounds of the frustum\n * dest - Optional, mat4 frustum matrix will be written into\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nmat4.ortho = function(left, right, bottom, top, near, far, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\tvar rl = (right - left);\n\tvar tb = (top - bottom);\n\tvar fn = (far - near);\n\tdest[0] = 2 / rl;\n\tdest[1] = 0;\n\tdest[2] = 0;\n\tdest[3] = 0;\n\tdest[4] = 0;\n\tdest[5] = 2 / tb;\n\tdest[6] = 0;\n\tdest[7] = 0;\n\tdest[8] = 0;\n\tdest[9] = 0;\n\tdest[10] = -2 / fn;\n\tdest[11] = 0;\n\tdest[12] = -(left + right) / rl;\n\tdest[13] = -(top + bottom) / tb;\n\tdest[14] = -(far + near) / fn;\n\tdest[15] = 1;\n\treturn dest;\n};\n\n/*\n * mat4.ortho\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * Params:\n * eye - vec3, position of the viewer\n * center - vec3, point the viewer is looking at\n * up - vec3 pointing \"up\"\n * dest - Optional, mat4 frustum matrix will be written into\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nmat4.lookAt = function(eye, center, up, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\t\n\tvar eyex = eye[0],\n\t\teyey = eye[1],\n\t\teyez = eye[2],\n\t\tupx = up[0],\n\t\tupy = up[1],\n\t\tupz = up[2],\n\t\tcenterx = center[0],\n\t\tcentery = center[1],\n\t\tcenterz = center[2];\n\n\tif (eyex == centerx && eyey == centery && eyez == centerz) {\n\t\treturn mat4.identity(dest);\n\t}\n\t\n\tvar z0,z1,z2,x0,x1,x2,y0,y1,y2,len;\n\t\n\t//vec3.direction(eye, center, z);\n\tz0 = eyex - center[0];\n\tz1 = eyey - center[1];\n\tz2 = eyez - center[2];\n\t\n\t// normalize (no check needed for 0 because of early return)\n\tlen = 1/Math.sqrt(z0*z0 + z1*z1 + z2*z2);\n\tz0 *= len;\n\tz1 *= len;\n\tz2 *= len;\n\t\n\t//vec3.normalize(vec3.cross(up, z, x));\n\tx0 = upy*z2 - upz*z1;\n\tx1 = upz*z0 - upx*z2;\n\tx2 = upx*z1 - upy*z0;\n\tlen = Math.sqrt(x0*x0 + x1*x1 + x2*x2);\n\tif (!len) {\n\t\tx0 = 0;\n\t\tx1 = 0;\n\t\tx2 = 0;\n\t} else {\n\t\tlen = 1/len;\n\t\tx0 *= len;\n\t\tx1 *= len;\n\t\tx2 *= len;\n\t};\n\t\n\t//vec3.normalize(vec3.cross(z, x, y));\n\ty0 = z1*x2 - z2*x1;\n\ty1 = z2*x0 - z0*x2;\n\ty2 = z0*x1 - z1*x0;\n\t\n\tlen = Math.sqrt(y0*y0 + y1*y1 + y2*y2);\n\tif (!len) {\n\t\ty0 = 0;\n\t\ty1 = 0;\n\t\ty2 = 0;\n\t} else {\n\t\tlen = 1/len;\n\t\ty0 *= len;\n\t\ty1 *= len;\n\t\ty2 *= len;\n\t}\n\t\n\tdest[0] = x0;\n\tdest[1] = y0;\n\tdest[2] = z0;\n\tdest[3] = 0;\n\tdest[4] = x1;\n\tdest[5] = y1;\n\tdest[6] = z1;\n\tdest[7] = 0;\n\tdest[8] = x2;\n\tdest[9] = y2;\n\tdest[10] = z2;\n\tdest[11] = 0;\n\tdest[12] = -(x0*eyex + x1*eyey + x2*eyez);\n\tdest[13] = -(y0*eyex + y1*eyey + y2*eyez);\n\tdest[14] = -(z0*eyex + z1*eyey + z2*eyez);\n\tdest[15] = 1;\n\t\n\treturn dest;\n};\n\n/*\n * mat4.str\n * Returns a string representation of a mat4\n *\n * Params:\n * mat - mat4 to represent as a string\n *\n * Returns:\n * string representation of mat\n */\nmat4.str = function(mat) {\n\treturn '[' + mat[0] + ', ' + mat[1] + ', ' + mat[2] + ', ' + mat[3] + \n\t\t',\\n '+ mat[4] + ', ' + mat[5] + ', ' + mat[6] + ', ' + mat[7] + \n\t\t',\\n '+ mat[8] + ', ' + mat[9] + ', ' + mat[10] + ', ' + mat[11] + \n\t\t',\\n '+ mat[12] + ', ' + mat[13] + ', ' + mat[14] + ', ' + mat[15] + ']';\n};\n\n/*\n * quat4 - Quaternions \n */\nquat4 = {};\n\n/*\n * quat4.create\n * Creates a new instance of a quat4 using the default array type\n * Any javascript array containing at least 4 numeric elements can serve as a quat4\n *\n * Params:\n * quat - Optional, quat4 containing values to initialize with\n *\n * Returns:\n * New quat4\n */\nquat4.create = function(quat) {\n\tvar dest;\n\t\n\tif(quat) {\n\t\tdest = new glMatrixArrayType(4);\n\t\tdest[0] = quat[0];\n\t\tdest[1] = quat[1];\n\t\tdest[2] = quat[2];\n\t\tdest[3] = quat[3];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(4);\n\t}\n\t\n\treturn dest;\n};\n\n/*\n * quat4.set\n * Copies the values of one quat4 to another\n *\n * Params:\n * quat - quat4 containing values to copy\n * dest - quat4 receiving copied values\n *\n * Returns:\n * dest\n */\nquat4.set = function(quat, dest) {\n\tdest[0] = quat[0];\n\tdest[1] = quat[1];\n\tdest[2] = quat[2];\n\tdest[3] = quat[3];\n\t\n\treturn dest;\n};\n\n/*\n * quat4.calculateW\n * Calculates the W component of a quat4 from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length. \n * Any existing W component will be ignored. \n *\n * Params:\n * quat - quat4 to calculate W component of\n * dest - Optional, quat4 receiving calculated values. If not specified result is written to quat\n *\n * Returns:\n * dest if specified, quat otherwise\n */\nquat4.calculateW = function(quat, dest) {\n\tvar x = quat[0], y = quat[1], z = quat[2];\n\n\tif(!dest || quat == dest) {\n\t\tquat[3] = -Math.sqrt(Math.abs(1.0 - x*x - y*y - z*z));\n\t\treturn quat;\n\t}\n\tdest[0] = x;\n\tdest[1] = y;\n\tdest[2] = z;\n\tdest[3] = -Math.sqrt(Math.abs(1.0 - x*x - y*y - z*z));\n\treturn dest;\n};\n\n/*\n * quat4.inverse\n * Calculates the inverse of a quat4\n *\n * Params:\n * quat - quat4 to calculate inverse of\n * dest - Optional, quat4 receiving inverse values. If not specified result is written to quat\n *\n * Returns:\n * dest if specified, quat otherwise\n */\nquat4.inverse = function(quat, dest) {\n\tif(!dest || quat == dest) {\n\t\tquat[0] *= -1;\n\t\tquat[1] *= -1;\n\t\tquat[2] *= -1;\n\t\treturn quat;\n\t}\n\tdest[0] = -quat[0];\n\tdest[1] = -quat[1];\n\tdest[2] = -quat[2];\n\tdest[3] = quat[3];\n\treturn dest;\n};\n\n/*\n * quat4.length\n * Calculates the length of a quat4\n *\n * Params:\n * quat - quat4 to calculate length of\n *\n * Returns:\n * Length of quat\n */\nquat4.length = function(quat) {\n\tvar x = quat[0], y = quat[1], z = quat[2], w = quat[3];\n\treturn Math.sqrt(x*x + y*y + z*z + w*w);\n};\n\n/*\n * quat4.normalize\n * Generates a unit quaternion of the same direction as the provided quat4\n * If quaternion length is 0, returns [0, 0, 0, 0]\n *\n * Params:\n * quat - quat4 to normalize\n * dest - Optional, quat4 receiving operation result. If not specified result is written to quat\n *\n * Returns:\n * dest if specified, quat otherwise\n */\nquat4.normalize = function(quat, dest) {\n\tif(!dest) { dest = quat; }\n\t\n\tvar x = quat[0], y = quat[1], z = quat[2], w = quat[3];\n\tvar len = Math.sqrt(x*x + y*y + z*z + w*w);\n\tif(len == 0) {\n\t\tdest[0] = 0;\n\t\tdest[1] = 0;\n\t\tdest[2] = 0;\n\t\tdest[3] = 0;\n\t\treturn dest;\n\t}\n\tlen = 1/len;\n\tdest[0] = x * len;\n\tdest[1] = y * len;\n\tdest[2] = z * len;\n\tdest[3] = w * len;\n\t\n\treturn dest;\n};\n\n/*\n * quat4.multiply\n * Performs a quaternion multiplication\n *\n * Params:\n * quat - quat4, first operand\n * quat2 - quat4, second operand\n * dest - Optional, quat4 receiving operation result. If not specified result is written to quat\n *\n * Returns:\n * dest if specified, quat otherwise\n */\nquat4.multiply = function(quat, quat2, dest) {\n\tif(!dest) { dest = quat; }\n\t\n\tvar qax = quat[0], qay = quat[1], qaz = quat[2], qaw = quat[3];\n\tvar qbx = quat2[0], qby = quat2[1], qbz = quat2[2], qbw = quat2[3];\n\t\n\tdest[0] = qax*qbw + qaw*qbx + qay*qbz - qaz*qby;\n\tdest[1] = qay*qbw + qaw*qby + qaz*qbx - qax*qbz;\n\tdest[2] = qaz*qbw + qaw*qbz + qax*qby - qay*qbx;\n\tdest[3] = qaw*qbw - qax*qbx - qay*qby - qaz*qbz;\n\t\n\treturn dest;\n};\n\n/*\n * quat4.multiplyVec3\n * Transforms a vec3 with the given quaternion\n *\n * Params:\n * quat - quat4 to transform the vector with\n * vec - vec3 to transform\n * dest - Optional, vec3 receiving operation result. If not specified result is written to vec\n *\n * Returns:\n * dest if specified, vec otherwise\n */\nquat4.multiplyVec3 = function(quat, vec, dest) {\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\tvar qx = quat[0], qy = quat[1], qz = quat[2], qw = quat[3];\n\n\t// calculate quat * vec\n\tvar ix = qw*x + qy*z - qz*y;\n\tvar iy = qw*y + qz*x - qx*z;\n\tvar iz = qw*z + qx*y - qy*x;\n\tvar iw = -qx*x - qy*y - qz*z;\n\t\n\t// calculate result * inverse quat\n\tdest[0] = ix*qw + iw*-qx + iy*-qz - iz*-qy;\n\tdest[1] = iy*qw + iw*-qy + iz*-qx - ix*-qz;\n\tdest[2] = iz*qw + iw*-qz + ix*-qy - iy*-qx;\n\t\n\treturn dest;\n};\n\n/*\n * quat4.toMat3\n * Calculates a 3x3 matrix from the given quat4\n *\n * Params:\n * quat - quat4 to create matrix from\n * dest - Optional, mat3 receiving operation result\n *\n * Returns:\n * dest if specified, a new mat3 otherwise\n */\nquat4.toMat3 = function(quat, dest) {\n\tif(!dest) { dest = mat3.create(); }\n\t\n\tvar x = quat[0], y = quat[1], z = quat[2], w = quat[3];\n\n\tvar x2 = x + x;\n\tvar y2 = y + y;\n\tvar z2 = z + z;\n\n\tvar xx = x*x2;\n\tvar xy = x*y2;\n\tvar xz = x*z2;\n\n\tvar yy = y*y2;\n\tvar yz = y*z2;\n\tvar zz = z*z2;\n\n\tvar wx = w*x2;\n\tvar wy = w*y2;\n\tvar wz = w*z2;\n\n\tdest[0] = 1 - (yy + zz);\n\tdest[1] = xy - wz;\n\tdest[2] = xz + wy;\n\n\tdest[3] = xy + wz;\n\tdest[4] = 1 - (xx + zz);\n\tdest[5] = yz - wx;\n\n\tdest[6] = xz - wy;\n\tdest[7] = yz + wx;\n\tdest[8] = 1 - (xx + yy);\n\t\n\treturn dest;\n};\n\n/*\n * quat4.toMat4\n * Calculates a 4x4 matrix from the given quat4\n *\n * Params:\n * quat - quat4 to create matrix from\n * dest - Optional, mat4 receiving operation result\n *\n * Returns:\n * dest if specified, a new mat4 otherwise\n */\nquat4.toMat4 = function(quat, dest) {\n\tif(!dest) { dest = mat4.create(); }\n\t\n\tvar x = quat[0], y = quat[1], z = quat[2], w = quat[3];\n\n\tvar x2 = x + x;\n\tvar y2 = y + y;\n\tvar z2 = z + z;\n\n\tvar xx = x*x2;\n\tvar xy = x*y2;\n\tvar xz = x*z2;\n\n\tvar yy = y*y2;\n\tvar yz = y*z2;\n\tvar zz = z*z2;\n\n\tvar wx = w*x2;\n\tvar wy = w*y2;\n\tvar wz = w*z2;\n\n\tdest[0] = 1 - (yy + zz);\n\tdest[1] = xy - wz;\n\tdest[2] = xz + wy;\n\tdest[3] = 0;\n\n\tdest[4] = xy + wz;\n\tdest[5] = 1 - (xx + zz);\n\tdest[6] = yz - wx;\n\tdest[7] = 0;\n\n\tdest[8] = xz - wy;\n\tdest[9] = yz + wx;\n\tdest[10] = 1 - (xx + yy);\n\tdest[11] = 0;\n\n\tdest[12] = 0;\n\tdest[13] = 0;\n\tdest[14] = 0;\n\tdest[15] = 1;\n\t\n\treturn dest;\n};\n\n/*\n * quat4.slerp\n * Performs a spherical linear interpolation between two quat4\n *\n * Params:\n * quat - quat4, first quaternion\n * quat2 - quat4, second quaternion\n * slerp - interpolation amount between the two inputs\n * dest - Optional, quat4 receiving operation result. If not specified result is written to quat\n *\n * Returns:\n * dest if specified, quat otherwise\n */\nquat4.slerp = function(quat, quat2, slerp, dest) {\n    if(!dest) { dest = quat; }\n    \n\tvar cosHalfTheta =  quat[0]*quat2[0] + quat[1]*quat2[1] + quat[2]*quat2[2] + quat[3]*quat2[3];\n\t\n\tif (Math.abs(cosHalfTheta) >= 1.0){\n\t    if(dest != quat) {\n\t\t    dest[0] = quat[0];\n\t\t    dest[1] = quat[1];\n\t\t    dest[2] = quat[2];\n\t\t    dest[3] = quat[3];\n\t\t}\n\t\treturn dest;\n\t}\n\t\n\tvar halfTheta = Math.acos(cosHalfTheta);\n\tvar sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta*cosHalfTheta);\n\n\tif (Math.abs(sinHalfTheta) < 0.001){\n\t\tdest[0] = (quat[0]*0.5 + quat2[0]*0.5);\n\t\tdest[1] = (quat[1]*0.5 + quat2[1]*0.5);\n\t\tdest[2] = (quat[2]*0.5 + quat2[2]*0.5);\n\t\tdest[3] = (quat[3]*0.5 + quat2[3]*0.5);\n\t\treturn dest;\n\t}\n\t\n\tvar ratioA = Math.sin((1 - slerp)*halfTheta) / sinHalfTheta;\n\tvar ratioB = Math.sin(slerp*halfTheta) / sinHalfTheta; \n\t\n\tdest[0] = (quat[0]*ratioA + quat2[0]*ratioB);\n\tdest[1] = (quat[1]*ratioA + quat2[1]*ratioB);\n\tdest[2] = (quat[2]*ratioA + quat2[2]*ratioB);\n\tdest[3] = (quat[3]*ratioA + quat2[3]*ratioB);\n\t\n\treturn dest;\n};\n\n\n/*\n * quat4.str\n * Returns a string representation of a quaternion\n *\n * Params:\n * quat - quat4 to represent as a string\n *\n * Returns:\n * string representation of quat\n */\nquat4.str = function(quat) {\n\treturn '[' + quat[0] + ', ' + quat[1] + ', ' + quat[2] + ', ' + quat[3] + ']'; \n};\n\n\ndefine(\"glMatrix\", [\"typedefs\"], (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.glMatrix;\n    };\n}(this)));\n\n/*\n * glMatrixAddon.js\n * Extension to the glMatrix library. The original glMatrix library\n * was created by Brandon Jones.\n */\n\n\nmat4.xVec4 = function(mat, vec, dest){\n\tif(!dest) { dest = vec; }\t\n\tvar x = vec[0], y = vec[1], z = vec[2], w = vec[3];\n\t\n\tdest[0] = mat[0]*x + mat[1]*y + mat[2]*z + mat[3]*w;\n\tdest[1] = mat[4]*x + mat[5]*y + mat[6]*z + mat[7]*w;\n\tdest[2] = mat[8]*x + mat[9]*y + mat[10]*z + mat[11]*w;\n\tdest[3] = mat[12]*x + mat[13]*y + mat[14]*z + mat[15]*w;\n\t\n\treturn dest;\n};\n\nmat3.scale = function(mat, scalar, dest){\n\tif(!dest || mat == dest) {\n\t\tmat[0] *= scalar;\n\t\tmat[1] *= scalar;\n\t\tmat[2] *= scalar;\n\t\tmat[3] *= scalar;\n\t\tmat[4] *= scalar;\n\t\tmat[5] *= scalar;\n\t\tmat[6] *= scalar;\n\t\tmat[7] *= scalar;\n\t\tmat[8] *= scalar;\n\t\treturn mat;\n\t}\n\tdest = mat3.create();\n\tdest[0] = mat[0]*scalar;\n\tdest[1] = mat[1]*scalar;\n\tdest[2] = mat[2]*scalar;\n\tdest[3] = mat[3]*scalar;\n\tdest[4] = mat[4]*scalar;\n\tdest[5] = mat[5]*scalar;\n\tdest[6] = mat[6]*scalar;\n\tdest[7] = mat[7]*scalar;\n\tdest[8] = mat[8]*scalar;\n\treturn dest;\n};\n\nmat3.inverse = function(mat, dest){\n\tif(!dest) { dest = mat; }\n\t\n\tvar ha00 = mat[0], ha01 = mat[1], ha02 = mat[2];\n\tvar ha10 = mat[3], ha11 = mat[4], ha12 = mat[5];\n\tvar ha20 = mat[6], ha21 = mat[7], ha22 = mat[8];\n\t\n\tvar invDetA = 1/(ha00*ha11*ha22 + ha01*ha12*ha20 + ha02*ha10*ha21 - ha02*ha11*ha20 - ha01*ha10*ha22 - ha00*ha12*ha21);\n\tdest[0] = (ha11*ha22 - ha12*ha21)*invDetA;\n\tdest[1] = (ha02*ha21 - ha01*ha22)*invDetA;\n\tdest[2] = (ha01*ha12 - ha02*ha11)*invDetA;\n\tdest[3] = (ha12*ha20 - ha10*ha22)*invDetA;\n\tdest[4] = (ha00*ha22 - ha02*ha20)*invDetA;\n\tdest[5] = (ha02*ha10 - ha00*ha12)*invDetA;\n\tdest[6] = (ha10*ha21 - ha11*ha20)*invDetA;\n\tdest[7] = (ha01*ha20 - ha00*ha21)*invDetA;\n\tdest[8] = (ha00*ha11 - ha01*ha10)*invDetA;\n\treturn dest;\n};\n\nmat3.multiply = function(mat, mat2, dest) {\n\tif(!dest) { dest = mat; }\n\t\n\tvar ha00 = mat[0], ha01 = mat[1], ha02 = mat[2];\n\tvar ha10 = mat[3], ha11 = mat[4], ha12 = mat[5];\n\tvar ha20 = mat[6], ha21 = mat[7], ha22 = mat[8];\n\t\n\tvar hb00 = mat2[0], hb01 = mat2[1], hb02 = mat2[2];\n\tvar hb10 = mat2[3], hb11 = mat2[4], hb12 = mat2[5];\n\tvar hb20 = mat2[6], hb21 = mat2[7], hb22 = mat2[8];\n\t\n\tdest[0] = ha00*hb00 + ha01*hb10 + ha02*hb20;\n\tdest[1] = ha00*hb01 + ha01*hb11 + ha02*hb21;\n\tdest[2] = ha00*hb02 + ha01*hb12 + ha02*hb22;\n\t\n\tdest[3] = ha10*hb00 + ha11*hb10 + ha12*hb20;\n\tdest[4] = ha10*hb01 + ha11*hb11 + ha12*hb21;\n\tdest[5] = ha10*hb02 + ha11*hb12 + ha12*hb22;\n\t\n\tdest[6] = ha20*hb00 + ha21*hb10 + ha22*hb20;\n\tdest[7] = ha20*hb01 + ha21*hb11 + ha22*hb21;\n\tdest[8] = ha20*hb02 + ha21*hb12 + ha22*hb22;\n\treturn dest;\n};\n\nmat3.xVec3 = function(mat, vec, dest){\n\tif(!dest) { dest = vec; }\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\t\n\tdest[0] = mat[0]*x + mat[1]*y + mat[2]*z;\n\tdest[1] = mat[3]*x + mat[4]*y + mat[5]*z;\n\tdest[2] = mat[6]*x + mat[7]*y + mat[8]*z;\n\t\n\treturn dest;\n};\n\nvar vec4={};\n\nvec4.create = function(vec){\n\tvar dest;\n\t\n\tif(vec) {\n\t\tdest = new glMatrixArrayType(4);\n\t\tdest[0] = vec[0];\n\t\tdest[1] = vec[1];\n\t\tdest[2] = vec[2];\n\t\tdest[3] = vec[3];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(4);\n\t}\n\t\n\treturn dest;\n};\n\nvec4.project = function(vec, dest){\n\tif(!dest) { dest = vec; }\n\t\n\tdest[0] = vec[0]/vec[3];\n\tdest[1] = vec[1]/vec[3];\n\tdest[2] = vec[2]/vec[3];\n\treturn dest;\n};\n\nvec4.scale = function(vec, val, dest){\n\tif(!dest || vec == dest) {\n\t\tvec[0] *= val;\n\t\tvec[1] *= val;\n\t\tvec[2] *= val;\n\t\tvec[4] *= val;\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0]*val;\n\tdest[1] = vec[1]*val;\n\tdest[2] = vec[2]*val;\n\tdest[3] = vec[3]*val;\n\treturn dest;\n};\n\nvec4.xMat4 = function(vec, mat, dest){\n\tif(!dest) { dest = vec; }\n\t\n\tvar x = vec[0], y = vec[1], z = vec[2], w = vec[3];\n\t\n\tdest[0] = mat[0]*x + mat[4]*y + mat[8]*z + mat[12]*w;\n\tdest[1] = mat[1]*x + mat[5]*y + mat[9]*z + mat[13]*w;\n\tdest[2] = mat[2]*x + mat[6]*y + mat[10]*z + mat[14]*w;\n\tdest[3] = mat[3]*x + mat[7]*y + mat[11]*z + mat[15]*w;\n\t\n\treturn dest;\n};\n\n\nvar mat2 = {};\n\nmat2.create = function(mat){\n\tvar dest;\n\t\n\tif(mat) {\n\t\tdest = new glMatrixArrayType(4);\n\t\tdest[0] = mat[0];\n\t\tdest[1] = mat[1];\n\t\tdest[2] = mat[2];\n\t\tdest[3] = mat[3];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest  = new glMatrixArrayType([0,0,0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(4);\n\t}\n\t\n\treturn dest;\n};\n\nmat2.xVec2 = function(mat, vec, dest){\n\tif(!dest) { dest = vec; }\n\tvar x = vec[0], y = vec[1];\n\t\n\tdest[0] = mat[0]*x + mat[1]*y;\n\tdest[1] = mat[2]*x + mat[3]*y;\n\t\n\treturn dest;\n};\n\nmat2.scale = function(mat, scale, dest){\n\tif(!dest || mat == dest) {\n\t\tmat[0] *= scale;\n\t\tmat[1] *= scale;\n\t\tmat[2] *= scale;\n\t\tmat[3] *= scale;\n\t\treturn mat;\n\t}\n\t\n\tdest[0] = mat[0]*scale;\n\tdest[1] = mat[1]*scale;\n\tdest[2] = mat[2]*scale;\n\tdest[3] = mat[3]*scale;\n\treturn dest;\n};\n\nmat2.determinant = function(mat){\n\treturn mat[0]*mat[3] - mat[1]*mat[2];\n};\n\nmat2.inverse = function(mat){\n  var scale = 1/(mat2.determinant(mat));\n  var a = mat[3]*scale,\n      b = -mat[1]*scale,\n      c = -mat[2]*scale,\n      d = mat[0];\n  mat[0] = a;\n  mat[1] = b;\n  mat[2] = c;\n  mat[3] = d;\n  return mat;\n};\n\nvar vec2 = {};\nvec2.create = function(vec){\n\tvar dest;\n\t\n\tif(vec) {\n\t\tdest = new glMatrixArrayType(2);\n\t\tdest[0] = vec[0];\n\t\tdest[1] = vec[1];\n\t} else {\n\t\tif(glMatrixArrayType === Array)\n\t\t\tdest = new glMatrixArrayType([0,0]);\n\t\telse\n\t\t\tdest = new glMatrixArrayType(2);\n\t}\n\t\n\treturn dest;\n};\n\nvec2.subtract = function(vec, vec2, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] -= vec2[0];\n\t\tvec[1] -= vec2[1];\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0] - vec2[0];\n\tdest[1] = vec[1] - vec2[1];\n\treturn dest;\n};\n\nvec2.add = function(vec, vec2, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] += vec2[0];\n\t\tvec[1] += vec2[1];\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0] + vec2[0];\n\tdest[1] = vec[1] + vec2[1];\n\treturn dest;\n};\n\nvec2.scale = function(vec, val, dest) {\n\tif(!dest || vec == dest) {\n\t\tvec[0] *= val;\n\t\tvec[1] *= val;\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0]*val;\n\tdest[1] = vec[1]*val;\n\treturn dest;\n};\n\nvec2.normalize = function(vec, dest) {\n  if(!dest) { dest = vec; }\n  \n  var x = vec[0], y = vec[1];\n  var len = Math.sqrt(x*x + y*y);\n  \n  if (!len) {\n    dest[0] = 0;\n    dest[1] = 0;\n    return dest;\n  } else if (len == 1) {\n    dest[0] = x;\n    dest[1] = y;\n    return dest;\n  }\n  \n  len = 1 / len;\n  dest[0] = x*len;\n  dest[1] = y*len;\n  return dest;\n};\n\nvec2.dot = function(vec, vec2){\n  return vec[0]*vec2[0] + vec[1]*vec2[1];\n};\n\nvec2.multiply = function(vec, vec2, dest){\n  if(!dest) { dest = vec; }\n  \n  dest[0] = vec[0]*vec2[0];\n  dest[1] = vec[1]*vec2[1];\n  return dest;\n};\n\n/**\n * @param vec vec2 to be unprojected [x,y] -> [x,y,1]\n * @returns vec3 unprojected vector\n */\nvec2.unproject = function(vec){\n\treturn vec3.create([vec[0], vec[1], 1]);\n};\n\nvec2.length = function(vec){\n  return Math.sqrt(vec[0]*vec[0] + vec[1]*vec[1]);\n};\n\nvec2.perspectiveProject = function(vec){\n  var result = vec2.create(vec);\n  return vec2.scale(result, 1/vec[2]);\n};\n\n/**\n * @param vec vec3 to be projected [x,y,z] -> [x/z,y/z]\n * @returns vec2 projected vector\n */\nvec3.project = function(vec){\n\treturn vec2.scale(vec2.create(vec), 1/vec[2]);\n};\n\nvar vec6 = {};\nvec6.scale = function(vec, val, dest){\n\tif(!dest || vec == dest) {\n\t\tvec[0] *= val;\n\t\tvec[1] *= val;\n\t\tvec[2] *= val;\n\t\tvec[3] *= val;\n\t\tvec[4] *= val;\n\t\tvec[5] *= val;\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0]*val;\n\tdest[1] = vec[1]*val;\n\tdest[2] = vec[2]*val;\n\tdest[3] = vec[3]*val;\n\tdest[4] = vec[4]*val;\n\tdest[5] = vec[5]*val;\n\treturn dest;\n};\n\nvec6.subtract = function(vec, vec2, dest){\n\tif(!dest || vec == dest) {\n\t\tvec[0] -= vec2[0];\n\t\tvec[1] -= vec2[1];\n\t\tvec[2] -= vec2[2];\n\t\tvec[3] -= vec2[3];\n\t\tvec[4] -= vec2[4];\n\t\tvec[5] -= vec2[5];\n\t\treturn vec;\n\t}\n\t\n\tdest[0] = vec[0] - vec2[0];\n\tdest[1] = vec[1] - vec2[1];\n\tdest[2] = vec[2] - vec2[2];\n\tdest[3] = vec[3] - vec2[3];\n\tdest[4] = vec[4] - vec2[4];\n\tdest[5] = vec[5] - vec2[5];\n\treturn dest;\n};\n\nvec6.dot = function(vec, vec2){\n\treturn vec[0]*vec2[0] + vec[1]*vec2[1] + vec[2]*vec2[2] + vec[3]*vec2[3] + vec[4]*vec2[4] + vec[5]*vec2[5];\n};\n\nvar mat6 = {};\nmat6.xVec6 = function(mat, vec, dest){\n\tif(!dest) { dest = vec; }\t\n\tvar x = vec[0], y = vec[1], z = vec[2], u = vec[3], w = vec[4], v = vec[5];\n\t\n\tdest[0] = mat[0]*x + mat[1]*y + mat[2]*z + mat[3]*u + mat[4]*w + mat[5]*v;\n\tdest[1] = mat[6]*x + mat[7]*y + mat[8]*z + mat[9]*u + mat[10]*w + mat[11]*v;\n\tdest[2] = mat[12]*x + mat[13]*y + mat[14]*z + mat[15]*u + mat[16]*w + mat[17]*v;\n\tdest[3] = mat[18]*x + mat[19]*y + mat[20]*z + mat[21]*u + mat[22]*w + mat[23]*v;\n\tdest[4] = mat[24]*x + mat[25]*y + mat[26]*z + mat[27]*u + mat[28]*w + mat[29]*v;\n\tdest[5] = mat[30]*x + mat[31]*y + mat[32]*z + mat[33]*u + mat[34]*w + mat[35]*v;\n\t\n\treturn dest;\n};\n\nmat3.xVec3 = function(mat, vec, dest){\n\tif(!dest) { dest = vec; }\t\n\tvar x = vec[0], y = vec[1], z = vec[2];\n\t\n\tdest[0] = mat[0]*x + mat[1]*y + mat[2]*z;\n\tdest[1] = mat[3]*x + mat[4]*y + mat[5]*z;\n\tdest[2] = mat[6]*x + mat[7]*y + mat[8]*z;\n\t\n\treturn dest;\n};\ndefine(\"glMatrixAddon\", [\"glMatrix\"], (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.glMatrixAddon;\n    };\n}(this)));\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('array_helper',[],function() {\n    \"use strict\";\n\n    return {\n        init : function(arr, val) {\n            var l = arr.length;\n            while (l--) {\n                arr[l] = val;\n            }\n        },\n\n        /**\n         * Shuffles the content of an array\n         * @return {Array} the array itself shuffled\n         */\n        shuffle : function(arr) {\n            var i = arr.length - 1, j, x;\n            for (i; i >= 0; i--) {\n                j = Math.floor(Math.random() * i);\n                x = arr[i];\n                arr[i] = arr[j];\n                arr[j] = x;\n            }\n            return arr;\n        },\n\n        toPointList : function(arr) {\n            var i, j, row = [], rows = [];\n            for ( i = 0; i < arr.length; i++) {\n                row = [];\n                for ( j = 0; j < arr[i].length; j++) {\n                    row[j] = arr[i][j];\n                }\n                rows[i] = \"[\" + row.join(\",\") + \"]\";\n            }\n            return \"[\" + rows.join(\",\\r\\n\") + \"]\";\n        },\n\n        /**\n         * returns the elements which's score is bigger than the threshold\n         * @return {Array} the reduced array\n         */\n        threshold : function(arr, threshold, scoreFunc) {\n            var i, queue = [];\n            for ( i = 0; i < arr.length; i++) {\n                if (scoreFunc.apply(arr, [arr[i]]) >= threshold) {\n                    queue.push(arr[i]);\n                }\n            }\n            return queue;\n        },\n\n        maxIndex : function(arr) {\n            var i, max = 0;\n            for ( i = 0; i < arr.length; i++) {\n                if (arr[i] > arr[max]) {\n                    max = i;\n                }\n            }\n            return max;\n        },\n\n        max : function(arr) {\n            var i, max = 0;\n            for ( i = 0; i < arr.length; i++) {\n                if (arr[i] > max) {\n                    max = arr[i];\n                }\n            }\n            return max;\n        },\n\n        sum: function(arr) {\n            var length = arr.length,\n                sum = 0;\n\n            while(length--) {\n                sum += arr[length];\n            }\n            return sum;\n        }\n    };\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define, vec2, vec3 */\n\ndefine('cv_utils',['cluster', 'glMatrixAddon', \"array_helper\"], function(Cluster2, glMatrixAddon, ArrayHelper) {\n\n    \"use strict\";\n    /*\n    * cv_utils.js\n    * Collection of CV functions and libraries\n    */\n\n    /**\n     * Namespace for various CV alorithms\n     * @class Represents a collection of useful CV algorithms/functions\n     */\n\n    var CVUtils = {};\n\n    /**\n     * @param x x-coordinate\n     * @param y y-coordinate\n     * @return ImageReference {x,y} Coordinate\n     */\n    CVUtils.imageRef = function(x, y) {\n        var that = {\n            x : x,\n            y : y,\n            toVec2 : function() {\n                return vec2.create([this.x, this.y]);\n            },\n            toVec3 : function() {\n                return vec3.create([this.x, this.y, 1]);\n            },\n            round : function() {\n                this.x = this.x > 0.0 ? Math.floor(this.x + 0.5) : Math.floor(this.x - 0.5);\n                this.y = this.y > 0.0 ? Math.floor(this.y + 0.5) : Math.floor(this.y - 0.5);\n                return this;\n            }\n        };\n        return that;\n    };\n\n    /**\n     * Computes an integral image of a given grayscale image.\n     * @param imageDataContainer {ImageDataContainer} the image to be integrated\n     */\n    CVUtils.computeIntegralImage2 = function(imageWrapper, integralWrapper) {\n        var imageData = imageWrapper.data;\n        var width = imageWrapper.size.x;\n        var height = imageWrapper.size.y;\n        var integralImageData = integralWrapper.data;\n        var sum = 0, posA = 0, posB = 0, posC = 0, posD = 0, x, y;\n\n        // sum up first column\n        posB = width;\n        sum = 0;\n        for ( y = 1; y < height; y++) {\n            sum += imageData[posA];\n            integralImageData[posB] += sum;\n            posA += width;\n            posB += width;\n        }\n\n        posA = 0;\n        posB = 1;\n        sum = 0;\n        for ( x = 1; x < width; x++) {\n            sum += imageData[posA];\n            integralImageData[posB] += sum;\n            posA++;\n            posB++;\n        }\n\n        for ( y = 1; y < height; y++) {\n            posA = y * width + 1;\n            posB = (y - 1) * width + 1;\n            posC = y * width;\n            posD = (y - 1) * width;\n            for ( x = 1; x < width; x++) {\n                integralImageData[posA] += imageData[posA] + integralImageData[posB] + integralImageData[posC] - integralImageData[posD];\n                posA++;\n                posB++;\n                posC++;\n                posD++;\n            }\n        }\n    };\n\n    CVUtils.computeIntegralImage = function(imageWrapper, integralWrapper) {\n        var imageData = imageWrapper.data;\n        var width = imageWrapper.size.x;\n        var height = imageWrapper.size.y;\n        var integralImageData = integralWrapper.data;\n        var sum = 0;\n\n        // sum up first row\n        for (var i = 0; i < width; i++) {\n            sum += imageData[i];\n            integralImageData[i] = sum;\n        }\n\n        for (var v = 1; v < height; v++) {\n            sum = 0;\n            for (var u = 0; u < width; u++) {\n                sum += imageData[v * width + u];\n                integralImageData[((v) * width) + u] = sum + integralImageData[(v - 1) * width + u];\n            }\n        }\n    };\n\n    CVUtils.thresholdImage = function(imageWrapper, threshold, targetWrapper) {\n        if (!targetWrapper) {\n            targetWrapper = imageWrapper;\n        }\n        var imageData = imageWrapper.data, length = imageData.length, targetData = targetWrapper.data;\n\n        while (length--) {\n            targetData[length] = imageData[length] < threshold ? 1 : 0;\n        }\n    };\n\n    CVUtils.computeHistogram = function(imageWrapper, bitsPerPixel) {\n        if (!bitsPerPixel) {\n            bitsPerPixel = 8;\n        }\n        var imageData = imageWrapper.data,\n            length = imageData.length,\n            bitShift = 8 - bitsPerPixel,\n            bucketCnt = 1 << bitsPerPixel,\n            hist = new Int32Array(bucketCnt);\n\n        while (length--) {\n            hist[imageData[length] >> bitShift]++;\n        }\n        return hist;\n    };\n\n    CVUtils.sharpenLine = function(line) {\n        var i,\n            length = line.length,\n            left = line[0],\n            center = line[1],\n            right;\n\n        for (i = 1; i < length - 1; i++) {\n            right = line[i + 1];\n            //  -1 4 -1 kernel\n            line[i-1] = (((center * 2) - left - right)) & 255;\n            left = center;\n            center = right;\n        }\n        return line;\n    };\n\n    CVUtils.determineOtsuThreshold = function(imageWrapper, bitsPerPixel) {\n        if (!bitsPerPixel) {\n            bitsPerPixel = 8;\n        }\n        var hist,\n            threshold,\n            bitShift = 8 - bitsPerPixel;\n\n        function px(init, end) {\n            var sum = 0, i;\n            for ( i = init; i <= end; i++) {\n                sum += hist[i];\n            }\n            return sum;\n        }\n\n        function mx(init, end) {\n            var i, sum = 0;\n\n            for ( i = init; i <= end; i++) {\n                sum += i * hist[i];\n            }\n\n            return sum;\n        }\n\n        function determineThreshold() {\n            var vet = [0], p1, p2, p12, k, m1, m2, m12,\n                max = (1 << bitsPerPixel) - 1;\n\n            hist = CVUtils.computeHistogram(imageWrapper, bitsPerPixel);\n            for ( k = 1; k < max; k++) {\n                p1 = px(0, k);\n                p2 = px(k + 1, max);\n                p12 = p1 * p2;\n                if (p12 === 0) {\n                    p12 = 1;\n                }\n                m1 = mx(0, k) * p2;\n                m2 = mx(k + 1, max) * p1;\n                m12 = m1 - m2;\n                vet[k] = m12 * m12 / p12;\n            }\n            return ArrayHelper.maxIndex(vet);\n        }\n\n        threshold = determineThreshold();\n        return threshold << bitShift;\n    };\n\n    CVUtils.otsuThreshold = function(imageWrapper, targetWrapper) {\n        var threshold = CVUtils.determineOtsuThreshold(imageWrapper);\n\n        CVUtils.thresholdImage(imageWrapper, threshold, targetWrapper);\n        return threshold;\n    };\n\n    // local thresholding\n    CVUtils.computeBinaryImage = function(imageWrapper, integralWrapper, targetWrapper) {\n        CVUtils.computeIntegralImage(imageWrapper, integralWrapper);\n\n        if (!targetWrapper) {\n            targetWrapper = imageWrapper;\n        }\n        var imageData = imageWrapper.data;\n        var targetData = targetWrapper.data;\n        var width = imageWrapper.size.x;\n        var height = imageWrapper.size.y;\n        var integralImageData = integralWrapper.data;\n        var sum = 0, v, u, kernel = 3, A, B, C, D, avg, size = (kernel * 2 + 1) * (kernel * 2 + 1);\n\n        // clear out top & bottom-border\n        for ( v = 0; v <= kernel; v++) {\n            for ( u = 0; u < width; u++) {\n                targetData[((v) * width) + u] = 0;\n                targetData[(((height - 1) - v) * width) + u] = 0;\n            }\n        }\n\n        // clear out left & right border\n        for ( v = kernel; v < height - kernel; v++) {\n            for ( u = 0; u <= kernel; u++) {\n                targetData[((v) * width) + u] = 0;\n                targetData[((v) * width) + (width - 1 - u)] = 0;\n            }\n        }\n\n        for ( v = kernel + 1; v < height - kernel - 1; v++) {\n            for ( u = kernel + 1; u < width - kernel; u++) {\n                A = integralImageData[(v - kernel - 1) * width + (u - kernel - 1)];\n                B = integralImageData[(v - kernel - 1) * width + (u + kernel)];\n                C = integralImageData[(v + kernel) * width + (u - kernel - 1)];\n                D = integralImageData[(v + kernel) * width + (u + kernel)];\n                sum = D - C - B + A;\n                avg = sum / (size);\n                targetData[v * width + u] = imageData[v * width + u] > (avg + 5) ? 0 : 1;\n            }\n        }\n    };\n\n    CVUtils.cluster = function(points, threshold, property) {\n        var i, k, cluster, point, clusters = [];\n\n        if (!property) {\n            property = \"rad\";\n        }\n\n        function addToCluster(point) {\n            var found = false;\n            for ( k = 0; k < clusters.length; k++) {\n                cluster = clusters[k];\n                if (cluster.fits(point)) {\n                    cluster.add(point);\n                    found = true;\n                }\n            }\n            return found;\n        }\n\n        // iterate over each cloud\n        for ( i = 0; i < points.length; i++) {\n            point = Cluster2.createPoint(points[i], i, property);\n            if (!addToCluster(point)) {\n                clusters.push(Cluster2.create(point, threshold));\n            }\n        }\n\n        return clusters;\n\n    };\n\n    CVUtils.Tracer = {\n        trace : function(points, vec) {\n            var iteration, maxIterations = 10, top = [], result = [], centerPos = 0, currentPos = 0;\n\n            function trace(idx, forward) {\n                var from, to, toIdx, predictedPos, thresholdX = 1, thresholdY = Math.abs(vec[1] / 10), found = false;\n\n                function match(pos, predicted) {\n                    if (pos.x > (predicted.x - thresholdX) && pos.x < (predicted.x + thresholdX) && pos.y > (predicted.y - thresholdY) && pos.y < (predicted.y + thresholdY)) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                }\n\n                // check if the next index is within the vec specifications\n                // if not, check as long as the threshold is met\n\n                from = points[idx];\n                if (forward) {\n                    predictedPos = {\n                        x : from.x + vec[0],\n                        y : from.y + vec[1]\n                    };\n                } else {\n                    predictedPos = {\n                        x : from.x - vec[0],\n                        y : from.y - vec[1]\n                    };\n                }\n\n                toIdx = forward ? idx + 1 : idx - 1;\n                to = points[toIdx];\n                while (to && ( found = match(to, predictedPos)) !== true && (Math.abs(to.y - from.y) < vec[1])) {\n                    toIdx = forward ? toIdx + 1 : toIdx - 1;\n                    to = points[toIdx];\n                }\n\n                return found ? toIdx : null;\n            }\n\n            for ( iteration = 0; iteration < maxIterations; iteration++) {\n                // randomly select point to start with\n                centerPos = Math.floor(Math.random() * points.length);\n\n                // trace forward\n                top = [];\n                currentPos = centerPos;\n                top.push(points[currentPos]);\n                while (( currentPos = trace(currentPos, true)) !== null) {\n                    top.push(points[currentPos]);\n                }\n                if (centerPos > 0) {\n                    currentPos = centerPos;\n                    while (( currentPos = trace(currentPos, false)) !== null) {\n                        top.push(points[currentPos]);\n                    }\n                }\n\n                if (top.length > result.length) {\n                    result = top;\n                }\n            }\n\n            return result;\n\n        }\n    };\n\n    CVUtils.DILATE = 1;\n    CVUtils.ERODE = 2;\n\n    CVUtils.dilate = function(inImageWrapper, outImageWrapper) {\n        var v, u, inImageData = inImageWrapper.data, outImageData = outImageWrapper.data, height = inImageWrapper.size.y, width = inImageWrapper.size.x, sum, yStart1, yStart2, xStart1, xStart2;\n\n        for ( v = 1; v < height - 1; v++) {\n            for ( u = 1; u < width - 1; u++) {\n                yStart1 = v - 1;\n                yStart2 = v + 1;\n                xStart1 = u - 1;\n                xStart2 = u + 1;\n                sum = inImageData[yStart1 * width + xStart1]/* +   inImageData[yStart1*width+u] */ + inImageData[yStart1 * width + xStart2] +\n                /* inImageData[v*width+xStart1]  + */\n                inImageData[v * width + u] + /* inImageData[v*width+xStart2] +*/\n                inImageData[yStart2 * width + xStart1]/* +   inImageData[yStart2*width+u]*/ + inImageData[yStart2 * width + xStart2];\n                outImageData[v * width + u] = sum > 0 ? 1 : 0;\n            }\n        }\n    };\n\n    CVUtils.erode = function(inImageWrapper, outImageWrapper) {\n        var v, u, inImageData = inImageWrapper.data, outImageData = outImageWrapper.data, height = inImageWrapper.size.y, width = inImageWrapper.size.x, sum, yStart1, yStart2, xStart1, xStart2;\n\n        for ( v = 1; v < height - 1; v++) {\n            for ( u = 1; u < width - 1; u++) {\n                yStart1 = v - 1;\n                yStart2 = v + 1;\n                xStart1 = u - 1;\n                xStart2 = u + 1;\n                sum = inImageData[yStart1 * width + xStart1]/* +   inImageData[yStart1*width+u] */ + inImageData[yStart1 * width + xStart2] +\n                /* inImageData[v*width+xStart1]  + */\n                inImageData[v * width + u] + /* inImageData[v*width+xStart2] +*/\n                inImageData[yStart2 * width + xStart1]/* +   inImageData[yStart2*width+u]*/ + inImageData[yStart2 * width + xStart2];\n                outImageData[v * width + u] = sum === 5 ? 1 : 0;\n            }\n        }\n    };\n\n    CVUtils.subtract = function(aImageWrapper, bImageWrapper, resultImageWrapper) {\n        if (!resultImageWrapper) {\n            resultImageWrapper = aImageWrapper;\n        }\n        var length = aImageWrapper.data.length, aImageData = aImageWrapper.data, bImageData = bImageWrapper.data, cImageData = resultImageWrapper.data;\n\n        while (length--) {\n            cImageData[length] = aImageData[length] - bImageData[length];\n        }\n    };\n\n    CVUtils.bitwiseOr = function(aImageWrapper, bImageWrapper, resultImageWrapper) {\n        if (!resultImageWrapper) {\n            resultImageWrapper = aImageWrapper;\n        }\n        var length = aImageWrapper.data.length, aImageData = aImageWrapper.data, bImageData = bImageWrapper.data, cImageData = resultImageWrapper.data;\n\n        while (length--) {\n            cImageData[length] = aImageData[length] || bImageData[length];\n        }\n    };\n\n    CVUtils.countNonZero = function(imageWrapper) {\n        var length = imageWrapper.data.length, data = imageWrapper.data, sum = 0;\n\n        while (length--) {\n            sum += data[length];\n        }\n        return sum;\n    };\n\n    CVUtils.topGeneric = function(list, top, scoreFunc) {\n        var i, minIdx = 0, min = 0, queue = [], score, hit, pos;\n\n        for ( i = 0; i < top; i++) {\n            queue[i] = {\n                score : 0,\n                item : null\n            };\n        }\n\n        for ( i = 0; i < list.length; i++) {\n            score = scoreFunc.apply(this, [list[i]]);\n            if (score > min) {\n                hit = queue[minIdx];\n                hit.score = score;\n                hit.item = list[i];\n                min = Number.MAX_VALUE;\n                for ( pos = 0; pos < top; pos++) {\n                    if (queue[pos].score < min) {\n                        min = queue[pos].score;\n                        minIdx = pos;\n                    }\n                }\n            }\n        }\n\n        return queue;\n    };\n\n    CVUtils.grayArrayFromImage = function(htmlImage, offsetX, ctx, array) {\n        ctx.drawImage(htmlImage, offsetX, 0, htmlImage.width, htmlImage.height);\n        var ctxData = ctx.getImageData(offsetX, 0, htmlImage.width, htmlImage.height).data;\n        CVUtils.computeGray(ctxData, array);\n    };\n\n    CVUtils.grayArrayFromContext = function(ctx, size, offset, array) {\n        var ctxData = ctx.getImageData(offset.x, offset.y, size.x, size.y).data;\n        CVUtils.computeGray(ctxData, array);\n    };\n\n    CVUtils.grayAndHalfSampleFromCanvasData = function(canvasData, size, outArray) {\n        var topRowIdx = 0;\n        var bottomRowIdx = size.x;\n        var endIdx = Math.floor(canvasData.length / 4);\n        var outWidth = size.x / 2;\n        var outImgIdx = 0;\n        var inWidth = size.x;\n        var i;\n\n        while (bottomRowIdx < endIdx) {\n            for ( i = 0; i < outWidth; i++) {\n                outArray[outImgIdx] = Math.floor(((0.299 * canvasData[topRowIdx * 4 + 0] + 0.587 * canvasData[topRowIdx * 4 + 1] + 0.114 * canvasData[topRowIdx * 4 + 2]) + (0.299 * canvasData[(topRowIdx + 1) * 4 + 0] + 0.587 * canvasData[(topRowIdx + 1) * 4 + 1] + 0.114 * canvasData[(topRowIdx + 1) * 4 + 2]) + (0.299 * canvasData[(bottomRowIdx) * 4 + 0] + 0.587 * canvasData[(bottomRowIdx) * 4 + 1] + 0.114 * canvasData[(bottomRowIdx) * 4 + 2]) + (0.299 * canvasData[(bottomRowIdx + 1) * 4 + 0] + 0.587 * canvasData[(bottomRowIdx + 1) * 4 + 1] + 0.114 * canvasData[(bottomRowIdx + 1) * 4 + 2])) / 4);\n                outImgIdx++;\n                topRowIdx = topRowIdx + 2;\n                bottomRowIdx = bottomRowIdx + 2;\n            }\n            topRowIdx = topRowIdx + inWidth;\n            bottomRowIdx = bottomRowIdx + inWidth;\n        }\n\n    };\n\n    CVUtils.computeGray = function(imageData, outArray, config) {\n        var l = (imageData.length / 4) | 0,\n            i,\n            singleChannel = config && config.singleChannel === true;\n\n        if (singleChannel) {\n            for (i = 0; i < l; i++) {\n                outArray[i] = imageData[i * 4 + 0];\n            }\n        } else {\n            for (i = 0; i < l; i++) {\n                outArray[i] = Math.floor(0.299 * imageData[i * 4 + 0] + 0.587 * imageData[i * 4 + 1] + 0.114 * imageData[i * 4 + 2]);\n            }\n        }\n    };\n\n    CVUtils.loadImageArray = function(src, callback, canvas) {\n        if (!canvas)\n            canvas = document.createElement('canvas');\n        var img = new Image();\n        img.callback = callback;\n        img.onload = function() {\n            canvas.width = this.width;\n            canvas.height = this.height;\n            var ctx = canvas.getContext('2d');\n            ctx.drawImage(this, 0, 0);\n            var array = new Uint8Array(this.width * this.height);\n            ctx.drawImage(this, 0, 0);\n            var data = ctx.getImageData(0, 0, this.width, this.height).data;\n            CVUtils.computeGray(data, array);\n            this.callback(array, {\n                x : this.width,\n                y : this.height\n            }, this);\n        };\n        img.src = src;\n    };\n\n    /**\n     * @param inImg {ImageWrapper} input image to be sampled\n     * @param outImg {ImageWrapper} to be stored in\n     */\n    CVUtils.halfSample = function(inImgWrapper, outImgWrapper) {\n        var inImg = inImgWrapper.data;\n        var inWidth = inImgWrapper.size.x;\n        var outImg = outImgWrapper.data;\n        var topRowIdx = 0;\n        var bottomRowIdx = inWidth;\n        var endIdx = inImg.length;\n        var outWidth = inWidth / 2;\n        var outImgIdx = 0;\n        while (bottomRowIdx < endIdx) {\n            for (var i = 0; i < outWidth; i++) {\n                outImg[outImgIdx] = Math.floor((inImg[topRowIdx] + inImg[topRowIdx + 1] + inImg[bottomRowIdx] + inImg[bottomRowIdx + 1]) / 4);\n                outImgIdx++;\n                topRowIdx = topRowIdx + 2;\n                bottomRowIdx = bottomRowIdx + 2;\n            }\n            topRowIdx = topRowIdx + inWidth;\n            bottomRowIdx = bottomRowIdx + inWidth;\n        }\n    };\n\n    CVUtils.hsv2rgb = function(hsv, rgb) {\n        var h = hsv[0], s = hsv[1], v = hsv[2], c = v * s, x = c * (1 - Math.abs((h / 60) % 2 - 1)), m = v - c, r = 0, g = 0, b = 0;\n        rgb = rgb || [0, 0, 0];\n\n        if (h < 60) {\n            r = c;\n            g = x;\n        } else if (h < 120) {\n            r = x;\n            g = c;\n        } else if (h < 180) {\n            g = c;\n            b = x;\n        } else if (h < 240) {\n            g = x;\n            b = c;\n        } else if (h < 300) {\n            r = x;\n            b = c;\n        } else if (h < 360) {\n            r = c;\n            b = x;\n        }\n        rgb[0] = ((r + m) * 255) | 0;\n        rgb[1] = ((g + m) * 255) | 0;\n        rgb[2] = ((b + m) * 255) | 0;\n        return rgb;\n    };\n\n    CVUtils._computeDivisors = function(n) {\n        var largeDivisors = [],\n            divisors = [],\n            i;\n\n        for (i = 1; i < Math.sqrt(n) + 1; i++) {\n            if (n % i === 0) {\n                divisors.push(i);\n                if (i !== n/i) {\n                    largeDivisors.unshift(Math.floor(n/i));\n                }\n            }\n        }\n        return divisors.concat(largeDivisors);\n    };\n\n    CVUtils._computeIntersection = function(arr1, arr2) {\n        var i = 0,\n            j = 0,\n            result = [];\n\n        while (i < arr1.length && j < arr2.length) {\n            if (arr1[i] === arr2[j]) {\n                result.push(arr1[i]);\n                i++;\n                j++;\n            } else if (arr1[i] > arr2[j]) {\n                j++;\n            } else {\n                i++;\n            }\n        }\n        return result;\n    };\n\n    CVUtils.calculatePatchSize = function(patchSize, imgSize) {\n        var divisorsX = this._computeDivisors(imgSize.x),\n            divisorsY = this._computeDivisors(imgSize.y),\n            wideSide = Math.max(imgSize.x, imgSize.y),\n            common = this._computeIntersection(divisorsX, divisorsY),\n            nrOfPatchesList = [8, 10, 15, 20, 32, 60, 80],\n            nrOfPatchesMap = {\n                \"x-small\": 5,\n                \"small\": 4,\n                \"medium\": 3,\n                \"large\": 2,\n                \"x-large\": 1\n            },\n            nrOfPatchesIdx = nrOfPatchesMap[patchSize] || nrOfPatchesMap.medium,\n            nrOfPatches = nrOfPatchesList[nrOfPatchesIdx],\n            desiredPatchSize = Math.floor(wideSide/nrOfPatches),\n            optimalPatchSize;\n\n        function findPatchSizeForDivisors(divisors) {\n            var i = 0,\n                found = divisors[Math.floor(divisors.length/2)];\n\n            while(i < (divisors.length - 1) && divisors[i] < desiredPatchSize) {\n                i++;\n            }\n            if (i > 0) {\n                if (Math.abs(divisors[i] - desiredPatchSize) > Math.abs(divisors[i-1] - desiredPatchSize)) {\n                    found = divisors[i-1];\n                } else {\n                    found = divisors[i];\n                }\n            }\n            if (desiredPatchSize / found < nrOfPatchesList[nrOfPatchesIdx+1] / nrOfPatchesList[nrOfPatchesIdx] &&\n                desiredPatchSize / found > nrOfPatchesList[nrOfPatchesIdx-1]/nrOfPatchesList[nrOfPatchesIdx] ) {\n                return {x: found, y: found};\n            }\n            return null;\n        }\n\n        optimalPatchSize = findPatchSizeForDivisors(common);\n        if (!optimalPatchSize) {\n            optimalPatchSize = findPatchSizeForDivisors(this._computeDivisors(wideSide));\n            if (!optimalPatchSize) {\n                optimalPatchSize = findPatchSizeForDivisors((this._computeDivisors(desiredPatchSize * nrOfPatches)));\n            }\n        }\n        return optimalPatchSize;\n    };\n\n    CVUtils._parseCSSDimensionValues = function(value) {\n        var dimension = {\n                value: parseFloat(value),\n                unit: value.indexOf(\"%\") === value.length-1 ? \"%\" : \"%\"\n            };\n\n        return dimension;\n    };\n\n    CVUtils._dimensionsConverters = {\n        top: function(dimension, context) {\n            if (dimension.unit === \"%\") {\n                return Math.floor(context.height * (dimension.value / 100));\n            }\n        },\n        right: function(dimension, context) {\n            if (dimension.unit === \"%\") {\n                return Math.floor(context.width - (context.width * (dimension.value / 100)));\n            }\n        },\n        bottom: function(dimension, context) {\n            if (dimension.unit === \"%\") {\n                return Math.floor(context.height - (context.height * (dimension.value / 100)));\n            }\n        },\n        left: function(dimension, context) {\n            if (dimension.unit === \"%\") {\n                return Math.floor(context.width * (dimension.value / 100));\n            }\n        }\n    };\n\n    CVUtils.computeImageArea = function(inputWidth, inputHeight, area) {\n        var context = {width: inputWidth, height: inputHeight};\n\n        var parsedArea = Object.keys(area).reduce(function(result, key) {\n            var value = area[key],\n                parsed = CVUtils._parseCSSDimensionValues(value),\n                calculated = CVUtils._dimensionsConverters[key](parsed, context);\n\n            result[key] = calculated;\n            return result;\n        }, {});\n\n        return {\n            sx: parsedArea.left,\n            sy: parsedArea.top,\n            sw: parsedArea.right - parsedArea.left,\n            sh: parsedArea.bottom - parsedArea.top\n        };\n    };\n\n    return (CVUtils);\n});\n\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define, vec2, mat2  */\n\ndefine('image_wrapper',[\n    \"subImage\",\n    \"cv_utils\",\n    \"array_helper\"\n    ], \n    function(SubImage, CVUtils, ArrayHelper) {\n    \n    'use strict';\n\n    /**\n     * Represents a basic image combining the data and size.\n     * In addition, some methods for manipulation are contained.\n     * @param size {x,y} The size of the image in pixel\n     * @param data {Array} If given, a flat array containing the pixel data\n     * @param ArrayType {Type} If given, the desired DataType of the Array (may be typed/non-typed)\n     * @param initialize {Boolean} Indicating if the array should be initialized on creation.\n     * @returns {ImageWrapper}\n     */\n    function ImageWrapper(size, data, ArrayType, initialize) {\n        if (!data) {\n            if (ArrayType) {\n                this.data = new ArrayType(size.x * size.y);\n                if (ArrayType === Array && initialize) {\n                    ArrayHelper.init(this.data, 0);\n                }\n            } else {\n                this.data = new Uint8Array(size.x * size.y);\n                if (Uint8Array === Array && initialize) {\n                    ArrayHelper.init(this.data, 0);\n                }\n            }\n\n        } else {\n            this.data = data;\n        }\n        this.size = size;\n    }\n\n    /**\n     * tests if a position is within the image with a given offset\n     * @param imgRef {x, y} The location to test\n     * @param border Number the padding value in pixel\n     * @returns {Boolean} true if location inside the image's border, false otherwise\n     * @see cvd/image.h\n     */\n    ImageWrapper.prototype.inImageWithBorder = function(imgRef, border) {\n        return (imgRef.x >= border) && (imgRef.y >= border) && (imgRef.x < (this.size.x - border)) && (imgRef.y < (this.size.y - border));\n    };\n\n    /**\n     * Transforms an image according to the given affine-transformation matrix.\n     * @param inImg ImageWrapper a image containing the information to be extracted.\n     * @param outImg ImageWrapper the image to be filled.  The whole image out image is filled by the in image.\n     * @param M mat2 the matrix used to map point in the out matrix to those in the in matrix\n     * @param inOrig vec2 origin in the in image\n     * @param outOrig vec2 origin in the out image\n     * @returns Number the number of pixels not in the in image\n     * @see cvd/vision.h\n     */\n    ImageWrapper.transform = function(inImg, outImg, M, inOrig, outOrig) {\n        var w = outImg.size.x, h = outImg.size.y, iw = inImg.size.x, ih = inImg.size.y;\n        var across = vec2.create([M[0], M[2]]);\n        var down = vec2.create([M[1], M[3]]);\n        var defaultValue = 0;\n\n        var p0 = vec2.subtract(inOrig, mat2.xVec2(M, outOrig, vec2.create()), vec2.create());\n\n        var min_x = p0[0], min_y = p0[1];\n        var max_x = min_x, max_y = min_y;\n        var p, i, j;\n\n        var sampleFunc = ImageWrapper.sample;\n\n        if (across[0] < 0)\n            min_x += w * across[0];\n        else\n            max_x += w * across[0];\n\n        if (down[0] < 0)\n            min_x += h * down[0];\n        else\n            max_x += h * down[0];\n\n        if (across[1] < 0)\n            min_y += w * across[1];\n        else\n            max_y += w * across[1];\n\n        if (down[1] < 0)\n            min_y += h * down[1];\n        else\n            max_y += h * down[1];\n\n        var carrigeReturn = vec2.subtract(down, vec2.scale(across, w, vec2.create()), vec2.create());\n\n        if (min_x >= 0 && min_y >= 0 && max_x < iw - 1 && max_y < ih - 1) {\n            p = p0;\n            for ( i = 0; i < h; ++i, vec2.add(p, carrigeReturn))\n                for ( j = 0; j < w; ++j, vec2.add(p, across))\n                    outImg.set(j, i, sampleFunc(inImg, p[0], p[1]));\n            return 0;\n        } else {\n            var x_bound = iw - 1;\n            var y_bound = ih - 1;\n            var count = 0;\n            p = p0;\n            for ( i = 0; i < h; ++i, vec2.add(p, carrigeReturn)) {\n                for ( j = 0; j < w; ++j, vec2.add(p, across)) {\n                    if (0 <= p[0] && 0 <= p[1] && p[0] < x_bound && p[1] < y_bound) {\n                        outImg.set(j, i, sampleFunc(inImg, p[0], p[1]));\n                    } else {\n                        outImg.set(j, i, defaultValue); ++count;\n                    }\n                }\n            }\n            return count;\n        }\n    };\n\n    /**\n     * Performs bilinear sampling\n     * @param inImg Image to extract sample from\n     * @param x the x-coordinate\n     * @param y the y-coordinate\n     * @returns the sampled value\n     * @see cvd/vision.h\n     */\n    ImageWrapper.sample = function(inImg, x, y) {\n        var lx = Math.floor(x);\n        var ly = Math.floor(y);\n        var w = inImg.size.x;\n        var base = ly * inImg.size.x + lx;\n        var a = inImg.data[base + 0];\n        var b = inImg.data[base + 1];\n        var c = inImg.data[base + w];\n        var d = inImg.data[base + w + 1];\n        var e = a - b;\n        x -= lx;\n        y -= ly;\n\n        var result = Math.floor(x * (y * (e - c + d) - e) + y * (c - a) + a);\n        return result;\n    };\n\n    /**\n     * Initializes a given array. Sets each element to zero.\n     * @param array {Array} The array to initialize\n     */\n    ImageWrapper.clearArray = function(array) {\n        var l = array.length;\n        while (l--) {\n            array[l] = 0;\n        }\n    };\n\n    /**\n     * Creates a {SubImage} from the current image ({this}).\n     * @param from {ImageRef} The position where to start the {SubImage} from. (top-left corner)\n     * @param size {ImageRef} The size of the resulting image\n     * @returns {SubImage} A shared part of the original image\n     */\n    ImageWrapper.prototype.subImage = function(from, size) {\n        return new SubImage(from, size, this);\n    };\n\n    /**\n     * Creates an {ImageWrapper) and copies the needed underlying image-data area\n     * @param imageWrapper {ImageWrapper} The target {ImageWrapper} where the data should be copied\n     * @param from {ImageRef} The location where to copy from (top-left location)\n     */\n    ImageWrapper.prototype.subImageAsCopy = function(imageWrapper, from) {\n        var sizeY = imageWrapper.size.y, sizeX = imageWrapper.size.x;\n        var x, y;\n        for ( x = 0; x < sizeX; x++) {\n            for ( y = 0; y < sizeY; y++) {\n                imageWrapper.data[y * sizeX + x] = this.data[(from.y + y) * this.size.x + from.x + x];\n            }\n        }\n    };\n\n    ImageWrapper.prototype.copyTo = function(imageWrapper) {\n        var length = this.data.length, srcData = this.data, dstData = imageWrapper.data;\n\n        while (length--) {\n            dstData[length] = srcData[length];\n        }\n    };\n\n    /**\n     * Retrieves a given pixel position from the image\n     * @param x {Number} The x-position\n     * @param y {Number} The y-position\n     * @returns {Number} The grayscale value at the pixel-position\n     */\n    ImageWrapper.prototype.get = function(x, y) {\n        return this.data[y * this.size.x + x];\n    };\n\n    /**\n     * Retrieves a given pixel position from the image\n     * @param x {Number} The x-position\n     * @param y {Number} The y-position\n     * @returns {Number} The grayscale value at the pixel-position\n     */\n    ImageWrapper.prototype.getSafe = function(x, y) {\n        var i;\n        \n        if (!this.indexMapping) {\n            this.indexMapping = {\n                x : [],\n                y : []\n            };\n            for (i = 0; i < this.size.x; i++) {\n                this.indexMapping.x[i] = i;\n                this.indexMapping.x[i + this.size.x] = i;\n            }\n            for (i = 0; i < this.size.y; i++) {\n                this.indexMapping.y[i] = i;\n                this.indexMapping.y[i + this.size.y] = i;\n            }\n        }\n        return this.data[(this.indexMapping.y[y + this.size.y]) * this.size.x + this.indexMapping.x[x + this.size.x]];\n    };\n\n    /**\n     * Sets a given pixel position in the image\n     * @param x {Number} The x-position\n     * @param y {Number} The y-position\n     * @param value {Number} The grayscale value to set\n     * @returns {ImageWrapper} The Image itself (for possible chaining)\n     */\n    ImageWrapper.prototype.set = function(x, y, value) {\n        this.data[y * this.size.x + x] = value;\n        return this;\n    };\n\n    /**\n     * Sets the border of the image (1 pixel) to zero\n     */\n    ImageWrapper.prototype.zeroBorder = function() {\n        var i, width = this.size.x, height = this.size.y, data = this.data;\n        for ( i = 0; i < width; i++) {\n            data[i] = data[(height - 1) * width + i] = 0;\n        }\n        for ( i = 1; i < height - 1; i++) {\n            data[i * width] = data[i * width + (width - 1)] = 0;\n        }\n    };\n\n    /**\n     * Inverts a binary image in place\n     */\n    ImageWrapper.prototype.invert = function() {\n        var data = this.data, length = data.length;\n\n        while (length--) {\n            data[length] = data[length] ? 0 : 1;\n        }\n\n    };\n\n    ImageWrapper.prototype.convolve = function(kernel) {\n        var x, y, kx, ky, kSize = (kernel.length / 2) | 0, accu = 0;\n        for ( y = 0; y < this.size.y; y++) {\n            for ( x = 0; x < this.size.x; x++) {\n                accu = 0;\n                for ( ky = -kSize; ky <= kSize; ky++) {\n                    for ( kx = -kSize; kx <= kSize; kx++) {\n                        accu += kernel[ky+kSize][kx + kSize] * this.getSafe(x + kx, y + ky);\n                    }\n                }\n                this.data[y * this.size.x + x] = accu;\n            }\n        }\n    };\n\n    ImageWrapper.prototype.moments = function(labelcount) {\n        var data = this.data,\n            x,\n            y,\n            height = this.size.y,\n            width = this.size.x,\n            val,\n            ysq,\n            labelsum = [],\n            i,\n            label,\n            mu11,\n            mu02,\n            mu20,\n            x_,\n            y_,\n            tmp,\n            result = [],\n            PI = Math.PI,\n            PI_4 = PI / 4;\n\n        if (labelcount <= 0) {\n            return result;\n        }\n\n        for ( i = 0; i < labelcount; i++) {\n            labelsum[i] = {\n                m00 : 0,\n                m01 : 0,\n                m10 : 0,\n                m11 : 0,\n                m02 : 0,\n                m20 : 0,\n                theta : 0,\n                rad : 0\n            };\n        }\n\n        for ( y = 0; y < height; y++) {\n            ysq = y * y;\n            for ( x = 0; x < width; x++) {\n                val = data[y * width + x];\n                if (val > 0) {\n                    label = labelsum[val - 1];\n                    label.m00 += 1;\n                    label.m01 += y;\n                    label.m10 += x;\n                    label.m11 += x * y;\n                    label.m02 += ysq;\n                    label.m20 += x * x;\n                }\n            }\n        }\n\n        for ( i = 0; i < labelcount; i++) {\n            label = labelsum[i];\n            if (!isNaN(label.m00) && label.m00 !== 0) {\n                x_ = label.m10 / label.m00;\n                y_ = label.m01 / label.m00;\n                mu11 = label.m11 / label.m00 - x_ * y_;\n                mu02 = label.m02 / label.m00 - y_ * y_;\n                mu20 = label.m20 / label.m00 - x_ * x_;\n                tmp = (mu02 - mu20) / (2 * mu11);\n                tmp = 0.5 * Math.atan(tmp) + (mu11 >= 0 ? PI_4 : -PI_4 ) + PI;\n                label.theta = (tmp * 180 / PI + 90) % 180 - 90;\n                if (label.theta < 0) {\n                    label.theta += 180;\n                }\n                label.rad = tmp > PI ? tmp - PI : tmp;\n                label.vec = vec2.create([Math.cos(tmp), Math.sin(tmp)]);\n                result.push(label);\n            }\n        }\n\n        return result;\n    };\n\n    /**\n     * Displays the {ImageWrapper} in a given canvas\n     * @param canvas {Canvas} The canvas element to write to\n     * @param scale {Number} Scale which is applied to each pixel-value\n     */\n    ImageWrapper.prototype.show = function(canvas, scale) {\n        var ctx,\n            frame,\n            data,\n            current,\n            pixel,\n            x,\n            y;\n        \n        if (!scale) {\n            scale = 1.0;\n        }\n        ctx = canvas.getContext('2d');\n        canvas.width = this.size.x;\n        canvas.height = this.size.y;\n        frame = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        data = frame.data;\n        current = 0;\n        for (y = 0; y < this.size.y; y++) {\n            for (x = 0; x < this.size.x; x++) {\n                pixel = y * this.size.x + x;\n                current = this.get(x, y) * scale;\n                data[pixel * 4 + 0] = current;\n                data[pixel * 4 + 1] = current;\n                data[pixel * 4 + 2] = current;\n                data[pixel * 4 + 3] = 255;\n            }\n        }\n        //frame.data = data;\n        ctx.putImageData(frame, 0, 0);\n    };\n\n    /**\n     * Displays the {SubImage} in a given canvas\n     * @param canvas {Canvas} The canvas element to write to\n     * @param scale {Number} Scale which is applied to each pixel-value\n     */\n    ImageWrapper.prototype.overlay = function(canvas, scale, from) {\n        if (!scale || scale < 0 || scale > 360) {\n            scale = 360;\n        }\n        var hsv = [0, 1, 1];\n        var rgb = [0, 0, 0];\n        var whiteRgb = [255, 255, 255];\n        var blackRgb = [0, 0, 0];\n        var result = [];\n        var ctx = canvas.getContext('2d');\n        var frame = ctx.getImageData(from.x, from.y, this.size.x, this.size.y);\n        var data = frame.data;\n        var length = this.data.length;\n        while (length--) {\n            hsv[0] = this.data[length] * scale;\n            result = hsv[0] <= 0 ? whiteRgb : hsv[0] >= 360 ? blackRgb : CVUtils.hsv2rgb(hsv, rgb);\n            data[length * 4 + 0] = result[0];\n            data[length * 4 + 1] = result[1];\n            data[length * 4 + 2] = result[2];\n            data[length * 4 + 3] = 255;\n        }\n        ctx.putImageData(frame, from.x, from.y);\n    };\n\n    return (ImageWrapper);\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\n/**\n * http://www.codeproject.com/Tips/407172/Connected-Component-Labeling-and-Vectorization\n */\ndefine('tracer',[],function() {\n    \"use strict\";\n    \n    var Tracer = {\n        searchDirections : [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1], [-1, 0], [-1, 1]],\n        create : function(imageWrapper, labelWrapper) {\n            var imageData = imageWrapper.data,\n                labelData = labelWrapper.data,\n                searchDirections = this.searchDirections,\n                width = imageWrapper.size.x,\n                pos;\n\n            function trace(current, color, label, edgelabel) {\n                var i,\n                    y,\n                    x;\n\n                for ( i = 0; i < 7; i++) {\n                    y = current.cy + searchDirections[current.dir][0];\n                    x = current.cx + searchDirections[current.dir][1];\n                    pos = y * width + x;\n                    if ((imageData[pos] === color) && ((labelData[pos] === 0) || (labelData[pos] === label))) {\n                        labelData[pos] = label;\n                        current.cy = y;\n                        current.cx = x;\n                        return true;\n                    } else {\n                        if (labelData[pos] === 0) {\n                            labelData[pos] = edgelabel;\n                        }\n                        current.dir = (current.dir + 1) % 8;\n                    }\n                }\n                return false;\n            }\n\n            function vertex2D(x, y, dir) {\n                return {\n                    dir : dir,\n                    x : x,\n                    y : y,\n                    next : null,\n                    prev : null\n                };\n            }\n\n            function contourTracing(sy, sx, label, color, edgelabel) {\n                var Fv = null,\n                    Cv,\n                    P,\n                    ldir,\n                    current = {\n                        cx : sx,\n                        cy : sy,\n                        dir : 0\n                    };\n\n                if (trace(current, color, label, edgelabel)) {\n                    Fv = vertex2D(sx, sy, current.dir);\n                    Cv = Fv;\n                    ldir = current.dir;\n                    P = vertex2D(current.cx, current.cy, 0);\n                    P.prev = Cv;\n                    Cv.next = P;\n                    P.next = null;\n                    Cv = P;\n                    do {\n                        current.dir = (current.dir + 6) % 8;\n                        trace(current, color, label, edgelabel);\n                        if (ldir != current.dir) {\n                            Cv.dir = current.dir;\n                            P = vertex2D(current.cx, current.cy, 0);\n                            P.prev = Cv;\n                            Cv.next = P;\n                            P.next = null;\n                            Cv = P;\n                        } else {\n                            Cv.dir = ldir;\n                            Cv.x = current.cx;\n                            Cv.y = current.cy;\n                        }\n                        ldir = current.dir;\n                    } while(current.cx != sx || current.cy != sy);\n                    Fv.prev = Cv.prev;\n                    Cv.prev.next = Fv;\n                }\n                return Fv;\n            }\n\n            return {\n                trace : function(current, color, label, edgelabel) {\n                    return trace(current, color, label, edgelabel);\n                },\n                contourTracing : function(sy, sx, label, color, edgelabel) {\n                    return contourTracing(sy, sx, label, color, edgelabel);\n                }\n            };\n        }\n    };\n\n    return (Tracer);\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\n/**\n * http://www.codeproject.com/Tips/407172/Connected-Component-Labeling-and-Vectorization\n */\ndefine('rasterizer',[\"tracer\"], function(Tracer) {\n    \"use strict\";\n\n    var Rasterizer = {\n        createContour2D : function() {\n            return {\n                dir : null,\n                index : null,\n                firstVertex : null,\n                insideContours : null,\n                nextpeer : null,\n                prevpeer : null\n            };\n        },\n        CONTOUR_DIR : {\n            CW_DIR : 0,\n            CCW_DIR : 1,\n            UNKNOWN_DIR : 2\n        },\n        DIR : {\n            OUTSIDE_EDGE : -32767,\n            INSIDE_EDGE : -32766\n        },\n        create : function(imageWrapper, labelWrapper) {\n            var imageData = imageWrapper.data,\n                labelData = labelWrapper.data,\n                width = imageWrapper.size.x,\n                height = imageWrapper.size.y,\n                tracer = Tracer.create(imageWrapper, labelWrapper);\n\n            return {\n                rasterize : function(depthlabel) {\n                    var color,\n                        bc,\n                        lc,\n                        labelindex,\n                        cx,\n                        cy,\n                        colorMap = [],\n                        vertex,\n                        p,\n                        cc,\n                        sc,\n                        pos,\n                        connectedCount = 0,\n                        i;\n\n                    for ( i = 0; i < 400; i++) {\n                        colorMap[i] = 0;\n                    }\n\n                    colorMap[0] = imageData[0];\n                    cc = null;\n                    for ( cy = 1; cy < height - 1; cy++) {\n                        labelindex = 0;\n                        bc = colorMap[0];\n                        for ( cx = 1; cx < width - 1; cx++) {\n                            pos = cy * width + cx;\n                            if (labelData[pos] === 0) {\n                                color = imageData[pos];\n                                if (color !== bc) {\n                                    if (labelindex === 0) {\n                                        lc = connectedCount + 1;\n                                        colorMap[lc] = color;\n                                        bc = color;\n                                        vertex = tracer.contourTracing(cy, cx, lc, color, Rasterizer.DIR.OUTSIDE_EDGE);\n                                        if (vertex !== null) {\n                                            connectedCount++;\n                                            labelindex = lc;\n                                            p = Rasterizer.createContour2D();\n                                            p.dir = Rasterizer.CONTOUR_DIR.CW_DIR;\n                                            p.index = labelindex;\n                                            p.firstVertex = vertex;\n                                            p.nextpeer = cc;\n                                            p.insideContours = null;\n                                            if (cc !== null) {\n                                                cc.prevpeer = p;\n                                            }\n                                            cc = p;\n                                        }\n                                    } else {\n                                        vertex = tracer.contourTracing(cy, cx, Rasterizer.DIR.INSIDE_EDGE, color, labelindex);\n                                        if (vertex !== null) {\n                                            p = Rasterizer.createContour2D();\n                                            p.firstVertex = vertex;\n                                            p.insideContours = null;\n                                            if (depthlabel === 0) {\n                                                p.dir = Rasterizer.CONTOUR_DIR.CCW_DIR;\n                                            } else {\n                                                p.dir = Rasterizer.CONTOUR_DIR.CW_DIR;\n                                            }\n                                            p.index = depthlabel;\n                                            sc = cc;\n                                            while ((sc !== null) && sc.index !== labelindex) {\n                                                sc = sc.nextpeer;\n                                            }\n                                            if (sc !== null) {\n                                                p.nextpeer = sc.insideContours;\n                                                if (sc.insideContours !== null) {\n                                                    sc.insideContours.prevpeer = p;\n                                                }\n                                                sc.insideContours = p;\n                                            }\n                                        }\n                                    }\n                                } else {\n                                    labelData[pos] = labelindex;\n                                }\n                            } else if (labelData[pos] === Rasterizer.DIR.OUTSIDE_EDGE || labelData[pos] === Rasterizer.DIR.INSIDE_EDGE) {\n                                labelindex = 0;\n                                if (labelData[pos] === Rasterizer.DIR.INSIDE_EDGE) {\n                                    bc = imageData[pos];\n                                } else {\n                                    bc = colorMap[0];\n                                }\n                            } else {\n                                labelindex = labelData[pos];\n                                bc = colorMap[labelindex];\n                            }\n                        }\n                    }\n                    sc = cc;\n                    while (sc !== null) {\n                        sc.index = depthlabel;\n                        sc = sc.nextpeer;\n                    }\n                    return {\n                        cc : cc,\n                        count : connectedCount\n                    };\n                },\n                debug: {\n                    drawContour : function(canvas, firstContour) {\n                        var ctx = canvas.getContext(\"2d\"),\n                            pq = firstContour,\n                            iq,\n                            q,\n                            p;\n                            \n                        ctx.strokeStyle = \"red\";\n                        ctx.fillStyle = \"red\";\n                        ctx.lineWidth = 1;\n    \n                        if (pq !== null) {\n                            iq = pq.insideContours;\n                        } else {\n                            iq = null;\n                        }\n    \n                        while (pq !== null) {\n                            if (iq !== null) {\n                                q = iq;\n                                iq = iq.nextpeer;\n                            } else {\n                                q = pq;\n                                pq = pq.nextpeer;\n                                if (pq !== null) {\n                                    iq = pq.insideContours;\n                                } else {\n                                    iq = null;\n                                }\n                            }\n    \n                            switch(q.dir) {\n                            case Rasterizer.CONTOUR_DIR.CW_DIR:\n                                ctx.strokeStyle = \"red\";\n                                break;\n                            case Rasterizer.CONTOUR_DIR.CCW_DIR:\n                                ctx.strokeStyle = \"blue\";\n                                break;\n                            case Rasterizer.CONTOUR_DIR.UNKNOWN_DIR:\n                                ctx.strokeStyle = \"green\";\n                                break;\n                            }\n    \n                            p = q.firstVertex;\n                            ctx.beginPath();\n                            ctx.moveTo(p.x, p.y);\n                            do {\n                                p = p.next;\n                                ctx.lineTo(p.x, p.y);\n                            } while(p !== q.firstVertex);\n                            ctx.stroke();\n                        }\n                    }\n                }\n            };\n        }\n    };\n\n    return (Rasterizer);\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true, -W041: false */\n/* global define */\n\ndefine('skeletonizer',[],function() {\n    \"use strict\";\n\n    /* @preserve ASM BEGIN */\n    function Skeletonizer(stdlib, foreign, buffer) {\n        \"use asm\";\n\n        var images = new stdlib.Uint8Array(buffer),\n            size = foreign.size | 0,\n            imul = stdlib.Math.imul;\n\n        function erode(inImagePtr, outImagePtr) {\n            inImagePtr = inImagePtr | 0;\n            outImagePtr = outImagePtr | 0;\n\n            var v = 0,\n                u = 0,\n                sum = 0,\n                yStart1 = 0,\n                yStart2 = 0,\n                xStart1 = 0,\n                xStart2 = 0,\n                offset = 0;\n\n            for ( v = 1; (v | 0) < ((size - 1) | 0); v = (v + 1) | 0) {\n                offset = (offset + size) | 0;\n                for ( u = 1; (u | 0) < ((size - 1) | 0); u = (u + 1) | 0) {\n                    yStart1 = (offset - size) | 0;\n                    yStart2 = (offset + size) | 0;\n                    xStart1 = (u - 1) | 0;\n                    xStart2 = (u + 1) | 0;\n                    sum = ((images[(inImagePtr + yStart1 + xStart1) | 0] | 0) + (images[(inImagePtr + yStart1 + xStart2) | 0] | 0) + (images[(inImagePtr + offset + u) | 0] | 0) + (images[(inImagePtr + yStart2 + xStart1) | 0] | 0) + (images[(inImagePtr + yStart2 + xStart2) | 0] | 0)) | 0;\n                    if ((sum | 0) == (5 | 0)) {\n                        images[(outImagePtr + offset + u) | 0] = 1;\n                    } else {\n                        images[(outImagePtr + offset + u) | 0] = 0;\n                    }\n                }\n            }\n            return;\n        }\n\n        function subtract(aImagePtr, bImagePtr, outImagePtr) {\n            aImagePtr = aImagePtr | 0;\n            bImagePtr = bImagePtr | 0;\n            outImagePtr = outImagePtr | 0;\n\n            var length = 0;\n\n            length = imul(size, size) | 0;\n\n            while ((length | 0) > 0) {\n                length = (length - 1) | 0;\n                images[(outImagePtr + length) | 0] = ((images[(aImagePtr + length) | 0] | 0) - (images[(bImagePtr + length) | 0] | 0)) | 0;\n            }\n        }\n\n        function bitwiseOr(aImagePtr, bImagePtr, outImagePtr) {\n            aImagePtr = aImagePtr | 0;\n            bImagePtr = bImagePtr | 0;\n            outImagePtr = outImagePtr | 0;\n\n            var length = 0;\n\n            length = imul(size, size) | 0;\n\n            while ((length | 0) > 0) {\n                length = (length - 1) | 0;\n                images[(outImagePtr + length) | 0] = ((images[(aImagePtr + length) | 0] | 0) | (images[(bImagePtr + length) | 0] | 0)) | 0;\n            }\n        }\n\n        function countNonZero(imagePtr) {\n            imagePtr = imagePtr | 0;\n\n            var sum = 0,\n                length = 0;\n\n            length = imul(size, size) | 0;\n\n            while ((length | 0) > 0) {\n                length = (length - 1) | 0;\n                sum = ((sum | 0) + (images[(imagePtr + length) | 0] | 0)) | 0;\n            }\n\n            return (sum | 0);\n        }\n\n        function init(imagePtr, value) {\n            imagePtr = imagePtr | 0;\n            value = value | 0;\n\n            var length = 0;\n\n            length = imul(size, size) | 0;\n\n            while ((length | 0) > 0) {\n                length = (length - 1) | 0;\n                images[(imagePtr + length) | 0] = value;\n            }\n        }\n\n        function dilate(inImagePtr, outImagePtr) {\n            inImagePtr = inImagePtr | 0;\n            outImagePtr = outImagePtr | 0;\n\n            var v = 0,\n                u = 0,\n                sum = 0,\n                yStart1 = 0,\n                yStart2 = 0,\n                xStart1 = 0,\n                xStart2 = 0,\n                offset = 0;\n\n            for ( v = 1; (v | 0) < ((size - 1) | 0); v = (v + 1) | 0) {\n                offset = (offset + size) | 0;\n                for ( u = 1; (u | 0) < ((size - 1) | 0); u = (u + 1) | 0) {\n                    yStart1 = (offset - size) | 0;\n                    yStart2 = (offset + size) | 0;\n                    xStart1 = (u - 1) | 0;\n                    xStart2 = (u + 1) | 0;\n                    sum = ((images[(inImagePtr + yStart1 + xStart1) | 0] | 0) + (images[(inImagePtr + yStart1 + xStart2) | 0] | 0) + (images[(inImagePtr + offset + u) | 0] | 0) + (images[(inImagePtr + yStart2 + xStart1) | 0] | 0) + (images[(inImagePtr + yStart2 + xStart2) | 0] | 0)) | 0;\n                    if ((sum | 0) > (0 | 0)) {\n                        images[(outImagePtr + offset + u) | 0] = 1;\n                    } else {\n                        images[(outImagePtr + offset + u) | 0] = 0;\n                    }\n                }\n            }\n            return;\n        }\n\n        function memcpy(srcImagePtr, dstImagePtr) {\n            srcImagePtr = srcImagePtr | 0;\n            dstImagePtr = dstImagePtr | 0;\n\n            var length = 0;\n\n            length = imul(size, size) | 0;\n\n            while ((length | 0) > 0) {\n                length = (length - 1) | 0;\n                images[(dstImagePtr + length) | 0] = (images[(srcImagePtr + length) | 0] | 0);\n            }\n        }\n\n        function zeroBorder(imagePtr) {\n            imagePtr = imagePtr | 0;\n\n            var x = 0,\n                y = 0;\n\n            for ( x = 0; (x | 0) < ((size - 1) | 0); x = (x + 1) | 0) {\n                images[(imagePtr + x) | 0] = 0;\n                images[(imagePtr + y) | 0] = 0;\n                y = ((y + size) - 1) | 0;\n                images[(imagePtr + y) | 0] = 0;\n                y = (y + 1) | 0;\n            }\n            for ( x = 0; (x | 0) < (size | 0); x = (x + 1) | 0) {\n                images[(imagePtr + y) | 0] = 0;\n                y = (y + 1) | 0;\n            }\n        }\n\n        function skeletonize() {\n            var subImagePtr = 0,\n                erodedImagePtr = 0,\n                tempImagePtr = 0,\n                skelImagePtr = 0,\n                sum = 0,\n                done = 0;\n                \n            erodedImagePtr = imul(size, size) | 0;\n            tempImagePtr = (erodedImagePtr + erodedImagePtr) | 0;\n            skelImagePtr = (tempImagePtr + erodedImagePtr) | 0;\n\n            // init skel-image\n            init(skelImagePtr, 0);\n            zeroBorder(subImagePtr);\n\n            do {\n                erode(subImagePtr, erodedImagePtr);\n                dilate(erodedImagePtr, tempImagePtr);\n                subtract(subImagePtr, tempImagePtr, tempImagePtr);\n                bitwiseOr(skelImagePtr, tempImagePtr, skelImagePtr);\n                memcpy(erodedImagePtr, subImagePtr);\n                sum = countNonZero(subImagePtr) | 0;\n                done = ((sum | 0) == 0 | 0);\n            } while(!done);\n        }\n\n        return {\n            skeletonize : skeletonize\n        };\n    }\n    /* @preserve ASM END */\n\n    return Skeletonizer;\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('image_debug',[],function() {\n    \"use strict\";\n    \n    return {\n        drawRect: function(pos, size, ctx, style){\n            ctx.strokeStyle = style.color;\n            ctx.fillStyle = style.color;\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            ctx.strokeRect(pos.x, pos.y, size.x, size.y);\n        },\n        drawPath: function(path, def, ctx, style) {\n            ctx.strokeStyle = style.color;\n            ctx.fillStyle = style.color;\n            ctx.lineWidth = style.lineWidth;\n            ctx.beginPath();\n            ctx.moveTo(path[0][def.x], path[0][def.y]);\n            for (var j = 1; j < path.length; j++) {\n                ctx.lineTo(path[j][def.x], path[j][def.y]);\n            }\n            ctx.closePath();\n            ctx.stroke();\n        },\n        drawImage: function(imageData, size, ctx) {\n            var canvasData = ctx.getImageData(0, 0, size.x, size.y),\n                data = canvasData.data,\n                imageDataPos = imageData.length,\n                canvasDataPos = data.length,\n                value;\n\n            if (canvasDataPos/imageDataPos !== 4) {\n                return false;\n            }\n            while(imageDataPos--){\n                value = imageData[imageDataPos];\n                data[--canvasDataPos] = 255;\n                data[--canvasDataPos] = value;\n                data[--canvasDataPos] = value;\n                data[--canvasDataPos] = value;\n            }\n            ctx.putImageData(canvasData, 0, 0);\n            return true;\n        }\n    };\n    \n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define, mat2, vec2 */\n\ndefine(\"barcode_locator\", [\"image_wrapper\", \"cv_utils\", \"rasterizer\", \"tracer\", \"skeletonizer\", \"array_helper\", \"image_debug\"],\nfunction(ImageWrapper, CVUtils, Rasterizer, Tracer, skeletonizer, ArrayHelper, ImageDebug) {\n\n    var _config,\n        _currentImageWrapper,\n        _skelImageWrapper,\n        _subImageWrapper,\n        _labelImageWrapper,\n        _patchGrid,\n        _patchLabelGrid,\n        _imageToPatchGrid,\n        _binaryImageWrapper,\n        _patchSize,\n        _canvasContainer = {\n            ctx : {\n                binary : null\n            },\n            dom : {\n                binary : null\n            }\n        },\n        _numPatches = {x: 0, y: 0},\n        _inputImageWrapper,\n        _skeletonizer,\n        self = this;\n\n    function initBuffers() {\n        var skeletonImageData;\n        \n        if (_config.halfSample) {\n            _currentImageWrapper = new ImageWrapper({\n                x : _inputImageWrapper.size.x / 2 | 0,\n                y : _inputImageWrapper.size.y / 2 | 0\n            });\n        } else {\n            _currentImageWrapper = _inputImageWrapper;\n        }\n\n        _patchSize = CVUtils.calculatePatchSize(_config.patchSize, _currentImageWrapper.size);\n\n        _numPatches.x = _currentImageWrapper.size.x / _patchSize.x | 0;\n        _numPatches.y = _currentImageWrapper.size.y / _patchSize.y | 0;\n\n        _binaryImageWrapper = new ImageWrapper(_currentImageWrapper.size, undefined, Uint8Array, false);\n\n        _labelImageWrapper = new ImageWrapper(_patchSize, undefined, Array, true);\n\n        skeletonImageData = new ArrayBuffer(64*1024);\n        _subImageWrapper = new ImageWrapper(_patchSize, new Uint8Array(skeletonImageData, 0, _patchSize.x * _patchSize.y));\n        _skelImageWrapper = new ImageWrapper(_patchSize, new Uint8Array(skeletonImageData, _patchSize.x * _patchSize.y * 3, _patchSize.x * _patchSize.y), undefined, true);\n        _skeletonizer = skeletonizer(self, {\n            size : _patchSize.x\n        }, skeletonImageData);\n\n        _imageToPatchGrid = new ImageWrapper({\n            x : (_currentImageWrapper.size.x / _subImageWrapper.size.x) | 0,\n            y : (_currentImageWrapper.size.y / _subImageWrapper.size.y) | 0\n        }, undefined, Array, true);\n        _patchGrid = new ImageWrapper(_imageToPatchGrid.size, undefined, undefined, true);\n        _patchLabelGrid = new ImageWrapper(_imageToPatchGrid.size, undefined, Int32Array, true);\n    }\n\n    function initCanvas() {\n        if (_config.useWorker || typeof document === 'undefined') {\n            return;\n        }\n        _canvasContainer.dom.binary = document.createElement(\"canvas\");\n        _canvasContainer.dom.binary.className = \"binaryBuffer\";\n        if (_config.showCanvas === true) {\n            document.querySelector(\"#debug\").appendChild(_canvasContainer.dom.binary);\n        }\n        _canvasContainer.ctx.binary = _canvasContainer.dom.binary.getContext(\"2d\");\n        _canvasContainer.dom.binary.width = _binaryImageWrapper.size.x;\n        _canvasContainer.dom.binary.height = _binaryImageWrapper.size.y;\n    }\n\n    /**\n     * Creates a bounding box which encloses all the given patches\n     * @returns {Array} The minimal bounding box \n     */\n    function boxFromPatches(patches) {\n        var overAvg, i, j, patch, transMat, minx = _binaryImageWrapper.size.x, miny = _binaryImageWrapper.size.y, maxx = -_binaryImageWrapper.size.x, maxy = -_binaryImageWrapper.size.y, box, scale;\n\n        // draw all patches which are to be taken into consideration\n        overAvg = 0;\n        for ( i = 0; i < patches.length; i++) {\n            patch = patches[i];\n            overAvg += patch.rad;\n            if (_config.showPatches) {\n                ImageDebug.drawRect(patch.pos, _subImageWrapper.size, _canvasContainer.ctx.binary, {color: \"red\"});\n            }\n        }\n\n        overAvg /= patches.length;\n        overAvg = (overAvg * 180 / Math.PI + 90) % 180 - 90;\n        if (overAvg < 0) {\n            overAvg += 180;\n        }\n\n        //console.log(overAvg);\n        overAvg = (180 - overAvg) * Math.PI / 180;\n        transMat = mat2.create([Math.cos(overAvg), -Math.sin(overAvg), Math.sin(overAvg), Math.cos(overAvg)]);\n\n        // iterate over patches and rotate by angle\n        for ( i = 0; i < patches.length; i++) {\n            patch = patches[i];\n            for ( j = 0; j < 4; j++) {\n                mat2.xVec2(transMat, patch.box[j]);\n            }\n\n            if (_config.boxFromPatches.showTransformed) {\n                ImageDebug.drawPath(patch.box, {x: 0, y: 1}, _canvasContainer.ctx.binary, {color: '#99ff00', lineWidth: 2});\n            }\n        }\n\n        // find bounding box\n        for ( i = 0; i < patches.length; i++) {\n            patch = patches[i];\n            for ( j = 0; j < 4; j++) {\n                if (patch.box[j][0] < minx) {\n                    minx = patch.box[j][0];\n                }\n                if (patch.box[j][0] > maxx) {\n                    maxx = patch.box[j][0];\n                }\n                if (patch.box[j][1] < miny) {\n                    miny = patch.box[j][1];\n                }\n                if (patch.box[j][1] > maxy) {\n                    maxy = patch.box[j][1];\n                }\n            }\n        }\n\n        box = [[minx, miny], [maxx, miny], [maxx, maxy], [minx, maxy]];\n\n        if (_config.boxFromPatches.showTransformedBox) {\n            ImageDebug.drawPath(box, {x: 0, y: 1}, _canvasContainer.ctx.binary, {color: '#ff0000', lineWidth: 2});\n        }\n\n        scale = _config.halfSample ? 2 : 1;\n        // reverse rotation;\n        transMat = mat2.inverse(transMat);\n        for ( j = 0; j < 4; j++) {\n            mat2.xVec2(transMat, box[j]);\n        }\n\n        if (_config.boxFromPatches.showBB) {\n            ImageDebug.drawPath(box, {x: 0, y: 1}, _canvasContainer.ctx.binary, {color: '#ff0000', lineWidth: 2});\n        }\n        \n        for ( j = 0; j < 4; j++) {\n            vec2.scale(box[j], scale);\n        }\n\n        return box;\n    }\n\n    /**\n     * Creates a binary image of the current image\n     */\n    function binarizeImage() {\n        CVUtils.otsuThreshold(_currentImageWrapper, _binaryImageWrapper);\n        _binaryImageWrapper.zeroBorder();\n        if (_config.showCanvas) {\n            _binaryImageWrapper.show(_canvasContainer.dom.binary, 255);\n        }\n    }\n    \n    /**\n     * Iterate over the entire image\n     * extract patches\n     */\n    function findPatches() {\n        var i,\n            j,\n            x,\n            y,\n            moments,\n            patchesFound = [],\n            rasterizer,\n            rasterResult,\n            patch;\n        for ( i = 0; i < _numPatches.x; i++) {\n            for ( j = 0; j < _numPatches.y; j++) {\n\n                x = _subImageWrapper.size.x * i;\n                y = _subImageWrapper.size.y * j;\n\n                // seperate parts\n                skeletonize(x, y);\n\n                // Rasterize, find individual bars\n                _skelImageWrapper.zeroBorder();\n                ArrayHelper.init(_labelImageWrapper.data, 0);\n                rasterizer = Rasterizer.create(_skelImageWrapper, _labelImageWrapper);\n                rasterResult = rasterizer.rasterize(0);\n\n                if (_config.showLabels) {\n                    _labelImageWrapper.overlay(_canvasContainer.dom.binary, Math.floor(360 / rasterResult.count), {x : x, y : y});\n                }\n\n                // calculate moments from the skeletonized patch\n                moments = _labelImageWrapper.moments(rasterResult.count);\n\n                // extract eligible patches\n                patchesFound = patchesFound.concat(describePatch(moments, [i, j], x, y));\n            }\n        }\n        \n        if (_config.showFoundPatches) {\n            for ( i = 0; i < patchesFound.length; i++) {\n                patch = patchesFound[i];\n                ImageDebug.drawRect(patch.pos, _subImageWrapper.size, _canvasContainer.ctx.binary, {color: \"#99ff00\", lineWidth: 2});\n            }\n        }\n        \n        return patchesFound;\n    }\n    \n    /**\n     * Finds those connected areas which contain at least 6 patches\n     * and returns them ordered DESC by the number of contained patches\n     * @param {Number} maxLabel \n     */\n    function findBiggestConnectedAreas(maxLabel){\n        var i,\n            sum,\n            labelHist = [],\n            topLabels = [];\n            \n        for ( i = 0; i < maxLabel; i++) {\n            labelHist.push(0);\n        }\n        sum = _patchLabelGrid.data.length;\n        while (sum--) {\n            if (_patchLabelGrid.data[sum] > 0) {\n                labelHist[_patchLabelGrid.data[sum] - 1]++;\n            }\n        }\n\n        labelHist = labelHist.map(function(val, idx) {\n            return {\n                val : val,\n                label : idx + 1\n            };\n        });\n\n        labelHist.sort(function(a, b) {\n            return b.val - a.val;\n        });\n\n        // extract top areas with at least 6 patches present\n        topLabels = labelHist.filter(function(el) {\n            return el.val >= 5;\n        });\n        \n        return topLabels;\n    }\n    \n    /**\n     * \n     */\n    function findBoxes(topLabels, maxLabel) {\n        var i,\n            j,\n            sum,\n            patches = [],\n            patch,\n            box,\n            boxes = [],\n            hsv = [0, 1, 1],\n            rgb = [0, 0, 0];\n            \n        for ( i = 0; i < topLabels.length; i++) {\n            sum = _patchLabelGrid.data.length;\n            patches.length = 0;\n            while (sum--) {\n                if (_patchLabelGrid.data[sum] === topLabels[i].label) {\n                    patch = _imageToPatchGrid.data[sum];\n                    patches.push(patch);\n                }\n            }\n            box = boxFromPatches(patches);\n            if (box) {\n                boxes.push(box);\n\n                // draw patch-labels if requested\n                if (_config.showRemainingPatchLabels) {\n                    for ( j = 0; j < patches.length; j++) {\n                        patch = patches[j];\n                        hsv[0] = (topLabels[i].label / (maxLabel + 1)) * 360;\n                        CVUtils.hsv2rgb(hsv, rgb);\n                        ImageDebug.drawRect(patch.pos, _subImageWrapper.size, _canvasContainer.ctx.binary, {color: \"rgb(\" + rgb.join(\",\") + \")\", lineWidth: 2});\n                    }\n                }\n            }\n        }\n        return boxes;\n    }\n\n    /**\n     * Find similar moments (via cluster)\n     * @param {Object} moments\n     */\n    function similarMoments(moments) {\n        var clusters = CVUtils.cluster(moments, 0.90);\n        var topCluster = CVUtils.topGeneric(clusters, 1, function(e) {\n            return e.getPoints().length;\n        });\n        var points = [], result = [];\n        if (topCluster.length === 1) {\n            points = topCluster[0].item.getPoints();\n            for (var i = 0; i < points.length; i++) {\n                result.push(points[i].point);\n            }\n        }\n        return result;\n    }\n\n    function skeletonize(x, y) {\n        _binaryImageWrapper.subImageAsCopy(_subImageWrapper, CVUtils.imageRef(x, y));\n        _skeletonizer.skeletonize();\n        \n        // Show skeleton if requested\n        if (_config.showSkeleton) {\n            _skelImageWrapper.overlay(_canvasContainer.dom.binary, 360, CVUtils.imageRef(x, y));\n        }\n    }\n\n    /**\n     * Extracts and describes those patches which seem to contain a barcode pattern\n     * @param {Array} moments\n     * @param {Object} patchPos,\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Array} list of patches\n     */\n    function describePatch(moments, patchPos, x, y) {\n        var k,\n            avg,\n            sum = 0,\n            eligibleMoments = [],\n            matchingMoments,\n            patch,\n            patchesFound = [],\n            minComponentWeight = Math.ceil(_patchSize.x/3);\n\n        if (moments.length >= 2) {\n            // only collect moments which's area covers at least minComponentWeight pixels.\n            for ( k = 0; k < moments.length; k++) {\n                if (moments[k].m00 > minComponentWeight) {\n                    eligibleMoments.push(moments[k]);\n                }\n            }\n\n            // if at least 2 moments are found which have at least minComponentWeights covered\n            if (eligibleMoments.length >= 2) {\n                sum = eligibleMoments.length;\n                matchingMoments = similarMoments(eligibleMoments);\n                avg = 0;\n                // determine the similarity of the moments\n                for ( k = 0; k < matchingMoments.length; k++) {\n                    avg += matchingMoments[k].rad;\n                }\n\n                // Only two of the moments are allowed not to fit into the equation\n                // add the patch to the set\n                if (matchingMoments.length > 1 && matchingMoments.length >= (eligibleMoments.length / 4) * 3 && matchingMoments.length > moments.length / 4) {\n                    avg /= matchingMoments.length;\n                    patch = {\n                        index : patchPos[1] * _numPatches.x + patchPos[0],\n                        pos : {\n                            x : x,\n                            y : y\n                        },\n                        box : [vec2.create([x, y]), vec2.create([x + _subImageWrapper.size.x, y]), vec2.create([x + _subImageWrapper.size.x, y + _subImageWrapper.size.y]), vec2.create([x, y + _subImageWrapper.size.y])],\n                        moments : matchingMoments,\n                        rad : avg,\n                        vec : vec2.create([Math.cos(avg), Math.sin(avg)])\n                    };\n                    patchesFound.push(patch);\n                }\n            }\n        }\n        return patchesFound;\n    }\n\n    /**\n     * finds patches which are connected and share the same orientation\n     * @param {Object} patchesFound\n     */\n    function rasterizeAngularSimilarity(patchesFound) {\n        var label = 0,\n            threshold = 0.95,\n            currIdx = 0,\n            j,\n            patch,\n            hsv = [0, 1, 1],\n            rgb = [0, 0, 0];\n\n        function notYetProcessed() {\n            var i;\n            for ( i = 0; i < _patchLabelGrid.data.length; i++) {\n                if (_patchLabelGrid.data[i] === 0 && _patchGrid.data[i] === 1) {\n                    return i;\n                }\n            }\n            return _patchLabelGrid.length;\n        }\n\n        function trace(currentIdx) {\n            var x, y, currentPatch, patch, idx, dir, current = {\n                x : currentIdx % _patchLabelGrid.size.x,\n                y : (currentIdx / _patchLabelGrid.size.x) | 0\n            }, similarity;\n\n            if (currentIdx < _patchLabelGrid.data.length) {\n                currentPatch = _imageToPatchGrid.data[currentIdx];\n                // assign label\n                _patchLabelGrid.data[currentIdx] = label;\n                for ( dir = 0; dir < Tracer.searchDirections.length; dir++) {\n                    y = current.y + Tracer.searchDirections[dir][0];\n                    x = current.x + Tracer.searchDirections[dir][1];\n                    idx = y * _patchLabelGrid.size.x + x;\n\n                    // continue if patch empty\n                    if (_patchGrid.data[idx] === 0) {\n                        _patchLabelGrid.data[idx] = Number.MAX_VALUE;\n                        continue;\n                    }\n\n                    patch = _imageToPatchGrid.data[idx];\n                    if (_patchLabelGrid.data[idx] === 0) {\n                        similarity = Math.abs(vec2.dot(patch.vec, currentPatch.vec));\n                        if (similarity > threshold) {\n                            trace(idx);\n                        }\n                    }\n                }\n            }\n        }\n        \n        // prepare for finding the right patches\n        ArrayHelper.init(_patchGrid.data, 0);\n        ArrayHelper.init(_patchLabelGrid.data, 0);\n        ArrayHelper.init(_imageToPatchGrid.data, null);\n\n        for ( j = 0; j < patchesFound.length; j++) {\n            patch = patchesFound[j];\n            _imageToPatchGrid.data[patch.index] = patch;\n            _patchGrid.data[patch.index] = 1;\n        }\n\n        // rasterize the patches found to determine area\n        _patchGrid.zeroBorder();\n\n        while (( currIdx = notYetProcessed()) < _patchLabelGrid.data.length) {\n            label++;\n            trace(currIdx);\n        }\n        \n        // draw patch-labels if requested\n        if (_config.showPatchLabels) {\n            for ( j = 0; j < _patchLabelGrid.data.length; j++) {\n                if (_patchLabelGrid.data[j] > 0 && _patchLabelGrid.data[j] <= label) {\n                    patch = _imageToPatchGrid.data[j];\n                    hsv[0] = (_patchLabelGrid.data[j] / (label + 1)) * 360;\n                    CVUtils.hsv2rgb(hsv, rgb);\n                    ImageDebug.drawRect(patch.pos, _subImageWrapper.size, _canvasContainer.ctx.binary, {color: \"rgb(\" + rgb.join(\",\") + \")\", lineWidth: 2});\n                }\n            }\n        }\n        \n        return label;\n    }\n\n    return {\n        init : function(inputImageWrapper, config) {\n            _config = config;\n            _inputImageWrapper = inputImageWrapper;\n\n            initBuffers();\n            initCanvas();\n        },\n\n        locate : function() {\n            var patchesFound,\n            topLabels,\n            boxes;\n\n            if (_config.halfSample) {\n                CVUtils.halfSample(_inputImageWrapper, _currentImageWrapper);\n            }\n\n            binarizeImage();\n            patchesFound = findPatches();\n            // return unless 5% or more patches are found\n            if (patchesFound.length < _numPatches.x * _numPatches.y * 0.05) {\n                return null;\n            }\n\n            // rasterrize area by comparing angular similarity;\n            var maxLabel = rasterizeAngularSimilarity(patchesFound);\n            if (maxLabel < 1) {\n                return null;\n            }\n\n            // search for area with the most patches (biggest connected area)\n            topLabels = findBiggestConnectedAreas(maxLabel);\n            if (topLabels.length === 0) {\n                return null;\n            }\n\n            boxes = findBoxes(topLabels, maxLabel);\n            return boxes;\n        },\n\n        checkImageConstraints: function(inputStream, config) {\n            var patchSize,\n                width = inputStream.getWidth(),\n                height = inputStream.getHeight(),\n                halfSample = config.halfSample ? 0.5 : 1,\n                size,\n                area;\n\n            // calculate width and height based on area\n            if (inputStream.getConfig().area) {\n                area = CVUtils.computeImageArea(width, height, inputStream.getConfig().area);\n                inputStream.setTopRight({x: area.sx, y: area.sy});\n                inputStream.setCanvasSize({x: width, y: height});\n                width = area.sw;\n                height = area.sh;\n            }\n\n            size = {\n                x: Math.floor(width * halfSample),\n                y: Math.floor(height * halfSample)\n            };\n\n            patchSize = CVUtils.calculatePatchSize(config.patchSize, size);\n            console.log(\"Patch-Size: \" + JSON.stringify(patchSize));\n\n            inputStream.setWidth(Math.floor(Math.floor(size.x/patchSize.x)*(1/halfSample)*patchSize.x));\n            inputStream.setHeight(Math.floor(Math.floor(size.y/patchSize.y)*(1/halfSample)*patchSize.y));\n\n            if ((inputStream.getWidth() % patchSize.x) === 0 && (inputStream.getHeight() % patchSize.y) === 0) {\n                return true;\n            }\n\n            throw new Error(\"Image dimensions do not comply with the current settings: Width (\" +\n                width + \" )and height (\" + height +\n                \") must a multiple of \" + patchSize.x);\n        }\n    };\n});\n\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('bresenham',[\"cv_utils\", \"image_wrapper\"], function(CVUtils, ImageWrapper) {\n    \"use strict\";\n    var Bresenham = {};\n\n    var Slope = {\n        DIR : {\n            UP : 1,\n            DOWN : -1\n        }\n    };\n    /**\n     * Scans a line of the given image from point p1 to p2 and returns a result object containing \n     * gray-scale values (0-255) of the underlying pixels in addition to the min\n     * and max values.\n     * @param {Object} imageWrapper\n     * @param {Object} p1 The start point {x,y}\n     * @param {Object} p2 The end point {x,y}\n     * @returns {line, min, max}\n     */\n    Bresenham.getBarcodeLine = function(imageWrapper, p1, p2) {\n        var x0 = p1.x | 0,\n            y0 = p1.y | 0,\n            x1 = p2.x | 0,\n            y1 = p2.y | 0,\n            steep = Math.abs(y1 - y0) > Math.abs(x1 - x0),\n            deltax,\n            deltay,\n            error,\n            ystep,\n            y,\n            tmp,\n            x,\n            line = [],\n            imageData = imageWrapper.data,\n            width = imageWrapper.size.x,\n            sum = 0,\n            val,\n            min = 255,\n            max = 0;\n\n        function read(a, b) {\n            val = imageData[b * width + a];\n            sum += val;\n            min = val < min ? val : min;\n            max = val > max ? val : max;\n            line.push(val);\n        }\n\n        if (steep) {\n            tmp = x0;\n            x0 = y0;\n            y0 = tmp;\n\n            tmp = x1;\n            x1 = y1;\n            y1 = tmp;\n        }\n        if (x0 > x1) {\n            tmp = x0;\n            x0 = x1;\n            x1 = tmp;\n\n            tmp = y0;\n            y0 = y1;\n            y1 = tmp;\n        }\n        deltax = x1 - x0;\n        deltay = Math.abs(y1 - y0);\n        error = (deltax / 2) | 0;\n        y = y0;\n        ystep = y0 < y1 ? 1 : -1;\n        for ( x = x0; x < x1; x++) {\n            if(steep){\n                read(y, x);\n            } else {\n                read(x, y);\n            }\n            error = error - deltay;\n            if (error < 0) {\n                y = y + ystep;\n                error = error + deltax;\n            }\n        }\n\n        return {\n            line : line,\n            min : min,\n            max : max\n        };\n    };\n\n    Bresenham.toOtsuBinaryLine = function(result) {\n        var line = result.line,\n            image = new ImageWrapper({x: line.length - 1, y: 1}, line),\n            threshold = CVUtils.determineOtsuThreshold(image, 5);\n\n        line = CVUtils.sharpenLine(line);\n        CVUtils.thresholdImage(image, threshold);\n\n        return {\n            line: line,\n            threshold: threshold\n        };\n    };\n    \n    /**\n     * Converts the result from getBarcodeLine into a binary representation \n     * also considering the frequency and slope of the signal for more robust results\n     * @param {Object} result {line, min, max}\n     */\n    Bresenham.toBinaryLine = function(result) {\n\n        var min = result.min,\n            max = result.max,\n            line = result.line,\n            slope,\n            slope2,\n            center = min + (max - min) / 2,\n            extrema = [],\n            currentDir,\n            dir,\n            threshold = (max - min) / 12,\n            rThreshold = -threshold,\n            i,\n            j;\n\n        // 1. find extrema\n        currentDir = line[0] > center ? Slope.DIR.UP : Slope.DIR.DOWN;\n        extrema.push({\n            pos : 0,\n            val : line[0]\n        });\n        for ( i = 0; i < line.length - 2; i++) {\n            slope = (line[i + 1] - line[i]);\n            slope2 = (line[i + 2] - line[i + 1]);\n            if ((slope + slope2) < rThreshold && line[i + 1] < (center*1.5)) {\n                dir = Slope.DIR.DOWN;\n            } else if ((slope + slope2) > threshold && line[i + 1] > (center*0.5)) {\n                dir = Slope.DIR.UP;\n            } else {\n                dir = currentDir;\n            }\n\n            if (currentDir !== dir) {\n                extrema.push({\n                    pos : i,\n                    val : line[i]\n                });\n                currentDir = dir;\n            }\n        }\n        extrema.push({\n            pos : line.length,\n            val : line[line.length - 1]\n        });\n\n        for ( j = extrema[0].pos; j < extrema[1].pos; j++) {\n            line[j] = line[j] > center ? 0 : 1;\n        }\n\n        // iterate over extrema and convert to binary based on avg between minmax\n        for ( i = 1; i < extrema.length - 1; i++) {\n            if (extrema[i + 1].val > extrema[i].val) {\n                threshold = (extrema[i].val + ((extrema[i + 1].val - extrema[i].val) / 3) * 2) | 0;\n            } else {\n                threshold = (extrema[i + 1].val + ((extrema[i].val - extrema[i + 1].val) / 3)) | 0;\n            }\n\n            for ( j = extrema[i].pos; j < extrema[i + 1].pos; j++) {\n                line[j] = line[j] > threshold ? 0 : 1;\n            }\n        }\n\n        return {\n            line : line,\n            threshold : threshold\n        };\n    };\n    \n    /**\n     * Used for development only \n     */\n    Bresenham.debug = {\n        printFrequency: function(line, canvas) {\n            var i,\n                ctx = canvas.getContext(\"2d\");\n            canvas.width = line.length;\n            canvas.height = 256;\n    \n            ctx.beginPath();\n            ctx.strokeStyle = \"blue\";\n            for ( i = 0; i < line.length; i++) {\n                ctx.moveTo(i, 255);\n                ctx.lineTo(i, 255 - line[i]);\n            }\n            ctx.stroke();\n            ctx.closePath();\n        },\n        \n        printPattern: function(line, canvas) {\n            var ctx = canvas.getContext(\"2d\"), i;\n    \n            canvas.width = line.length;\n            ctx.fillColor = \"black\";\n            for ( i = 0; i < line.length; i++) {\n                if (line[i] === 1) {\n                    ctx.fillRect(i, 0, 1, 100);\n                }\n            }\n        }\n    };\n\n    return (Bresenham);\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'barcode_reader',[],function() {\n        \"use strict\";\n        \n        function BarcodeReader(config) {\n            this._row = [];\n            this.config = config || {};\n            return this;\n        }\n        \n        BarcodeReader.prototype._nextUnset = function(line, start) {\n            var i;\n            \n            if (start === undefined) {\n                start = 0;\n            }\n            for (i = start; i < line.length; i++) {\n                if (!line[i]) {\n                    return i;\n                }\n            }\n            return line.length;\n        };\n        \n        BarcodeReader.prototype._matchPattern = function(counter, code) {\n            var i,\n                error = 0,\n                singleError = 0,\n                modulo = this.MODULO,\n                maxSingleError = this.SINGLE_CODE_ERROR || 1;\n                \n            for (i = 0; i < counter.length; i++) {\n                singleError = Math.abs(code[i] - counter[i]);\n                if (singleError > maxSingleError) {\n                    return Number.MAX_VALUE;\n                }\n                error += singleError;\n            }\n            return error/modulo;\n        };\n\n        BarcodeReader.prototype._nextSet = function(line, offset) {\n            var i;\n\n            offset = offset || 0;\n            for (i = offset; i < line.length; i++) {\n                if (line[i]) {\n                    return i;\n                }\n            }\n            return line.length;\n        };\n\n        BarcodeReader.prototype._normalize = function(counter, modulo) {\n            var i,\n                self = this,\n                sum = 0,\n                ratio,\n                numOnes = 0,\n                normalized = [],\n                norm = 0;\n                \n            if (!modulo) {\n                modulo = self.MODULO;\n            }\n            for (i = 0; i < counter.length; i++) {\n                if (counter[i] === 1) {\n                    numOnes++;\n                } else {\n                    sum += counter[i];\n                }\n            }\n            ratio = sum / (modulo - numOnes);\n            if (ratio > 1.0) {\n                for (i = 0; i < counter.length; i++) {\n                    norm = counter[i] === 1 ? counter[i] : counter[i] / ratio;\n                    normalized.push(norm);\n                }\n            } else {\n                ratio = (sum + numOnes)/modulo;\n                for (i = 0; i < counter.length; i++) {\n                    norm = counter[i] / ratio;\n                    normalized.push(norm);\n                }\n            }\n            return normalized;\n        };\n\n        BarcodeReader.prototype._matchTrace = function(cmpCounter, epsilon) {\n            var counter = [],\n                i,\n                self = this,\n                offset = self._nextSet(self._row),\n                isWhite = !self._row[offset],\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : 0\n                },\n                error;\n\n            if (cmpCounter) {\n                for ( i = 0; i < cmpCounter.length; i++) {\n                    counter.push(0);\n                }\n                for ( i = offset; i < self._row.length; i++) {\n                    if (self._row[i] ^ isWhite) {\n                        counter[counterPos]++;\n                    } else {\n                        if (counterPos === counter.length - 1) {\n                            error = self._matchPattern(counter, cmpCounter);\n\n                            if (error < epsilon) {\n                                bestMatch.start = i - offset;\n                                bestMatch.end = i;\n                                bestMatch.counter = counter;\n                                return bestMatch;\n                            } else {\n                                return null;\n                            }\n                        } else {\n                            counterPos++;\n                        }\n                        counter[counterPos] = 1;\n                        isWhite = !isWhite;\n                    }\n                }\n            } else {\n                counter.push(0);\n                for ( i = offset; i < self._row.length; i++) {\n                    if (self._row[i] ^ isWhite) {\n                        counter[counterPos]++;\n                    } else {\n                        counterPos++;\n                        counter.push(0);\n                        counter[counterPos] = 1;\n                        isWhite = !isWhite;\n                    }\n                }\n            }\n\n            // if cmpCounter was not given\n            bestMatch.start = offset;\n            bestMatch.end = self._row.length - 1;\n            bestMatch.counter = counter;\n            return bestMatch;\n        };\n        \n        BarcodeReader.prototype.decodePattern = function(pattern) {\n            var self = this,\n                result;\n            \n            self._row = pattern;\n            result = self._decode();\n            if (result === null) {\n                self._row.reverse();\n                result = self._decode();\n                if (result) {\n                    result.direction = BarcodeReader.DIRECTION.REVERSE;\n                    result.start = self._row.length - result.start;\n                    result.end = self._row.length - result.end;\n                }\n            } else {\n                result.direction = BarcodeReader.DIRECTION.FORWARD;\n            }\n            if (result) {\n                result.format = self.FORMAT;\n            }\n            return result;\n        };\n\n        BarcodeReader.prototype._matchRange = function(start, end, value) {\n            var i;\n\n            start = start < 0 ? 0 : start;\n            for (i = start; i < end; i++) {\n                if (this._row[i] !== value) {\n                    return false;\n                }\n            }\n            return true;\n        };\n\n        BarcodeReader.prototype._fillCounters = function(offset, end, isWhite) {\n            var self = this,\n                counterPos = 0,\n                i,\n                counters = [];\n\n            isWhite = (typeof isWhite !== 'undefined') ? isWhite : true;\n            offset = (typeof offset !== 'undefined') ? offset : self._nextUnset(self._row);\n            end = end || self._row.length;\n\n            counters[counterPos] = 0;\n            for (i = offset; i < end; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counters[counterPos]++;\n                } else {\n                    counterPos++;\n                    counters[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return counters;\n        };\n\n        Object.defineProperty(BarcodeReader.prototype, \"FORMAT\", {\n            value: 'unknown',\n            writeable: false\n        });\n        \n        BarcodeReader.DIRECTION = {\n            FORWARD : 1,\n            REVERSE : -1\n        };\n        \n        BarcodeReader.Exception = {\n            StartNotFoundException : \"Start-Info was not found!\",\n            CodeNotFoundException : \"Code could not be found!\",\n            PatternNotFoundException : \"Pattern could not be found!\"\n        };\n\n        BarcodeReader.CONFIG_KEYS = {};\n        \n        return (BarcodeReader);\n    }\n);\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n     'code_128_reader',[\n        \"./barcode_reader\"\n    ],\n    function(BarcodeReader) {\n        \"use strict\";\n        \n        function Code128Reader() {\n            BarcodeReader.call(this);\n        }\n        \n        var properties = {\n            CODE_SHIFT : {value: 98},\n            CODE_C : {value: 99},\n            CODE_B : {value: 100},\n            CODE_A : {value: 101},\n            START_CODE_A : {value: 103},\n            START_CODE_B : {value: 104},\n            START_CODE_C : {value: 105},\n            STOP_CODE : {value: 106},\n            MODULO : {value: 11},\n            CODE_PATTERN : {value: [\n                [2, 1, 2, 2, 2, 2],\n                [2, 2, 2, 1, 2, 2],\n                [2, 2, 2, 2, 2, 1],\n                [1, 2, 1, 2, 2, 3],\n                [1, 2, 1, 3, 2, 2],\n                [1, 3, 1, 2, 2, 2],\n                [1, 2, 2, 2, 1, 3],\n                [1, 2, 2, 3, 1, 2],\n                [1, 3, 2, 2, 1, 2],\n                [2, 2, 1, 2, 1, 3],\n                [2, 2, 1, 3, 1, 2],\n                [2, 3, 1, 2, 1, 2],\n                [1, 1, 2, 2, 3, 2],\n                [1, 2, 2, 1, 3, 2],\n                [1, 2, 2, 2, 3, 1],\n                [1, 1, 3, 2, 2, 2],\n                [1, 2, 3, 1, 2, 2],\n                [1, 2, 3, 2, 2, 1],\n                [2, 2, 3, 2, 1, 1],\n                [2, 2, 1, 1, 3, 2],\n                [2, 2, 1, 2, 3, 1],\n                [2, 1, 3, 2, 1, 2],\n                [2, 2, 3, 1, 1, 2],\n                [3, 1, 2, 1, 3, 1],\n                [3, 1, 1, 2, 2, 2],\n                [3, 2, 1, 1, 2, 2],\n                [3, 2, 1, 2, 2, 1],\n                [3, 1, 2, 2, 1, 2],\n                [3, 2, 2, 1, 1, 2],\n                [3, 2, 2, 2, 1, 1],\n                [2, 1, 2, 1, 2, 3],\n                [2, 1, 2, 3, 2, 1],\n                [2, 3, 2, 1, 2, 1],\n                [1, 1, 1, 3, 2, 3],\n                [1, 3, 1, 1, 2, 3],\n                [1, 3, 1, 3, 2, 1],\n                [1, 1, 2, 3, 1, 3],\n                [1, 3, 2, 1, 1, 3],\n                [1, 3, 2, 3, 1, 1],\n                [2, 1, 1, 3, 1, 3],\n                [2, 3, 1, 1, 1, 3],\n                [2, 3, 1, 3, 1, 1],\n                [1, 1, 2, 1, 3, 3],\n                [1, 1, 2, 3, 3, 1],\n                [1, 3, 2, 1, 3, 1],\n                [1, 1, 3, 1, 2, 3],\n                [1, 1, 3, 3, 2, 1],\n                [1, 3, 3, 1, 2, 1],\n                [3, 1, 3, 1, 2, 1],\n                [2, 1, 1, 3, 3, 1],\n                [2, 3, 1, 1, 3, 1],\n                [2, 1, 3, 1, 1, 3],\n                [2, 1, 3, 3, 1, 1],\n                [2, 1, 3, 1, 3, 1],\n                [3, 1, 1, 1, 2, 3],\n                [3, 1, 1, 3, 2, 1],\n                [3, 3, 1, 1, 2, 1],\n                [3, 1, 2, 1, 1, 3],\n                [3, 1, 2, 3, 1, 1],\n                [3, 3, 2, 1, 1, 1],\n                [3, 1, 4, 1, 1, 1],\n                [2, 2, 1, 4, 1, 1],\n                [4, 3, 1, 1, 1, 1],\n                [1, 1, 1, 2, 2, 4],\n                [1, 1, 1, 4, 2, 2],\n                [1, 2, 1, 1, 2, 4],\n                [1, 2, 1, 4, 2, 1],\n                [1, 4, 1, 1, 2, 2],\n                [1, 4, 1, 2, 2, 1],\n                [1, 1, 2, 2, 1, 4],\n                [1, 1, 2, 4, 1, 2],\n                [1, 2, 2, 1, 1, 4],\n                [1, 2, 2, 4, 1, 1],\n                [1, 4, 2, 1, 1, 2],\n                [1, 4, 2, 2, 1, 1],\n                [2, 4, 1, 2, 1, 1],\n                [2, 2, 1, 1, 1, 4],\n                [4, 1, 3, 1, 1, 1],\n                [2, 4, 1, 1, 1, 2],\n                [1, 3, 4, 1, 1, 1],\n                [1, 1, 1, 2, 4, 2],\n                [1, 2, 1, 1, 4, 2],\n                [1, 2, 1, 2, 4, 1],\n                [1, 1, 4, 2, 1, 2],\n                [1, 2, 4, 1, 1, 2],\n                [1, 2, 4, 2, 1, 1],\n                [4, 1, 1, 2, 1, 2],\n                [4, 2, 1, 1, 1, 2],\n                [4, 2, 1, 2, 1, 1],\n                [2, 1, 2, 1, 4, 1],\n                [2, 1, 4, 1, 2, 1],\n                [4, 1, 2, 1, 2, 1],\n                [1, 1, 1, 1, 4, 3],\n                [1, 1, 1, 3, 4, 1],\n                [1, 3, 1, 1, 4, 1],\n                [1, 1, 4, 1, 1, 3],\n                [1, 1, 4, 3, 1, 1],\n                [4, 1, 1, 1, 1, 3],\n                [4, 1, 1, 3, 1, 1],\n                [1, 1, 3, 1, 4, 1],\n                [1, 1, 4, 1, 3, 1],\n                [3, 1, 1, 1, 4, 1],\n                [4, 1, 1, 1, 3, 1],\n                [2, 1, 1, 4, 1, 2],\n                [2, 1, 1, 2, 1, 4],\n                [2, 1, 1, 2, 3, 2],\n                [2, 3, 3, 1, 1, 1, 2]\n            ]},\n            SINGLE_CODE_ERROR: {value: 1},\n            AVG_CODE_ERROR: {value: 0.5},\n            FORMAT: {value: \"code_128\", writeable: false}\n        };\n        \n        Code128Reader.prototype = Object.create(BarcodeReader.prototype, properties);\n        Code128Reader.prototype.constructor = Code128Reader;\n        \n        Code128Reader.prototype._decodeCode = function(start) {\n            var counter = [0, 0, 0, 0, 0, 0],\n                i,\n                self = this,\n                offset = start,\n                isWhite = !self._row[offset],\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : start,\n                    end : start\n                },\n                code,\n                error,\n                normalized;\n\n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n                        normalized = self._normalize(counter);\n                        if (normalized) {\n                            for (code = 0; code < self.CODE_PATTERN.length; code++) {\n                                error = self._matchPattern(normalized, self.CODE_PATTERN[code]);\n                                if (error < bestMatch.error) {\n                                    bestMatch.code = code;\n                                    bestMatch.error = error;\n                                }\n                            }\n                            bestMatch.end = i;\n                            return bestMatch;\n                        }\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        Code128Reader.prototype._findStart = function() {\n            var counter = [0, 0, 0, 0, 0, 0],\n                i,\n                self = this,\n                offset = self._nextSet(self._row),\n                isWhite = false,\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : 0,\n                    end : 0\n                },\n                code,\n                error,\n                j,\n                sum,\n                normalized;\n                \n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n                        sum = 0;\n                        for ( j = 0; j < counter.length; j++) {\n                            sum += counter[j];\n                        }\n                        normalized = self._normalize(counter);\n                        if (normalized) {\n                            for (code = self.START_CODE_A; code <= self.START_CODE_C; code++) {\n                                error = self._matchPattern(normalized, self.CODE_PATTERN[code]);\n                                if (error < bestMatch.error) {\n                                    bestMatch.code = code;\n                                    bestMatch.error = error;\n                                }\n                            }\n                            if (bestMatch.error < self.AVG_CODE_ERROR) {\n                                bestMatch.start = i - sum;\n                                bestMatch.end = i;\n                                return bestMatch;\n                            }\n                        }\n\n                        for ( j = 0; j < 4; j++) {\n                            counter[j] = counter[j + 2];\n                        }\n                        counter[4] = 0;\n                        counter[5] = 0;\n                        counterPos--;\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        Code128Reader.prototype._decode = function() {\n            var self = this,\n                startInfo = self._findStart(),\n                code = null,\n                done = false,\n                result = [],\n                multiplier = 0,\n                checksum = 0,\n                codeset,\n                rawResult = [],\n                decodedCodes = [],\n                shiftNext = false,\n                unshift,\n                lastCharacterWasPrintable;\n\n            if (startInfo === null) {\n                return null;\n            }\n            code = {\n                code : startInfo.code,\n                start : startInfo.start,\n                end : startInfo.end\n            };\n            decodedCodes.push(code);\n            checksum = code.code;\n            switch(code.code) {\n            case self.START_CODE_A:\n                codeset = self.CODE_A;\n                break;\n            case self.START_CODE_B:\n                codeset = self.CODE_B;\n                break;\n            case self.START_CODE_C:\n                codeset = self.CODE_C;\n                break;\n            default:\n                return null;\n            }\n\n            while (!done) {\n                unshift = shiftNext;\n                shiftNext = false;\n                code = self._decodeCode(code.end);\n                if (code !== null) {\n                    if (code.code !== self.STOP_CODE) {\n                        rawResult.push(code.code);\n                        multiplier++;\n                        checksum += multiplier * code.code;\n                    }\n                    decodedCodes.push(code);\n\n                    switch(codeset) {\n                    case self.CODE_A:\n                        if (code.code < 64) {\n                            result.push(String.fromCharCode(32 + code.code));\n                        } else if (code.code < 96) {\n                            result.push(String.fromCharCode(code.code - 64));\n                        } else {\n                            switch (code.code) {\n                            case self.CODE_SHIFT:\n                                shiftNext = true;\n                                codeset = self.CODE_B;\n                                break;\n                            case self.CODE_B:\n                                codeset = self.CODE_B;\n                                break;\n                            case self.CODE_C:\n                                codeset = self.CODE_C;\n                                break;\n                            case self.STOP_CODE:\n                                done = true;\n                                break;\n                            }\n                        }\n                        break;\n                    case self.CODE_B:\n                        if (code.code < 96) {\n                            result.push(String.fromCharCode(32 + code.code));\n                        } else {\n                            if (code.code != self.STOP_CODE) {\n                                lastCharacterWasPrintable = false;\n                            }\n                            switch (code.code) {\n                            case self.CODE_SHIFT:\n                                shiftNext = true;\n                                codeset = self.CODE_A;\n                                break;\n                            case self.CODE_A:\n                                codeset = self.CODE_A;\n                                break;\n                            case self.CODE_C:\n                                codeset = self.CODE_C;\n                                break;\n                            case self.STOP_CODE:\n                                done = true;\n                                break;\n                            }\n                        }\n                        break;\n                    case self.CODE_C:\n                        if (code.code < 100) {\n                            result.push(code.code < 10 ? \"0\" + code.code : code.code);\n                        }\n                        switch (code.code) {\n                        case self.CODE_A:\n                            codeset = self.CODE_A;\n                            break;\n                        case self.CODE_B:\n                            codeset = self.CODE_B;\n                            break;\n                        case self.STOP_CODE:\n                            done = true;\n                            break;\n                        }\n                        break;\n                    }\n                } else {\n                    done = true;\n                }\n                if (unshift) {\n                    codeset = codeset == self.CODE_A ? self.CODE_B : self.CODE_A;\n                }\n            }\n\n            if (code === null) {\n                return null;\n            }\n\n            // find end bar\n            code.end = self._nextUnset(self._row, code.end);\n            if(!self._verifyTrailingWhitespace(code)){\n                return null;\n            }\n\n            // checksum\n            // Does not work correctly yet!!! startcode - endcode?\n            checksum -= multiplier * rawResult[rawResult.length - 1];\n            if (checksum % 103 != rawResult[rawResult.length - 1]) {\n                return null;\n            }\n\n            if (!result.length) {\n                return null;\n            }\n\n            // remove last code from result (checksum)\n            result.splice(result.length - 1, 1);\n\n\n\n            return {\n                code : result.join(\"\"),\n                start : startInfo.start,\n                end : code.end,\n                codeset : codeset,\n                startInfo : startInfo,\n                decodedCodes : decodedCodes,\n                endInfo : code\n            };\n        };\n\n\n        BarcodeReader.prototype._verifyTrailingWhitespace = function(endInfo) {\n            var self = this,\n                trailingWhitespaceEnd;\n\n            trailingWhitespaceEnd = endInfo.end + ((endInfo.end - endInfo.start) / 2);\n            if (trailingWhitespaceEnd < self._row.length) {\n                if (self._matchRange(endInfo.end, trailingWhitespaceEnd, 0)) {\n                    return endInfo;\n                }\n            }\n            return null;\n        };\n        \n        return (Code128Reader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n     'ean_reader',[\n        \"./barcode_reader\"\n    ],\n    function(BarcodeReader) {\n        \"use strict\";\n        \n        function EANReader(opts) {\n            BarcodeReader.call(this, opts);\n        }\n        \n        var properties = {\n            CODE_L_START : {value: 0},\n            MODULO : {value: 7},\n            CODE_G_START : {value: 10},\n            START_PATTERN : {value: [1 / 3 * 7, 1 / 3 * 7, 1 / 3 * 7]},\n            STOP_PATTERN : {value: [1 / 3 * 7, 1 / 3 * 7, 1 / 3 * 7]},\n            MIDDLE_PATTERN : {value: [1 / 5 * 7, 1 / 5 * 7, 1 / 5 * 7, 1 / 5 * 7, 1 / 5 * 7]},\n            CODE_PATTERN : {value: [\n                [3, 2, 1, 1],\n                [2, 2, 2, 1],\n                [2, 1, 2, 2],\n                [1, 4, 1, 1],\n                [1, 1, 3, 2],\n                [1, 2, 3, 1],\n                [1, 1, 1, 4],\n                [1, 3, 1, 2],\n                [1, 2, 1, 3],\n                [3, 1, 1, 2],\n                [1, 1, 2, 3],\n                [1, 2, 2, 2],\n                [2, 2, 1, 2],\n                [1, 1, 4, 1],\n                [2, 3, 1, 1],\n                [1, 3, 2, 1],\n                [4, 1, 1, 1],\n                [2, 1, 3, 1],\n                [3, 1, 2, 1],\n                [2, 1, 1, 3]\n            ]},\n            CODE_FREQUENCY : {value: [0, 11, 13, 14, 19, 25, 28, 21, 22, 26]},\n            SINGLE_CODE_ERROR: {value: 0.67},\n            AVG_CODE_ERROR: {value: 0.27},\n            FORMAT: {value: \"ean_13\", writeable: false}\n        };\n        \n        EANReader.prototype = Object.create(BarcodeReader.prototype, properties);\n        EANReader.prototype.constructor = EANReader;\n        \n        EANReader.prototype._decodeCode = function(start, coderange) {\n            var counter = [0, 0, 0, 0],\n                i,\n                self = this,\n                offset = start,\n                isWhite = !self._row[offset],\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : start,\n                    end : start\n                },\n                code,\n                error,\n                normalized;\n\n            if (!coderange) {\n                coderange = self.CODE_PATTERN.length;\n            }\n\n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n                        normalized = self._normalize(counter);\n                        if (normalized) {\n                            for (code = 0; code < coderange; code++) {\n                                error = self._matchPattern(normalized, self.CODE_PATTERN[code]);\n                                if (error < bestMatch.error) {\n                                    bestMatch.code = code;\n                                    bestMatch.error = error;\n                                }\n                            }\n                            bestMatch.end = i;\n                            if (bestMatch.error > self.AVG_CODE_ERROR) {\n                                return null;\n                            }\n                            return bestMatch;\n                        }\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        EANReader.prototype._findPattern = function(pattern, offset, isWhite, tryHarder, epsilon) {\n            var counter = [],\n                self = this,\n                i,\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : 0,\n                    end : 0\n                },\n                error,\n                j,\n                sum,\n                normalized;\n\n            if (!offset) {\n                offset = self._nextSet(self._row);\n            }\n\n            if (isWhite === undefined) {\n                isWhite = false;\n            }\n\n            if (tryHarder === undefined) {\n                tryHarder = true;\n            }\n\n            if ( epsilon === undefined) {\n                epsilon = self.AVG_CODE_ERROR;\n            }\n\n            for ( i = 0; i < pattern.length; i++) {\n                counter[i] = 0;\n            }\n\n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n                        sum = 0;\n                        for ( j = 0; j < counter.length; j++) {\n                            sum += counter[j];\n                        }\n                        normalized = self._normalize(counter);\n                        if (normalized) {\n                            error = self._matchPattern(normalized, pattern);\n\n                            if (error < epsilon) {\n                                bestMatch.error = error;\n                                bestMatch.start = i - sum;\n                                bestMatch.end = i;\n                                return bestMatch;\n                            }\n                        }\n                        if (tryHarder) {\n                            for ( j = 0; j < counter.length - 2; j++) {\n                                counter[j] = counter[j + 2];\n                            }\n                            counter[counter.length - 2] = 0;\n                            counter[counter.length - 1] = 0;\n                            counterPos--;\n                        } else {\n                            return null;\n                        }\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        EANReader.prototype._findStart = function() {\n            var self = this,\n                leadingWhitespaceStart,\n                offset = self._nextSet(self._row),\n                startInfo;\n\n            while(!startInfo) {\n                startInfo = self._findPattern(self.START_PATTERN, offset);\n                if (!startInfo) {\n                    return null;\n                }\n                leadingWhitespaceStart = startInfo.start - (startInfo.end - startInfo.start);\n                if (leadingWhitespaceStart >= 0) {\n                    if (self._matchRange(leadingWhitespaceStart, startInfo.start, 0)) {\n                        return startInfo;\n                    }\n                }\n                offset = startInfo.end;\n                startInfo = null;\n            }\n        };\n\n        EANReader.prototype._verifyTrailingWhitespace = function(endInfo) {\n            var self = this,\n                trailingWhitespaceEnd;\n\n            trailingWhitespaceEnd = endInfo.end + (endInfo.end - endInfo.start);\n            if (trailingWhitespaceEnd < self._row.length) {\n                if (self._matchRange(endInfo.end, trailingWhitespaceEnd, 0)) {\n                    return endInfo;\n                }\n            }\n            return null;\n        };\n\n        EANReader.prototype._findEnd = function(offset, isWhite) {\n            var self = this,\n                endInfo = self._findPattern(self.STOP_PATTERN, offset, isWhite, false);\n\n            return endInfo !== null ? self._verifyTrailingWhitespace(endInfo) : null;\n        };\n\n        EANReader.prototype._calculateFirstDigit = function(codeFrequency) {\n            var i,\n                self = this;\n\n            for ( i = 0; i < self.CODE_FREQUENCY.length; i++) {\n                if (codeFrequency === self.CODE_FREQUENCY[i]) {\n                    return i;\n                }\n            }\n            return null;\n        };\n\n        EANReader.prototype._decodePayload = function(code, result, decodedCodes) {\n            var i,\n                self = this,\n                codeFrequency = 0x0,\n                firstDigit;\n\n            for ( i = 0; i < 6; i++) {\n                code = self._decodeCode(code.end);\n                if (!code) {\n                    return null;\n                }\n                if (code.code >= self.CODE_G_START) {\n                    code.code = code.code - self.CODE_G_START;\n                    codeFrequency |= 1 << (5 - i);\n                } else {\n                    codeFrequency |= 0 << (5 - i);\n                }\n                result.push(code.code);\n                decodedCodes.push(code);\n            }\n\n            firstDigit = self._calculateFirstDigit(codeFrequency);\n            if (firstDigit === null) {\n                return null;\n            }\n            result.unshift(firstDigit);\n\n            code = self._findPattern(self.MIDDLE_PATTERN, code.end, true, false);\n            if (code === null) {\n                return null;\n            }\n            decodedCodes.push(code);\n\n            for ( i = 0; i < 6; i++) {\n                code = self._decodeCode(code.end, self.CODE_G_START);\n                if (!code) {\n                    return null;\n                }\n                decodedCodes.push(code);\n                result.push(code.code);\n            }\n\n            return code;\n        };\n\n        EANReader.prototype._decode = function() {\n            var startInfo,\n                self = this,\n                code,\n                result = [],\n                decodedCodes = [];\n\n            startInfo = self._findStart();\n            if (!startInfo) {\n                return null;\n            }\n            code = {\n                code : startInfo.code,\n                start : startInfo.start,\n                end : startInfo.end\n            };\n            decodedCodes.push(code);\n            code = self._decodePayload(code, result, decodedCodes);\n            if (!code) {\n                return null;\n            }\n            code = self._findEnd(code.end, false);\n            if (!code){\n                return null;\n            }\n\n            decodedCodes.push(code);\n\n            // Checksum\n            if (!self._checksum(result)) {\n                return null;\n            }\n\n            return {\n                code : result.join(\"\"),\n                start : startInfo.start,\n                end : code.end,\n                codeset : \"\",\n                startInfo : startInfo,\n                decodedCodes : decodedCodes\n            };\n        };\n\n        EANReader.prototype._checksum = function(result) {\n            var sum = 0, i;\n\n            for ( i = result.length - 2; i >= 0; i -= 2) {\n                sum += result[i];\n            }\n            sum *= 3;\n            for ( i = result.length - 1; i >= 0; i -= 2) {\n                sum += result[i];\n            }\n            return sum % 10 === 0;\n        };\n        \n        return (EANReader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'code_39_reader',[\n        \"./barcode_reader\",\n        \"./array_helper\"\n    ],\n    function(BarcodeReader, ArrayHelper) {\n        \"use strict\";\n\n        function Code39Reader() {\n            BarcodeReader.call(this);\n        }\n\n        var properties = {\n            ALPHABETH_STRING: {value: \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%\"},\n            ALPHABET: {value: [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 45, 46, 32, 42, 36, 47, 43, 37]},\n            CHARACTER_ENCODINGS: {value: [0x034, 0x121, 0x061, 0x160, 0x031, 0x130, 0x070, 0x025, 0x124, 0x064, 0x109, 0x049, 0x148, 0x019, 0x118, 0x058, 0x00D, 0x10C, 0x04C, 0x01C, 0x103, 0x043, 0x142, 0x013, 0x112, 0x052, 0x007, 0x106, 0x046, 0x016, 0x181, 0x0C1, 0x1C0, 0x091, 0x190, 0x0D0, 0x085, 0x184, 0x0C4, 0x094, 0x0A8, 0x0A2, 0x08A, 0x02A]},\n            ASTERISK: {value: 0x094},\n            FORMAT: {value: \"code_39\", writeable: false}\n        };\n\n        Code39Reader.prototype = Object.create(BarcodeReader.prototype, properties);\n        Code39Reader.prototype.constructor = Code39Reader;\n\n        Code39Reader.prototype._toCounters = function(start, counter) {\n            var self = this,\n                numCounters = counter.length,\n                end = self._row.length,\n                isWhite = !self._row[start],\n                i,\n                counterPos = 0;\n\n            ArrayHelper.init(counter, 0);\n\n            for ( i = start; i < end; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    counterPos++;\n                    if (counterPos === numCounters) {\n                        break;\n                    } else {\n                        counter[counterPos] = 1;\n                        isWhite = !isWhite;\n                    }\n                }\n            }\n\n            return counter;\n        };\n\n        Code39Reader.prototype._decode = function() {\n            var self = this,\n                counters = [0,0,0,0,0,0,0,0,0],\n                result = [],\n                start = self._findStart(),\n                decodedChar,\n                lastStart,\n                pattern,\n                nextStart;\n\n            if (!start) {\n                return null;\n            }\n            nextStart = self._nextSet(self._row, start.end);\n\n            do {\n                counters = self._toCounters(nextStart, counters);\n                pattern = self._toPattern(counters);\n                if (pattern < 0) {\n                    return null;\n                }\n                decodedChar = self._patternToChar(pattern);\n                if (decodedChar < 0){\n                    return null;\n                }\n                result.push(decodedChar);\n                lastStart = nextStart;\n                nextStart += ArrayHelper.sum(counters);\n                nextStart = self._nextSet(self._row, nextStart);\n            } while(decodedChar !== '*');\n            result.pop();\n\n            if (!result.length) {\n                return null;\n            }\n\n            if(!self._verifyTrailingWhitespace(lastStart, nextStart, counters)) {\n                return null;\n            }\n\n            return {\n                code : result.join(\"\"),\n                start : start.start,\n                end : nextStart,\n                startInfo : start,\n                decodedCodes : result\n            };\n        };\n\n        Code39Reader.prototype._verifyTrailingWhitespace = function(lastStart, nextStart, counters) {\n            var trailingWhitespaceEnd,\n                patternSize = ArrayHelper.sum(counters);\n\n            trailingWhitespaceEnd = nextStart - lastStart - patternSize;\n            if ((trailingWhitespaceEnd * 3) >= patternSize) {\n                return true;\n            }\n            return false;\n        };\n\n        Code39Reader.prototype._patternToChar = function(pattern) {\n            var i,\n                self = this;\n\n            for (i = 0; i < self.CHARACTER_ENCODINGS.length; i++) {\n                if (self.CHARACTER_ENCODINGS[i] === pattern) {\n                    return String.fromCharCode(self.ALPHABET[i]);\n                }\n            }\n        };\n\n        Code39Reader.prototype._findNextWidth = function(counters, current) {\n            var i,\n                minWidth = Number.MAX_VALUE;\n\n            for (i = 0; i < counters.length; i++) {\n                if (counters[i] < minWidth && counters[i] > current) {\n                    minWidth = counters[i];\n                }\n            }\n\n            return minWidth;\n        };\n\n        Code39Reader.prototype._toPattern = function(counters) {\n            var numCounters = counters.length,\n                maxNarrowWidth = 0,\n                numWideBars = numCounters,\n                wideBarWidth = 0,\n                self = this,\n                pattern,\n                i;\n\n            while(numWideBars > 3) {\n                maxNarrowWidth = self._findNextWidth(counters, maxNarrowWidth);\n                numWideBars = 0;\n                pattern = 0;\n                for (i = 0; i < numCounters; i++) {\n                    if (counters[i] > maxNarrowWidth) {\n                        pattern |= 1 << (numCounters - 1 - i);\n                        numWideBars++;\n                        wideBarWidth += counters[i];\n                    }\n                }\n\n                if (numWideBars === 3) {\n                    for (i = 0; i < numCounters && numWideBars > 0; i++) {\n                        if (counters[i] > maxNarrowWidth) {\n                            numWideBars--;\n                            if ((counters[i] * 2) >= wideBarWidth) {\n                                return -1;\n                            }\n                        }\n                    }\n                    return pattern;\n                }\n            }\n            return -1;\n        };\n\n        Code39Reader.prototype._findStart = function() {\n            var self = this,\n                offset = self._nextSet(self._row),\n                patternStart = offset,\n                counter = [0,0,0,0,0,0,0,0,0],\n                counterPos = 0,\n                isWhite = false,\n                i,\n                j,\n                whiteSpaceMustStart;\n\n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n\n                        // find start pattern\n                        if (self._toPattern(counter) === self.ASTERISK) {\n                            whiteSpaceMustStart = Math.floor(Math.max(0, patternStart - ((i - patternStart) / 4)));\n                            if (self._matchRange(whiteSpaceMustStart, patternStart, 0)) {\n                                return {\n                                    start: patternStart,\n                                    end: i\n                                };\n                            }\n                        }\n\n                        patternStart += counter[0] + counter[1];\n                        for ( j = 0; j < 7; j++) {\n                            counter[j] = counter[j + 2];\n                        }\n                        counter[7] = 0;\n                        counter[8] = 0;\n                        counterPos--;\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        return (Code39Reader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'code_39_vin_reader',[\n        \"./code_39_reader\"\n    ],\n    function(Code39Reader) {\n        \"use strict\";\n\n        function Code39VINReader() {\n            Code39Reader.call(this);\n        }\n\n        var patterns = {\n            IOQ: /[IOQ]/g,\n            AZ09: /[A-Z0-9]{17}/\n        };\n\n        Code39VINReader.prototype = Object.create(Code39Reader.prototype);\n        Code39VINReader.prototype.constructor = Code39VINReader;\n\n        // Cribbed from:\n        // https://github.com/zxing/zxing/blob/master/core/src/main/java/com/google/zxing/client/result/VINResultParser.java\n        Code39VINReader.prototype._decode = function() {\n            var result = Code39Reader.prototype._decode.apply(this);\n            if (!result) {\n                return null;\n            }\n\n            var code = result.code;\n\n            if (!code) {\n                return;\n            }\n\n            code = code.replace(patterns.IOQ, '');\n\n            if (!code.match(patterns.AZ09)) {\n                console.log('Failed AZ09 pattern code:', code);\n                return null;\n            }\n\n            if (!this._checkChecksum(code)) {\n                return null;\n            }\n\n            result.code = code;\n            return result;\n        };\n\n        Code39VINReader.prototype._checkChecksum = function(code) {\n            // TODO\n            return !!code;\n        };\n\n        return (Code39VINReader);\n    }\n);\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'codabar_reader',[\n        \"./barcode_reader\"\n    ],\n    function(BarcodeReader) {\n        \"use strict\";\n\n        function CodabarReader() {\n            BarcodeReader.call(this);\n            this._counters = [];\n        }\n\n        var properties = {\n            ALPHABETH_STRING: {value: \"0123456789-$:/.+ABCD\"},\n            ALPHABET: {value: [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 45, 36, 58, 47, 46, 43, 65, 66, 67, 68]},\n            CHARACTER_ENCODINGS: {value: [0x003, 0x006, 0x009, 0x060, 0x012, 0x042, 0x021, 0x024, 0x030, 0x048, 0x00c, 0x018, 0x045, 0x051, 0x054, 0x015, 0x01A, 0x029, 0x00B, 0x00E]},\n            START_END: {value: [0x01A, 0x029, 0x00B, 0x00E]},\n            MIN_ENCODED_CHARS: {value: 4},\n            MAX_ACCEPTABLE: {value: 2.0},\n            PADDING: {value: 1.5},\n            FORMAT: {value: \"codabar\", writeable: false}\n        };\n\n        CodabarReader.prototype = Object.create(BarcodeReader.prototype, properties);\n        CodabarReader.prototype.constructor = CodabarReader;\n\n        CodabarReader.prototype._decode = function() {\n            var self = this,\n                result = [],\n                start,\n                decodedChar,\n                pattern,\n                nextStart,\n                end;\n\n            this._counters = self._fillCounters();\n            start = self._findStart();\n            if (!start) {\n                return null;\n            }\n            nextStart = start.startCounter;\n\n            do {\n                pattern = self._toPattern(nextStart);\n                if (pattern < 0) {\n                    return null;\n                }\n                decodedChar = self._patternToChar(pattern);\n                if (decodedChar < 0){\n                    return null;\n                }\n                result.push(decodedChar);\n                nextStart += 8;\n                if (result.length > 1 && self._isStartEnd(pattern)) {\n                    break;\n                }\n            } while(nextStart < self._counters.length);\n\n            // verify end\n            if ((result.length - 2) < self.MIN_ENCODED_CHARS || !self._isStartEnd(pattern)) {\n                return null;\n            }\n\n            // verify end white space\n            if (!self._verifyWhitespace(start.startCounter, nextStart - 8)){\n                return null;\n            }\n\n            if (!self._validateResult(result, start.startCounter)){\n                return null;\n            }\n\n            nextStart = nextStart > self._counters.length ? self._counters.length : nextStart;\n            end = start.start + self._sumCounters(start.startCounter, nextStart - 8);\n\n            return {\n                code : result.join(\"\"),\n                start : start.start,\n                end : end,\n                startInfo : start,\n                decodedCodes : result\n            };\n        };\n\n        CodabarReader.prototype._verifyWhitespace = function(startCounter, endCounter) {\n            if ((startCounter - 1 <= 0) || this._counters[startCounter-1] >= (this._calculatePatternLength(startCounter) / 2.0)) {\n                if ((endCounter + 8 >= this._counters.length) || this._counters[endCounter+7] >= (this._calculatePatternLength(endCounter) / 2.0)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        CodabarReader.prototype._calculatePatternLength = function(offset) {\n            var i,\n                sum = 0;\n\n            for (i = offset; i < offset + 7; i++) {\n                sum += this._counters[i];\n            }\n\n            return sum;\n        };\n\n        CodabarReader.prototype._thresholdResultPattern = function(result, startCounter){\n            var self = this,\n                categorization = {\n                    space: {\n                        narrow: { size: 0, counts: 0, min: 0, max: Number.MAX_VALUE},\n                        wide: {size: 0, counts: 0, min: 0, max: Number.MAX_VALUE}\n                    },\n                    bar: {\n                        narrow: { size: 0, counts: 0, min: 0, max: Number.MAX_VALUE},\n                        wide: { size: 0, counts: 0, min: 0, max: Number.MAX_VALUE}\n                    }\n                },\n                kind,\n                cat,\n                i,\n                j,\n                pos = startCounter,\n                pattern;\n\n            for (i = 0; i < result.length; i++){\n                pattern = self._charToPattern(result[i]);\n                for (j = 6; j >= 0; j--) {\n                    kind = (j & 1) === 2 ? categorization.bar : categorization.space;\n                    cat = (pattern & 1)  === 1 ? kind.wide : kind.narrow;\n                    cat.size += self._counters[pos + j];\n                    cat.counts++;\n                    pattern >>= 1;\n                }\n                pos += 8;\n            }\n\n            [\"space\", \"bar\"].forEach(function(key) {\n                var kind = categorization[key];\n                kind.wide.min = Math.floor((kind.narrow.size/kind.narrow.counts + kind.wide.size / kind.wide.counts) / 2);\n                kind.narrow.max = Math.ceil(kind.wide.min);\n                kind.wide.max = Math.ceil((kind.wide.size * self.MAX_ACCEPTABLE + self.PADDING) / kind.wide.counts);\n            });\n\n            return categorization;\n        };\n\n        CodabarReader.prototype._charToPattern = function(char) {\n            var self = this,\n                charCode = char.charCodeAt(0),\n                i;\n\n            for (i = 0; i < self.ALPHABET.length; i++) {\n                if (self.ALPHABET[i] === charCode){\n                    return self.CHARACTER_ENCODINGS[i];\n                }\n            }\n            return 0x0;\n        };\n\n        CodabarReader.prototype._validateResult = function(result, startCounter) {\n            var self = this,\n                thresholds = self._thresholdResultPattern(result, startCounter),\n                i,\n                j,\n                kind,\n                cat,\n                size,\n                pos = startCounter,\n                pattern;\n\n            for (i = 0; i < result.length; i++) {\n                pattern = self._charToPattern(result[i]);\n                for (j = 6; j >= 0; j--) {\n                    kind = (j & 1) === 0 ? thresholds.bar : thresholds.space;\n                    cat = (pattern & 1)  === 1 ? kind.wide : kind.narrow;\n                    size = self._counters[pos + j];\n                    if (size < cat.min || size > cat.max) {\n                        return false;\n                    }\n                    pattern >>= 1;\n                }\n                pos += 8;\n            }\n            return true;\n        };\n\n        CodabarReader.prototype._patternToChar = function(pattern) {\n            var i,\n                self = this;\n\n            for (i = 0; i < self.CHARACTER_ENCODINGS.length; i++) {\n                if (self.CHARACTER_ENCODINGS[i] === pattern) {\n                    return String.fromCharCode(self.ALPHABET[i]);\n                }\n            }\n            return -1;\n        };\n\n        CodabarReader.prototype._computeAlternatingThreshold = function(offset, end) {\n            var i,\n                min = Number.MAX_VALUE,\n                max = 0,\n                counter;\n\n            for (i = offset; i < end; i += 2){\n                counter = this._counters[i];\n                if (counter > max) {\n                    max = counter;\n                }\n                if (counter < min) {\n                    min = counter;\n                }\n            }\n\n            return ((min + max) / 2.0) | 0;\n        };\n\n        CodabarReader.prototype._toPattern = function(offset) {\n            var numCounters = 7,\n                end = offset + numCounters,\n                barThreshold,\n                spaceThreshold,\n                bitmask = 1 << (numCounters - 1),\n                pattern = 0,\n                i,\n                threshold;\n\n            if (end > this._counters.length) {\n                return -1;\n            }\n\n            barThreshold = this._computeAlternatingThreshold(offset, end);\n            spaceThreshold = this._computeAlternatingThreshold(offset + 1, end);\n\n            for (i = 0; i < numCounters; i++){\n                threshold = (i & 1) === 0 ? barThreshold : spaceThreshold;\n                if (this._counters[offset + i] > threshold) {\n                    pattern |= bitmask;\n                }\n                bitmask >>= 1;\n            }\n\n            return pattern;\n        };\n\n        CodabarReader.prototype._isStartEnd = function(pattern) {\n            var i;\n\n            for (i = 0; i < this.START_END.length; i++) {\n                if (this.START_END[i] === pattern) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        CodabarReader.prototype._sumCounters = function(start, end) {\n            var i,\n                sum = 0;\n\n            for (i = start; i < end; i++) {\n                sum += this._counters[i];\n            }\n            return sum;\n        };\n\n        CodabarReader.prototype._findStart = function() {\n            var self = this,\n                i,\n                pattern,\n                start = self._nextUnset(self._row),\n                end;\n\n            for (i = 1; i < this._counters.length; i++) {\n                pattern = self._toPattern(i);\n                if (pattern !== -1 && self._isStartEnd(pattern)) {\n                    // TODO: Look for whitespace ahead\n                    start += self._sumCounters(0, i);\n                    end = start + self._sumCounters(i, i + 8);\n                    return {\n                        start: start,\n                        end: end,\n                        startCounter: i,\n                        endCounter: i + 8\n                    };\n                }\n            }\n        };\n\n        return (CodabarReader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'upc_reader',[\n        \"./ean_reader\"\n    ],\n    function(EANReader) {\n        \"use strict\";\n\n        function UPCReader() {\n            EANReader.call(this);\n        }\n\n        var properties = {\n            FORMAT: {value: \"upc_a\", writeable: false}\n        };\n\n        UPCReader.prototype = Object.create(EANReader.prototype, properties);\n        UPCReader.prototype.constructor = UPCReader;\n\n        UPCReader.prototype._decode = function() {\n            var result = EANReader.prototype._decode.call(this);\n\n            if (result && result.code && result.code.length === 13 && result.code.charAt(0) === \"0\") {\n\n                result.code = result.code.substring(1);\n                return result;\n            }\n            return null;\n        };\n\n        return (UPCReader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'ean_8_reader',[\n        \"./ean_reader\"\n    ],\n    function(EANReader) {\n        \"use strict\";\n\n        function EAN8Reader() {\n            EANReader.call(this);\n        }\n\n        var properties = {\n            FORMAT: {value: \"ean_8\", writeable: false}\n        };\n\n        EAN8Reader.prototype = Object.create(EANReader.prototype, properties);\n        EAN8Reader.prototype.constructor = EAN8Reader;\n\n        EAN8Reader.prototype._decodePayload = function(code, result, decodedCodes) {\n            var i,\n                self = this;\n\n            for ( i = 0; i < 4; i++) {\n                code = self._decodeCode(code.end, self.CODE_G_START);\n                if (!code) {\n                    return null;\n                }\n                result.push(code.code);\n                decodedCodes.push(code);\n            }\n\n            code = self._findPattern(self.MIDDLE_PATTERN, code.end, true, false);\n            if (code === null) {\n                return null;\n            }\n            decodedCodes.push(code);\n\n            for ( i = 0; i < 4; i++) {\n                code = self._decodeCode(code.end, self.CODE_G_START);\n                if (!code) {\n                    return null;\n                }\n                decodedCodes.push(code);\n                result.push(code.code);\n            }\n\n            return code;\n        };\n\n        return (EAN8Reader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'upc_e_reader',[\n        \"./ean_reader\"\n    ],\n    function(EANReader) {\n        \"use strict\";\n\n        function UPCEReader() {\n            EANReader.call(this);\n        }\n\n        var properties = {\n            CODE_FREQUENCY : {value: [\n                [ 56, 52, 50, 49, 44, 38, 35, 42, 41, 37 ],\n                [7, 11, 13, 14, 19, 25, 28, 21, 22, 26]]},\n            STOP_PATTERN: { value: [1 / 6 * 7, 1 / 6 * 7, 1 / 6 * 7, 1 / 6 * 7, 1 / 6 * 7, 1 / 6 * 7]},\n            FORMAT: {value: \"upc_e\", writeable: false}\n        };\n\n        UPCEReader.prototype = Object.create(EANReader.prototype, properties);\n        UPCEReader.prototype.constructor = UPCEReader;\n\n        UPCEReader.prototype._decodePayload = function(code, result, decodedCodes) {\n            var i,\n                self = this,\n                codeFrequency = 0x0;\n\n            for ( i = 0; i < 6; i++) {\n                code = self._decodeCode(code.end);\n                if (!code) {\n                    return null;\n                }\n                if (code.code >= self.CODE_G_START) {\n                    code.code = code.code - self.CODE_G_START;\n                    codeFrequency |= 1 << (5 - i);\n                }\n                result.push(code.code);\n                decodedCodes.push(code);\n            }\n            if (!self._determineParity(codeFrequency, result)) {\n                return null;\n            }\n\n            return code;\n        };\n\n        UPCEReader.prototype._determineParity = function(codeFrequency, result) {\n            var self =this,\n                i,\n                nrSystem;\n\n            for (nrSystem = 0; nrSystem < self.CODE_FREQUENCY.length; nrSystem++){\n                for ( i = 0; i < self.CODE_FREQUENCY[nrSystem].length; i++) {\n                    if (codeFrequency === self.CODE_FREQUENCY[nrSystem][i]) {\n                        result.unshift(nrSystem);\n                        result.push(i);\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n\n        UPCEReader.prototype._convertToUPCA = function(result) {\n            var upca = [result[0]],\n                lastDigit = result[result.length - 2];\n\n            if (lastDigit <= 2) {\n                upca = upca.concat(result.slice(1, 3))\n                    .concat([lastDigit, 0, 0, 0, 0])\n                    .concat(result.slice(3, 6));\n            } else if (lastDigit === 3) {\n                upca = upca.concat(result.slice(1, 4))\n                    .concat([0 ,0, 0, 0, 0])\n                    .concat(result.slice(4,6));\n            } else if (lastDigit === 4) {\n                upca = upca.concat(result.slice(1, 5))\n                    .concat([0, 0, 0, 0, 0, result[5]]);\n            } else {\n                upca = upca.concat(result.slice(1, 6))\n                    .concat([0, 0, 0, 0, lastDigit]);\n            }\n\n            upca.push(result[result.length - 1]);\n            return upca;\n        };\n\n        UPCEReader.prototype._checksum = function(result) {\n            return EANReader.prototype._checksum.call(this, this._convertToUPCA(result));\n        };\n\n        UPCEReader.prototype._findEnd = function(offset, isWhite) {\n            isWhite = true;\n            return EANReader.prototype._findEnd.call(this, offset, isWhite);\n        };\n\n        UPCEReader.prototype._verifyTrailingWhitespace = function(endInfo) {\n            var self = this,\n                trailingWhitespaceEnd;\n\n            trailingWhitespaceEnd = endInfo.end + ((endInfo.end - endInfo.start)/2);\n            if (trailingWhitespaceEnd < self._row.length) {\n                if (self._matchRange(endInfo.end, trailingWhitespaceEnd, 0)) {\n                    return endInfo;\n                }\n            }\n        };\n\n        return (UPCEReader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('html_utils',[], function() {\n    \"use strict\";\n\n    function createNode(htmlStr) {\n        var temp = document.createElement('div');\n        \n        temp.innerHTML = htmlStr;\n        while (temp.firstChild) {\n            return temp.firstChild;\n        }\n    }\n\n    function mergeObjects(obj1, obj2) {\n        for (var p in obj2) {\n            try {\n                if (obj2[p].constructor == Object) {\n                    obj1[p] = mergeObjects(obj1[p], obj2[p]);\n                } else {\n                    obj1[p] = obj2[p];\n                }\n            } catch(e) {\n                obj1[p] = obj2[p];\n            }\n        }\n\n        return obj1;\n    }\n\n    return {\n        createNode : function(htmlStr) {\n            return createNode(htmlStr);\n        },\n        mergeObjects : function(obj1, obj2) {\n            return mergeObjects(obj1, obj2);\n        }\n    };\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine(\n    'i2of5_reader',[\n        \"./barcode_reader\",\n        \"./html_utils\"\n    ],\n    function(BarcodeReader, HTMLUtils) {\n        \"use strict\";\n\n        function I2of5Reader(opts) {\n            opts = HTMLUtils.mergeObjects(getDefaulConfig(), opts);\n            BarcodeReader.call(this, opts);\n            this.barSpaceRatio = [1, 1];\n            if (opts.normalizeBarSpaceWidth) {\n                this.SINGLE_CODE_ERROR = 0.38;\n                this.AVG_CODE_ERROR = 0.09;\n            }\n        }\n\n        function getDefaulConfig() {\n            var config = {};\n\n            Object.keys(I2of5Reader.CONFIG_KEYS).forEach(function(key) {\n                config[key] = I2of5Reader.CONFIG_KEYS[key]['default'];\n            });\n            return config;\n        }\n\n        var N = 1,\n            W = 3,\n            properties = {\n            MODULO : {value: 10},\n            START_PATTERN : {value: [N*2.5, N*2.5, N*2.5, N*2.5]},\n            STOP_PATTERN : {value: [N*2, N*2, W*2]},\n            CODE_PATTERN : {value: [\n                [N, N, W, W, N],\n                [W, N, N, N, W],\n                [N, W, N, N, W],\n                [W, W, N, N, N],\n                [N, N, W, N, W],\n                [W, N, W, N, N],\n                [N, W, W, N, N],\n                [N, N, N, W, W],\n                [W, N, N, W, N],\n                [N, W, N, W, N]\n            ]},\n            SINGLE_CODE_ERROR: {value: 0.78, writable: true},\n            AVG_CODE_ERROR: {value: 0.38, writable: true},\n            MAX_CORRECTION_FACTOR: {value: 5},\n            FORMAT: {value: \"i2of5\"}\n        };\n\n        I2of5Reader.prototype = Object.create(BarcodeReader.prototype, properties);\n        I2of5Reader.prototype.constructor = I2of5Reader;\n\n        I2of5Reader.prototype._matchPattern = function(counter, code) {\n            if (this.config.normalizeBarSpaceWidth) {\n                var i,\n                    counterSum = [0, 0],\n                    codeSum = [0, 0],\n                    correction = [0, 0],\n                    correctionRatio = this.MAX_CORRECTION_FACTOR,\n                    correctionRatioInverse = 1 / correctionRatio;\n\n                for (i = 0; i < counter.length; i++) {\n                    counterSum[i % 2] += counter[i];\n                    codeSum[i % 2] += code[i];\n                }\n                correction[0] = codeSum[0] / counterSum[0];\n                correction[1] = codeSum[1] / counterSum[1];\n\n                correction[0] = Math.max(Math.min(correction[0], correctionRatio), correctionRatioInverse);\n                correction[1] = Math.max(Math.min(correction[1], correctionRatio), correctionRatioInverse);\n                this.barSpaceRatio = correction;\n                for (i = 0; i < counter.length; i++) {\n                    counter[i] *= this.barSpaceRatio[i % 2];\n                }\n            }\n            return BarcodeReader.prototype._matchPattern.call(this, counter, code);\n        };\n\n        I2of5Reader.prototype._findPattern = function(pattern, offset, isWhite, tryHarder) {\n            var counter = [],\n                self = this,\n                i,\n                counterPos = 0,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : 0,\n                    end : 0\n                },\n                error,\n                j,\n                sum,\n                normalized,\n                epsilon = self.AVG_CODE_ERROR;\n\n            isWhite = isWhite || false;\n            tryHarder = tryHarder || false;\n\n            if (!offset) {\n                offset = self._nextSet(self._row);\n            }\n\n            for ( i = 0; i < pattern.length; i++) {\n                counter[i] = 0;\n            }\n\n            for ( i = offset; i < self._row.length; i++) {\n                if (self._row[i] ^ isWhite) {\n                    counter[counterPos]++;\n                } else {\n                    if (counterPos === counter.length - 1) {\n                        sum = 0;\n                        for ( j = 0; j < counter.length; j++) {\n                            sum += counter[j];\n                        }\n                        normalized = self._normalize(counter);\n                        if (normalized) {\n                            error = self._matchPattern(normalized, pattern);\n\n                            if (error < epsilon) {\n                                bestMatch.error = error;\n                                bestMatch.start = i - sum;\n                                bestMatch.end = i;\n                                return bestMatch;\n                            }\n                        }\n                        if (tryHarder) {\n                            for (j = 0; j < counter.length - 2; j++) {\n                                counter[j] = counter[j + 2];\n                            }\n                            counter[counter.length - 2] = 0;\n                            counter[counter.length - 1] = 0;\n                            counterPos--;\n                        } else {\n                            return null;\n                        }\n                    } else {\n                        counterPos++;\n                    }\n                    counter[counterPos] = 1;\n                    isWhite = !isWhite;\n                }\n            }\n            return null;\n        };\n\n        I2of5Reader.prototype._findStart = function() {\n            var self = this,\n                leadingWhitespaceStart,\n                offset = self._nextSet(self._row),\n                startInfo,\n                narrowBarWidth = 1;\n\n            while(!startInfo) {\n                startInfo = self._findPattern(self.START_PATTERN, offset, false, true);\n                if (!startInfo) {\n                    return null;\n                }\n                narrowBarWidth = Math.floor((startInfo.end - startInfo.start) / 4);\n                leadingWhitespaceStart = startInfo.start - narrowBarWidth*10;\n                if (leadingWhitespaceStart >= 0) {\n                    if (self._matchRange(leadingWhitespaceStart, startInfo.start, 0)) {\n                        return startInfo;\n                    }\n                }\n                offset = startInfo.end;\n                startInfo = null;\n            }\n        };\n\n        I2of5Reader.prototype._verifyTrailingWhitespace = function(endInfo) {\n            var self = this,\n                trailingWhitespaceEnd;\n\n            trailingWhitespaceEnd = endInfo.end + ((endInfo.end - endInfo.start) / 2);\n            if (trailingWhitespaceEnd < self._row.length) {\n                if (self._matchRange(endInfo.end, trailingWhitespaceEnd, 0)) {\n                    return endInfo;\n                }\n            }\n            return null;\n        };\n\n        I2of5Reader.prototype._findEnd = function() {\n            var self = this,\n                endInfo,\n                tmp;\n\n            self._row.reverse();\n            endInfo = self._findPattern(self.STOP_PATTERN);\n            self._row.reverse();\n\n            if (endInfo === null) {\n                return null;\n            }\n\n            // reverse numbers\n            tmp = endInfo.start;\n            endInfo.start = self._row.length - endInfo.end;\n            endInfo.end = self._row.length - tmp;\n\n            return endInfo !== null ? self._verifyTrailingWhitespace(endInfo) : null;\n        };\n\n        I2of5Reader.prototype._decodePair = function(counterPair) {\n            var i,\n                code,\n                codes = [],\n                self = this;\n\n            for (i = 0; i < counterPair.length; i++) {\n                code = self._decodeCode(counterPair[i]);\n                if (!code) {\n                    return null;\n                }\n                codes.push(code);\n            }\n            return codes;\n        };\n\n        I2of5Reader.prototype._decodeCode = function(counter) {\n            var j,\n                self = this,\n                sum = 0,\n                normalized,\n                error,\n                epsilon = self.AVG_CODE_ERROR,\n                code,\n                bestMatch = {\n                    error : Number.MAX_VALUE,\n                    code : -1,\n                    start : 0,\n                    end : 0\n                };\n\n            for ( j = 0; j < counter.length; j++) {\n                sum += counter[j];\n            }\n            normalized = self._normalize(counter);\n            if (normalized) {\n                for (code = 0; code < self.CODE_PATTERN.length; code++) {\n                    error = self._matchPattern(normalized, self.CODE_PATTERN[code]);\n                    if (error < bestMatch.error) {\n                        bestMatch.code = code;\n                        bestMatch.error = error;\n                    }\n                }\n                if (bestMatch.error < epsilon) {\n                    return bestMatch;\n                }\n            }\n            return null;\n        };\n\n        I2of5Reader.prototype._decodePayload = function(counters, result, decodedCodes) {\n            var i,\n                self = this,\n                pos = 0,\n                counterLength = counters.length,\n                counterPair = [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0]],\n                codes;\n\n            while (pos < counterLength) {\n                for (i = 0; i < 5; i++) {\n                    counterPair[0][i] = counters[pos]*this.barSpaceRatio[0];\n                    counterPair[1][i] = counters[pos + 1]*this.barSpaceRatio[1];\n                    pos += 2;\n                }\n                codes = self._decodePair(counterPair);\n                if (!codes) {\n                    return null;\n                }\n                for (i = 0; i < codes.length; i++) {\n                    result.push(codes[i].code + \"\");\n                    decodedCodes.push(codes[i]);\n                }\n            }\n            return codes;\n        };\n\n        I2of5Reader.prototype._verifyCounterLength = function(counters) {\n            return (counters.length % 10 === 0);\n        };\n\n        I2of5Reader.prototype._decode = function() {\n            var startInfo,\n                endInfo,\n                self = this,\n                code,\n                result = [],\n                decodedCodes = [],\n                counters;\n\n            startInfo = self._findStart();\n            if (!startInfo) {\n                return null;\n            }\n            decodedCodes.push(startInfo);\n\n            endInfo = self._findEnd();\n            if (!endInfo) {\n                return null;\n            }\n\n            counters = self._fillCounters(startInfo.end, endInfo.start, false);\n            if (!self._verifyCounterLength(counters)) {\n                return null;\n            }\n            code = self._decodePayload(counters, result, decodedCodes);\n            if (!code) {\n                return null;\n            }\n            if (result.length % 2 !== 0 ||\n                    result.length < 6) {\n                return null;\n            }\n\n            decodedCodes.push(endInfo);\n            return {\n                code : result.join(\"\"),\n                start : startInfo.start,\n                end : endInfo.end,\n                startInfo : startInfo,\n                decodedCodes : decodedCodes\n            };\n        };\n\n        I2of5Reader.CONFIG_KEYS = {\n            normalizeBarSpaceWidth: {\n                'type': 'boolean',\n                'default': false,\n                'description': 'If true, the reader tries to normalize the' +\n                'width-difference between bars and spaces'\n            }\n        };\n\n        return (I2of5Reader);\n    }\n);\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('barcode_decoder',[\n    \"bresenham\",\n    \"image_debug\",\n    'code_128_reader',\n    'ean_reader',\n    'code_39_reader',\n    'code_39_vin_reader',\n    'codabar_reader',\n    'upc_reader',\n    'ean_8_reader',\n    'upc_e_reader',\n    'i2of5_reader'\n], function(\n    Bresenham,\n    ImageDebug,\n    Code128Reader,\n    EANReader,\n    Code39Reader,\n    Code39VINReader,\n    CodabarReader,\n    UPCReader,\n    EAN8Reader,\n    UPCEReader,\n    I2of5Reader) {\n    \"use strict\";\n\n    var readers = {\n        code_128_reader: Code128Reader,\n        ean_reader: EANReader,\n        ean_8_reader: EAN8Reader,\n        code_39_reader: Code39Reader,\n        code_39_vin_reader: Code39VINReader,\n        codabar_reader: CodabarReader,\n        upc_reader: UPCReader,\n        upc_e_reader: UPCEReader,\n        i2of5_reader: I2of5Reader\n    };\n    var BarcodeDecoder = {\n        create : function(config, inputImageWrapper) {\n            var _canvas = {\n                ctx : {\n                        frequency : null,\n                        pattern : null,\n                        overlay : null\n                    },\n                    dom : {\n                        frequency : null,\n                        pattern : null,\n                        overlay : null\n                    }\n                },\n                _barcodeReaders = [];\n\n            initCanvas();\n            initReaders();\n            initConfig();\n\n            function initCanvas() {\n                if (typeof document !== 'undefined') {\n                    var $debug = document.querySelector(\"#debug.detection\");\n                    _canvas.dom.frequency = document.querySelector(\"canvas.frequency\");\n                    if (!_canvas.dom.frequency) {\n                        _canvas.dom.frequency = document.createElement(\"canvas\");\n                        _canvas.dom.frequency.className = \"frequency\";\n                        if($debug) {\n                            $debug.appendChild(_canvas.dom.frequency);\n                        }\n                    }\n                    _canvas.ctx.frequency = _canvas.dom.frequency.getContext(\"2d\");\n\n                    _canvas.dom.pattern = document.querySelector(\"canvas.patternBuffer\");\n                    if (!_canvas.dom.pattern) {\n                        _canvas.dom.pattern = document.createElement(\"canvas\");\n                        _canvas.dom.pattern.className = \"patternBuffer\";\n                        if($debug) {\n                            $debug.appendChild(_canvas.dom.pattern);\n                        }\n                    }\n                    _canvas.ctx.pattern = _canvas.dom.pattern.getContext(\"2d\");\n\n                    _canvas.dom.overlay = document.querySelector(\"canvas.drawingBuffer\");\n                    if (_canvas.dom.overlay) {\n                        _canvas.ctx.overlay = _canvas.dom.overlay.getContext(\"2d\");\n                    }\n                }\n            }\n\n            function initReaders() {\n                config.readers.forEach(function(readerConfig) {\n                    var reader,\n                        config = {};\n\n                    if (typeof readerConfig === 'object') {\n                        reader = readerConfig.format;\n                        config = readerConfig.config;\n                    } else if (typeof readerConfig === 'string') {\n                        reader = readerConfig;\n                    }\n                    _barcodeReaders.push(new readers[reader](config));\n                });\n                console.log(\"Registered Readers: \" + _barcodeReaders\n                    .map(function(reader) {return JSON.stringify({format: reader.FORMAT, config: reader.config});})\n                    .join(', '));\n            }\n\n            function initConfig() {\n                if (typeof document !== 'undefined') {\n                    var i,\n                        vis = [{\n                            node : _canvas.dom.frequency,\n                            prop : config.showFrequency\n                        }, {\n                            node : _canvas.dom.pattern,\n                            prop : config.showPattern\n                        }];\n\n                    for (i = 0; i < vis.length; i++) {\n                        if (vis[i].prop === true) {\n                            vis[i].node.style.display = \"block\";\n                        } else {\n                            vis[i].node.style.display = \"none\";\n                        }\n                    }\n                }\n            }\n\n            /**\n             * extend the line on both ends\n             * @param {Array} line\n             * @param {Number} angle\n             */\n            function getExtendedLine(line, angle, ext) {\n                function extendLine(amount) {\n                    var extension = {\n                        y : amount * Math.sin(angle),\n                        x : amount * Math.cos(angle)\n                    };\n\n                    line[0].y -= extension.y;\n                    line[0].x -= extension.x;\n                    line[1].y += extension.y;\n                    line[1].x += extension.x;\n                }\n\n                // check if inside image\n                extendLine(ext);\n                while (ext > 1 && (!inputImageWrapper.inImageWithBorder(line[0], 0) || !inputImageWrapper.inImageWithBorder(line[1], 0))) {\n                    ext -= Math.ceil(ext/2);\n                    extendLine(-ext);\n                }\n                return line;\n            }\n\n            function getLine(box) {\n                return [{\n                    x : (box[1][0] - box[0][0]) / 2 + box[0][0],\n                    y : (box[1][1] - box[0][1]) / 2 + box[0][1]\n                }, {\n                    x : (box[3][0] - box[2][0]) / 2 + box[2][0],\n                    y : (box[3][1] - box[2][1]) / 2 + box[2][1]\n                }];\n            }\n\n            function tryDecode(line) {\n                var result = null,\n                    i,\n                    barcodeLine = Bresenham.getBarcodeLine(inputImageWrapper, line[0], line[1]);\n\n                if (config.showFrequency) {\n                    ImageDebug.drawPath(line, {x: 'x', y: 'y'}, _canvas.ctx.overlay, {color: 'red', lineWidth: 3});\n                    Bresenham.debug.printFrequency(barcodeLine.line, _canvas.dom.frequency);\n                }\n                Bresenham.toBinaryLine(barcodeLine);\n                if (config.showPattern) {\n                    Bresenham.debug.printPattern(barcodeLine.line, _canvas.dom.pattern);\n                }\n\n                for ( i = 0; i < _barcodeReaders.length && result === null; i++) {\n                    result = _barcodeReaders[i].decodePattern(barcodeLine.line);\n                }\n                if(result === null){\n                    return null;\n                }\n                return {\n                    codeResult: result,\n                    barcodeLine: barcodeLine\n                };\n\n            }\n\n            /**\n             * This method slices the given area apart and tries to detect a barcode-pattern\n             * for each slice. It returns the decoded barcode, or null if nothing was found\n             * @param {Array} box\n             * @param {Array} line\n             * @param {Number} lineAngle\n             */\n            function tryDecodeBruteForce(box, line, lineAngle) {\n                var sideLength = Math.sqrt(Math.pow(box[1][0] - box[0][0], 2) + Math.pow((box[1][1] - box[0][1]), 2)),\n                    i,\n                    slices = 16,\n                    result = null,\n                    dir,\n                    extension,\n                    xdir = Math.sin(lineAngle),\n                    ydir = Math.cos(lineAngle);\n\n                for ( i = 1; i < slices && result === null; i++) {\n                    // move line perpendicular to angle\n                    dir = sideLength / slices * i * (i % 2 === 0 ? -1 : 1);\n                    extension = {\n                        y : dir * xdir,\n                        x : dir * ydir\n                    };\n                    line[0].y += extension.x;\n                    line[0].x -= extension.y;\n                    line[1].y += extension.x;\n                    line[1].x -= extension.y;\n\n                    result = tryDecode(line);\n                }\n                return result;\n            }\n\n            function getLineLength(line) {\n                return Math.sqrt(\n                    Math.pow(Math.abs(line[1].y - line[0].y), 2) +\n                    Math.pow(Math.abs(line[1].x - line[0].x), 2));\n            }\n\n            /**\n             * With the help of the configured readers (Code128 or EAN) this function tries to detect a\n             * valid barcode pattern within the given area.\n             * @param {Object} box The area to search in\n             * @returns {Object} the result {codeResult, line, angle, pattern, threshold}\n             */\n            function decodeFromBoundingBox(box) {\n                var line,\n                    lineAngle,\n                    ctx = _canvas.ctx.overlay,\n                    result,\n                    lineLength;\n\n                if (config.drawBoundingBox && ctx) {\n                    ImageDebug.drawPath(box, {x: 0, y: 1}, ctx, {color: \"blue\", lineWidth: 2});\n                }\n\n                line = getLine(box);\n                lineLength = getLineLength(line);\n                lineAngle = Math.atan2(line[1].y - line[0].y, line[1].x - line[0].x);\n                line = getExtendedLine(line, lineAngle, Math.floor(lineLength*0.1));\n                if(line === null){\n                    return null;\n                }\n\n                result = tryDecode(line);\n                if(result === null) {\n                    result = tryDecodeBruteForce(box, line, lineAngle);\n                }\n\n                if(result === null) {\n                    return null;\n                }\n\n                if (result && config.drawScanline && ctx) {\n                    ImageDebug.drawPath(line, {x: 'x', y: 'y'}, ctx, {color: 'red', lineWidth: 3});\n                }\n\n                return {\n                    codeResult : result.codeResult,\n                    line : line,\n                    angle : lineAngle,\n                    pattern : result.barcodeLine.line,\n                    threshold : result.barcodeLine.threshold\n                };\n            }\n\n            return {\n                decodeFromBoundingBox : function(box) {\n                    return decodeFromBoundingBox(box);\n                },\n                decodeFromBoundingBoxes : function(boxes) {\n                    var i, result;\n                    for ( i = 0; i < boxes.length; i++) {\n                        result = decodeFromBoundingBox(boxes[i]);\n                        if (result && result.codeResult) {\n                            result.box = boxes[i];\n                            return result;\n                        }\n                    }\n                },\n                setReaders: function(readers) {\n                    config.readers = readers;\n                    _barcodeReaders.length = 0;\n                    initReaders();\n                }\n            };\n        }\n    };\n\n    return (BarcodeDecoder);\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('frame_grabber',[\"cv_utils\"], function(CVUtils) {\n    \"use strict\";\n\n    var FrameGrabber = {};\n\n    FrameGrabber.create = function(inputStream, canvas) {\n        var _that = {},\n            _streamConfig = inputStream.getConfig(),\n            _video_size = CVUtils.imageRef(inputStream.getRealWidth(), inputStream.getRealHeight()),\n            _canvasSize = inputStream.getCanvasSize(),\n            _size = CVUtils.imageRef(inputStream.getWidth(), inputStream.getHeight()),\n            topRight = inputStream.getTopRight(),\n            _sx = topRight.x,\n            _sy = topRight.y,\n            _canvas,\n            _ctx = null,\n            _data = null;\n\n        _canvas = canvas ? canvas : document.createElement(\"canvas\");\n        _canvas.width = _canvasSize.x;\n        _canvas.height = _canvasSize.y;\n        _ctx = _canvas.getContext(\"2d\");\n        _data = new Uint8Array(_size.x * _size.y);\n        console.log(\"FrameGrabber\", JSON.stringify({\n            size: _size,\n            topRight: topRight,\n            videoSize: _video_size,\n            canvasSize: _canvasSize\n        }));\n\n        /**\n         * Uses the given array as frame-buffer \n         */\n        _that.attachData = function(data) {\n            _data = data;\n        };\n\n        /**\n         * Returns the used frame-buffer\n         */\n        _that.getData = function() {\n            return _data;\n        };\n\n        /**\n         * Fetches a frame from the input-stream and puts into the frame-buffer.\n         * The image-data is converted to gray-scale and then half-sampled if configured.\n         */\n        _that.grab = function() {\n            var doHalfSample = _streamConfig.halfSample,\n                frame = inputStream.getFrame(),\n                ctxData;\n            if (frame) {\n                _ctx.drawImage(frame, 0, 0, _canvasSize.x, _canvasSize.y);\n                ctxData = _ctx.getImageData(_sx, _sy, _size.x, _size.y).data;\n                if(doHalfSample){\n                    CVUtils.grayAndHalfSampleFromCanvasData(ctxData, _size, _data);\n                } else {\n                    CVUtils.computeGray(ctxData, _data, _streamConfig);\n                }\n                return true;\n            } else {\n                return false;\n            }\n        };\n\n        _that.getSize = function() {\n            return _size;\n        };\n\n        return _that;\n    };\n\n    return (FrameGrabber);\n});\n\n/**\n * The basic configuration\n */\n\ndefine('config',[],function(){\n  var config = {\n      inputStream: { name: \"Live\",\n          type: \"LiveStream\",\n          constraints: {\n              width: 640,\n              height: 480,\n              minAspectRatio: 0,\n              maxAspectRatio: 100,\n              facing: \"environment\" // or user\n          },\n          area: {\n              top: \"0%\",\n              right: \"0%\",\n              left: \"0%\",\n              bottom: \"0%\"\n          },\n          singleChannel: false // true: only the red color-channel is read\n      },\n      tracking: false,\n      debug: false,\n      controls: false,\n      locate: true,\n      numOfWorkers: 4,\n      visual: {\n        show: true\n      },\n      decoder:{\n        drawBoundingBox: false,\n        showFrequency: false,\n        drawScanline: false,\n        showPattern: false,\n        readers: [\n          'code_128_reader'\n        ]\n      },\n      locator: {\n        halfSample: true,\n        patchSize: \"medium\", // x-small, small, medium, large, x-large\n        showCanvas: false,\n        showPatches: false,\n        showFoundPatches: false,\n        showSkeleton: false,\n        showLabels: false,\n        showPatchLabels: false,\n        showRemainingPatchLabels: false,\n        boxFromPatches: {\n          showTransformed: false,\n          showTransformedBox: false,\n          showBB: false\n        }\n      }\n   };\n\n   return config;\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('events',[],function() {\n    \"use strict\";\n\n    var _events = function() {\n        var events = {};\n\n        function getEvent(eventName) {\n            if (!events[eventName]) {\n                events[eventName] = {\n                    subscribers : []\n                };\n            }\n            return events[eventName];\n        }\n        \n        function clearEvents(){\n            events = {};\n        }\n\n        function publishSubscription(subscription, data) {\n            if (subscription.async) {\n                setTimeout(function() {\n                    subscription.callback(data);\n                }, 4);\n            } else {\n                subscription.callback(data);\n            }\n        }\n        \n        function subscribe(event, callback, async) {\n            var subscription;\n\n            if ( typeof callback === \"function\") {\n                subscription = {\n                    callback : callback,\n                    async : async\n                };\n            } else {\n                subscription = callback;\n                if (!subscription.callback) {\n                    throw \"Callback was not specified on options\";\n                }\n            }\n\n            getEvent(event).subscribers.push(subscription);\n        }\n\n        return {\n            subscribe : function(event, callback, async) {\n                return subscribe(event, callback, async);\n            },\n            publish : function(eventName, data) {\n                var event = getEvent(eventName),\n                    subscribers = event.subscribers;\n                    \n                event.subscribers = subscribers.filter(function(subscriber) {\n                    publishSubscription(subscriber, data);\n                    return !subscriber.once;\n                });\n            },\n            once: function(event, callback, async) {\n                subscribe(event, {\n                    callback: callback,\n                    async: async,\n                    once: true\n                });\n            },\n            unsubscribe: function(eventName, callback) {\n                var event;\n                \n                if (eventName) {\n                    event = getEvent(eventName);\n                    if (event && callback) {\n                        event.subscribers = event.subscribers.filter(function(subscriber){\n                            return subscriber.callback !== callback;\n                        });\n                    } else {\n                        event.subscribers = [];\n                    }\n                } else {\n                    clearEvents();\n                }\n            }\n        };\n    }();\n\n    return _events;\n}); \n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define, MediaStreamTrack */\n\ndefine('camera_access',[\"html_utils\"], function(HtmlUtils) {\n    \"use strict\";\n    var streamRef,\n        loadedDataHandler;\n\n    /**\n     * Wraps browser-specific getUserMedia\n     * @param {Object} constraints\n     * @param {Object} success Callback\n     * @param {Object} failure Callback\n     */\n    function getUserMedia(constraints, success, failure) {\n        if (typeof navigator.getUserMedia !== 'undefined') {\n            navigator.getUserMedia(constraints, function (stream) {\n                streamRef = stream;\n                var videoSrc = (window.URL && window.URL.createObjectURL(stream)) || stream;\n                success.apply(null, [videoSrc]);\n            }, failure);\n        } else {\n            failure(new TypeError(\"getUserMedia not available\"));\n        }\n    }\n\n    function loadedData(video, callback) {\n        var attempts = 10;\n\n        function checkVideo() {\n            if (attempts > 0) {\n                if (video.videoWidth > 0 && video.videoHeight > 0) {\n                    console.log(video.videoWidth + \"px x \" + video.videoHeight + \"px\");\n                    callback();\n                } else {\n                    window.setTimeout(checkVideo, 500);\n                }\n            } else {\n                callback('Unable to play video stream. Is webcam working?');\n            }\n            attempts--;\n        }\n        checkVideo();\n    }\n\n    /**\n     * Tries to attach the camera-stream to a given video-element\n     * and calls the callback function when the content is ready\n     * @param {Object} constraints\n     * @param {Object} video\n     * @param {Object} callback\n     */\n    function initCamera(constraints, video, callback) {\n        getUserMedia(constraints, function(src) {\n            video.src = src;\n            if (loadedDataHandler) {\n                video.removeEventListener(\"loadeddata\", loadedDataHandler, false);\n            }\n            loadedDataHandler = loadedData.bind(null, video, callback);\n            video.addEventListener('loadeddata', loadedDataHandler, false);\n            video.play();\n        }, function(e) {\n            callback(e);\n        });\n    }\n\n    /**\n     * Normalizes the incoming constraints to satisfy the current browser\n     * @param config\n     * @param cb Callback which is called whenever constraints are created\n     * @returns {*}\n     */\n    function normalizeConstraints(config, cb) {\n        var constraints = {\n                audio: false,\n                video: true\n            },\n            videoConstraints = HtmlUtils.mergeObjects({\n                width: 640,\n                height: 480,\n                minAspectRatio: 0,\n                maxAspectRatio: 100,\n                facing: \"environment\"\n            }, config);\n\n        if ( typeof MediaStreamTrack !== 'undefined' && typeof MediaStreamTrack.getSources !== 'undefined') {\n            MediaStreamTrack.getSources(function(sourceInfos) {\n                var videoSourceId;\n                for (var i = 0; i != sourceInfos.length; ++i) {\n                    var sourceInfo = sourceInfos[i];\n                    if (sourceInfo.kind == \"video\" && sourceInfo.facing == videoConstraints.facing) {\n                        videoSourceId = sourceInfo.id;\n                    }\n                }\n                constraints.video = {\n                    mandatory: {\n                        minWidth: videoConstraints.width,\n                        minHeight: videoConstraints.height,\n                        minAspectRatio: videoConstraints.minAspectRatio,\n                        maxAspectRatio: videoConstraints.maxAspectRatio\n                    },\n                    optional: [{\n                        sourceId: videoSourceId\n                    }]\n                };\n                return cb(constraints);\n            });\n        } else {\n            constraints.video = {\n                mediaSource: \"camera\",\n                width: { min: videoConstraints.width, max: videoConstraints.width },\n                height: { min: videoConstraints.height, max: videoConstraints.height },\n                require: [\"width\", \"height\"]\n            };\n            return cb(constraints);\n        }\n    }\n\n    /**\n     * Requests the back-facing camera of the user. The callback is called\n     * whenever the stream is ready to be consumed, or if an error occures.\n     * @param {Object} video\n     * @param {Object} callback\n     */\n    function request(video, videoConstraints, callback) {\n        normalizeConstraints(videoConstraints, function(constraints) {\n            initCamera(constraints, video, callback);\n        });\n    }\n\n    return {\n        request : function(video, constraints, callback) {\n            request(video, constraints, callback);\n        },\n        release : function() {\n            var tracks = streamRef && streamRef.getVideoTracks();\n            if (tracks.length) {\n                tracks[0].stop();\n            }\n            streamRef = null;\n        }\n    };\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true */\n/* global define */\n\ndefine('result_collector',[\"image_debug\"], function(ImageDebug) {\n    \"use strict\";\n\n    function contains(codeResult, list) {\n        if (list) {\n            return list.some(function (item) {\n                return Object.keys(item).every(function (key) {\n                    return item[key] === codeResult[key];\n                });\n            });\n        }\n        return false;\n    }\n\n    function passesFilter(codeResult, filter) {\n        if (typeof filter === 'function') {\n            return filter(codeResult);\n        }\n        return true;\n    }\n\n    return {\n        create: function(config) {\n            var canvas = document.createElement(\"canvas\"),\n                ctx = canvas.getContext(\"2d\"),\n                results = [],\n                capacity = config.capacity || 20,\n                capture = config.capture === true;\n\n            function matchesConstraints(codeResult) {\n                return capacity && codeResult && !contains(codeResult, config.blacklist) && passesFilter(codeResult, config.filter);\n            }\n\n            return {\n                addResult: function(data, imageSize, codeResult) {\n                    var result = {};\n\n                    if (matchesConstraints(codeResult)) {\n                        capacity--;\n                        result.codeResult = codeResult;\n                        if (capture) {\n                            canvas.width = imageSize.x;\n                            canvas.height = imageSize.y;\n                            ImageDebug.drawImage(data, imageSize, ctx);\n                            result.frame = canvas.toDataURL();\n                        }\n                        results.push(result);\n                    }\n                },\n                getResults: function() {\n                    return results;\n                }\n            };\n        }\n    };\n});\n\n/* jshint undef: true, unused: true, browser:true, devel: true, evil: true */\n/* global define, vec2 */\n\n\ndefine('quagga',[\n        \"input_stream\",\n        \"image_wrapper\",\n        \"barcode_locator\",\n        \"barcode_decoder\",\n        \"frame_grabber\",\n        \"html_utils\",\n        \"config\",\n        \"events\",\n        \"camera_access\",\n        \"image_debug\",\n        \"result_collector\"],\nfunction(InputStream,\n         ImageWrapper,\n         BarcodeLocator,\n         BarcodeDecoder,\n         FrameGrabber,\n         HtmlUtils,\n         _config,\n         Events,\n         CameraAccess,\n         ImageDebug,\n         ResultCollector) {\n    \"use strict\";\n    \n    var _inputStream,\n        _framegrabber,\n        _stopped,\n        _canvasContainer = {\n            ctx : {\n                image : null,\n                overlay : null\n            },\n            dom : {\n                image : null,\n                overlay : null\n            }\n        },\n        _inputImageWrapper,\n        _boxSize,\n        _decoder,\n        _workerPool = [],\n        _onUIThread = true,\n        _resultCollector;\n\n    function initializeData(imageWrapper) {\n        initBuffers(imageWrapper);\n        _decoder = BarcodeDecoder.create(_config.decoder, _inputImageWrapper);\n    }\n\n    function initConfig() {\n        if (typeof document !== \"undefined\") {\n            var vis = [{\n                node: document.querySelector(\"div[data-controls]\"),\n                prop: _config.controls\n            }, {\n                node: _canvasContainer.dom.overlay,\n                prop: _config.visual.show\n            }];\n\n            for (var i = 0; i < vis.length; i++) {\n                if (vis[i].node) {\n                    if (vis[i].prop === true) {\n                        vis[i].node.style.display = \"block\";\n                    } else {\n                        vis[i].node.style.display = \"none\";\n                    }\n                }\n            }\n        }\n    }\n\n    function initInputStream(cb) {\n        var video;\n        if (_config.inputStream.type == \"VideoStream\") {\n            video = document.createElement(\"video\");\n            _inputStream = InputStream.createVideoStream(video);\n        } else if (_config.inputStream.type == \"ImageStream\") {\n            _inputStream = InputStream.createImageStream();\n        } else if (_config.inputStream.type == \"LiveStream\") {\n            var $viewport = document.querySelector(\"#interactive.viewport\");\n            if ($viewport) {\n                video = $viewport.querySelector(\"video\");\n                if (!video) {\n                    video = document.createElement(\"video\");\n                    $viewport.appendChild(video);\n                }\n            }\n            _inputStream = InputStream.createLiveStream(video);\n            CameraAccess.request(video, _config.inputStream.constraints, function(err) {\n                if (!err) {\n                    _inputStream.trigger(\"canrecord\");\n                } else {\n                    return cb(err);\n                }\n            });\n        }\n\n        _inputStream.setAttribute(\"preload\", \"auto\");\n        _inputStream.setAttribute(\"autoplay\", true);\n        _inputStream.setInputStream(_config.inputStream);\n        _inputStream.addEventListener(\"canrecord\", canRecord.bind(undefined, cb));\n    }\n\n    function canRecord(cb) {\n        BarcodeLocator.checkImageConstraints(_inputStream, _config.locator);\n        initCanvas();\n        _framegrabber = FrameGrabber.create(_inputStream, _canvasContainer.dom.image);\n        initConfig();\n\n        if (_config.numOfWorkers > 0) {\n            initWorkers(function() {\n                console.log(\"Workers created\");\n                ready(cb);\n            });\n        } else {\n            initializeData();\n            ready(cb);\n        }\n    }\n\n    function ready(cb){\n        _inputStream.play();\n        cb();\n    }\n\n    function initCanvas() {\n        if (typeof document !== \"undefined\") {\n            var $viewport = document.querySelector(\"#interactive.viewport\");\n            _canvasContainer.dom.image = document.querySelector(\"canvas.imgBuffer\");\n            if (!_canvasContainer.dom.image) {\n                _canvasContainer.dom.image = document.createElement(\"canvas\");\n                _canvasContainer.dom.image.className = \"imgBuffer\";\n                if ($viewport && _config.inputStream.type == \"ImageStream\") {\n                    $viewport.appendChild(_canvasContainer.dom.image);\n                }\n            }\n            _canvasContainer.ctx.image = _canvasContainer.dom.image.getContext(\"2d\");\n            _canvasContainer.dom.image.width = _inputStream.getCanvasSize().x;\n            _canvasContainer.dom.image.height = _inputStream.getCanvasSize().y;\n\n            _canvasContainer.dom.overlay = document.querySelector(\"canvas.drawingBuffer\");\n            if (!_canvasContainer.dom.overlay) {\n                _canvasContainer.dom.overlay = document.createElement(\"canvas\");\n                _canvasContainer.dom.overlay.className = \"drawingBuffer\";\n                if ($viewport) {\n                    $viewport.appendChild(_canvasContainer.dom.overlay);\n                }\n                var clearFix = document.createElement(\"br\");\n                clearFix.setAttribute(\"clear\", \"all\");\n                if ($viewport) {\n                    $viewport.appendChild(clearFix);\n                }\n            }\n            _canvasContainer.ctx.overlay = _canvasContainer.dom.overlay.getContext(\"2d\");\n            _canvasContainer.dom.overlay.width = _inputStream.getCanvasSize().x;\n            _canvasContainer.dom.overlay.height = _inputStream.getCanvasSize().y;\n        }\n    }\n\n    function initBuffers(imageWrapper) {\n        if (imageWrapper) {\n            _inputImageWrapper = imageWrapper;\n        } else {\n            _inputImageWrapper = new ImageWrapper({\n                x : _inputStream.getWidth(),\n                y : _inputStream.getHeight()\n            });\n        }\n\n        console.log(_inputImageWrapper.size);\n        _boxSize = [\n                vec2.create([0, 0]),\n                vec2.create([0, _inputImageWrapper.size.y]),\n                vec2.create([_inputImageWrapper.size.x, _inputImageWrapper.size.y]),\n                vec2.create([_inputImageWrapper.size.x, 0])\n            ];\n        BarcodeLocator.init(_inputImageWrapper, _config.locator);\n    }\n\n    function getBoundingBoxes() {\n        if (_config.locate) {\n            return BarcodeLocator.locate();\n        } else {\n            return [[\n                vec2.create(_boxSize[0]),\n                vec2.create(_boxSize[1]),\n                vec2.create(_boxSize[2]),\n                vec2.create(_boxSize[3])]];\n        }\n    }\n\n    function transformResult(result) {\n        var topRight = _inputStream.getTopRight(),\n            xOffset = topRight.x,\n            yOffset = topRight.y,\n            i;\n\n        if (!result || (xOffset === 0 && yOffset === 0)) {\n            return;\n        }\n\n\n        if (result.line && result.line.length === 2) {\n            moveLine(result.line);\n        }\n        if (result.boxes && result.boxes.length > 0) {\n            for (i = 0; i < result.boxes.length; i++) {\n                moveBox(result.boxes[i]);\n            }\n        }\n\n        function moveBox(box) {\n            var corner = box.length;\n\n            while(corner--) {\n                box[corner][0] += xOffset;\n                box[corner][1] += yOffset;\n            }\n        }\n\n        function moveLine(line) {\n            line[0].x += xOffset;\n            line[0].y += yOffset;\n            line[1].x += xOffset;\n            line[1].y += yOffset;\n        }\n    }\n\n    function publishResult(result, imageData) {\n        if (_onUIThread) {\n            transformResult(result);\n            if (imageData && result && result.codeResult) {\n                if (_resultCollector) {\n                    _resultCollector.addResult(imageData, _inputStream.getCanvasSize(), result.codeResult);\n                }\n            }\n        }\n\n        Events.publish(\"processed\", result);\n        if (result && result.codeResult) {\n            Events.publish(\"detected\", result);\n        }\n    }\n\n    function locateAndDecode() {\n        var result,\n            boxes;\n\n        boxes = getBoundingBoxes();\n        if (boxes) {\n            result = _decoder.decodeFromBoundingBoxes(boxes);\n            result = result || {};\n            result.boxes = boxes;\n            publishResult(result, _inputImageWrapper.data);\n        } else {\n            publishResult();\n        }\n    }\n\n    function update() {\n        var availableWorker;\n\n        if (_onUIThread) {\n            if (_workerPool.length > 0) {\n                availableWorker = _workerPool.filter(function(workerThread) {\n                    return !workerThread.busy;\n                })[0];\n                if (availableWorker) {\n                    _framegrabber.attachData(availableWorker.imageData);\n                } else {\n                    return; // all workers are busy\n                }\n            } else {\n                _framegrabber.attachData(_inputImageWrapper.data);\n            }\n            if (_framegrabber.grab()) {\n                if (availableWorker) {\n                    availableWorker.busy = true;\n                    availableWorker.worker.postMessage({\n                        cmd: 'process',\n                        imageData: availableWorker.imageData\n                    }, [availableWorker.imageData.buffer]);\n                } else {\n                    locateAndDecode();\n                }\n            }\n        } else {\n            locateAndDecode();\n        }\n    }\n\n    function start() {\n        _stopped = false;\n        ( function frame() {\n            if (!_stopped) {\n                update();\n                if (_onUIThread && _config.inputStream.type == \"LiveStream\") {\n                    window.requestAnimFrame(frame);\n                }\n            }\n        }());\n    }\n\n    function initWorkers(cb) {\n        var i;\n        _workerPool = [];\n\n        for (i = 0; i < _config.numOfWorkers; i++) {\n            initWorker(workerInitialized);\n        }\n\n        function workerInitialized(workerThread) {\n            _workerPool.push(workerThread);\n            if (_workerPool.length >= _config.numOfWorkers){\n                cb();\n            }\n        }\n    }\n\n    function initWorker(cb) {\n        var blobURL,\n            workerThread = {\n                worker: undefined,\n                imageData: new Uint8Array(_inputStream.getWidth() * _inputStream.getHeight()),\n                busy: true\n            };\n\n        blobURL = generateWorkerBlob();\n        workerThread.worker = new Worker(blobURL);\n\n        workerThread.worker.onmessage = function(e) {\n            if (e.data.event === 'initialized') {\n                URL.revokeObjectURL(blobURL);\n                workerThread.busy = false;\n                workerThread.imageData = new Uint8Array(e.data.imageData);\n                console.log(\"Worker initialized\");\n                return cb(workerThread);\n            } else if (e.data.event === 'processed') {\n                workerThread.imageData = new Uint8Array(e.data.imageData);\n                workerThread.busy = false;\n                publishResult(e.data.result, workerThread.imageData);\n            } else if (e.data.event === 'error') {\n                console.log(\"Worker error: \" + e.data.message);\n            }\n        };\n\n        workerThread.worker.postMessage({\n            cmd: 'init',\n            size: {x: _inputStream.getWidth(), y: _inputStream.getHeight()},\n            imageData: workerThread.imageData,\n            config: _config\n        }, [workerThread.imageData.buffer]);\n    }\n\n\n    function workerInterface(factory) {\n        if (factory) {\n            /* jshint ignore:start */\n            var Quagga = factory();\n            if (!Quagga) {\n                self.postMessage({'event': 'error', message: 'Quagga could not be created'});\n                return;\n            }\n            /* jshint ignore:end */\n        }\n        /* jshint ignore:start */\n        var imageWrapper;\n\n        self.onmessage = function(e) {\n            if (e.data.cmd === 'init') {\n                var config = e.data.config;\n                config.numOfWorkers = 0;\n                imageWrapper = new Quagga.ImageWrapper({\n                    x : e.data.size.x,\n                    y : e.data.size.y\n                }, new Uint8Array(e.data.imageData));\n                Quagga.init(config, ready, imageWrapper);\n                Quagga.onProcessed(onProcessed);\n            } else if (e.data.cmd === 'process') {\n                imageWrapper.data = new Uint8Array(e.data.imageData);\n                Quagga.start();\n            } else if (e.data.cmd === 'setReaders') {\n                Quagga.setReaders(e.data.readers);\n            }\n        };\n\n        function onProcessed(result) {\n            self.postMessage({'event': 'processed', imageData: imageWrapper.data, result: result}, [imageWrapper.data.buffer]);\n        }\n\n        function ready() {\n            self.postMessage({'event': 'initialized', imageData: imageWrapper.data}, [imageWrapper.data.buffer]);\n        }\n        /* jshint ignore:end */\n    }\n\n    function generateWorkerBlob() {\n        var blob,\n            factorySource;\n\n        /* jshint ignore:start */\n        if (typeof __factorySource__ !== 'undefined') {\n            factorySource = __factorySource__;\n        }\n        /* jshint ignore:end */\n\n        blob = new Blob(['(' + workerInterface.toString() + ')(' + factorySource + ');'],\n            {type : 'text/javascript'});\n\n        return window.URL.createObjectURL(blob);\n    }\n\n    function setReaders(readers) {\n        if (_decoder) {\n            _decoder.setReaders(readers);\n        } else if (_onUIThread && _workerPool.length > 0) {\n            _workerPool.forEach(function(workerThread) {\n                workerThread.worker.postMessage({cmd: 'setReaders', readers: readers});\n            });\n        }\n    }\n\n    return {\n        init : function(config, cb, imageWrapper) {\n            _config = HtmlUtils.mergeObjects(_config, config);\n            if (imageWrapper) {\n                _onUIThread = false;\n                initializeData(imageWrapper);\n                return cb();\n            } else {\n                initInputStream(cb);\n            }\n        },\n        start : function() {\n            start();\n        },\n        stop : function() {\n            _stopped = true;\n            _workerPool.forEach(function(workerThread) {\n                workerThread.worker.terminate();\n                console.log(\"Worker terminated!\");\n            });\n            _workerPool.length = 0;\n            if (_config.inputStream.type === \"LiveStream\") {\n                CameraAccess.release();\n                _inputStream.clearEventHandlers();\n            }\n        },\n        pause: function() {\n            _stopped = true;\n        },\n        onDetected : function(callback) {\n            Events.subscribe(\"detected\", callback);\n        },\n        offDetected: function(callback) {\n            Events.unsubscribe(\"detected\", callback);\n        },\n        onProcessed: function(callback) {\n            Events.subscribe(\"processed\", callback);\n        },\n        offProcessed: function(callback) {\n            Events.unsubscribe(\"processed\", callback);\n        },\n        setReaders: function(readers) {\n            setReaders(readers);\n        },\n        registerResultCollector: function(resultCollector) {\n            if (resultCollector && typeof resultCollector.addResult === 'function') {\n                _resultCollector = resultCollector;\n            }\n        },\n        canvas : _canvasContainer,\n        decodeSingle : function(config, resultCallback) {\n            config = HtmlUtils.mergeObjects({\n                inputStream: {\n                    type : \"ImageStream\",\n                    sequence : false,\n                    size: 800,\n                    src: config.src\n                },\n                numOfWorkers: 1,\n                locator: {\n                    halfSample: false\n                }\n            }, config);\n            this.init(config, function() {\n                Events.once(\"processed\", function(result) {\n                    _stopped = true;\n                    resultCallback.call(null, result);\n                }, true);\n                start();\n            });\n        },\n        ImageWrapper: ImageWrapper,\n        ImageDebug: ImageDebug,\n        ResultCollector: ResultCollector\n    };\n});\n\n    return require('quagga');\n}));"],"names":["root","factory","factorySource","toString","module","exports","this","__factorySource__","requirejs","require","define","global","undef","main","req","makeMap","handlers","defined","waiting","config","defining","hasOwn","Object","prototype","hasOwnProperty","aps","slice","jsSuffixRegExp","hasProp","obj","prop","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","starMap","charAt","length","nodeIdCompat","test","replace","concat","splice","join","indexOf","substring","makeRequire","relName","forceSync","apply","arguments","makeLoad","depName","value","callDep","args","Error","splitPrefix","prefix","index","makeConfig","plugin","parts","makeNormalize","f","n","pr","p","e","id","uri","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","amd","jQuery","ImageLoader","addOnloadHandler","img","htmlImagesArray","onload","loaded","directory","offset","size","sequence","num","htmlImagesSrcArray","Array","notLoaded","addImage","push","loadedImg","notloadedImgs","x","y","imgName","substr","lastIndexOf","src","console","log","Image","InputStream","createVideoStream","video","_calculatedWidth","_calculatedHeight","that","_config","_eventNames","_eventHandlers","_topRight","_canvasSize","getRealWidth","videoWidth","getRealHeight","videoHeight","getWidth","getHeight","setWidth","width","setHeight","height","setInputStream","ended","getConfig","setAttribute","pause","play","setCurrentTime","time","type","currentTime","addEventListener","event","bool","clearEventHandlers","forEach","eventName","handler","removeEventListener","trigger","Math","floor","initSize","setTopRight","topRight","getTopRight","setCanvasSize","getCanvasSize","getFrame","createLiveStream","createImageStream","calculatedWidth","calculatedHeight","frameIdx","paused","imgArray","baseUrl","publishEvent","stream","imgs","frame","glMatrixArrayType","Float32Array","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","element","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","URL","webkitURL","mozURL","msURL","imul","a","b","al","bl","typedefs","SubImage","from","I","data","originalSize","show","canvas","scale","ctx","current","pixel","getContext","getImageData","get","putImageData","updateData","image","updateFrom","create","point","threshold","points","center","rad","vec","vec2","pointMap","add","updateCenter","sum","cos","sin","fits","abs","dot","getPoints","getCenter","createPoint","property","vec3","dest","val","z","len","sqrt","x2","y2","z2","lerp","mat3","mat","a01","a02","a12","mat4","a03","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","invDet","b21","d","mat2","b12","b13","b20","b22","b23","b30","b31","b32","b33","w","angle","axis","s","c","t","left","right","bottom","top","near","far","rl","tb","fn","fovy","aspect","tan","PI","frustum","eye","up","z0","z1","x0","x1","y0","y1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","identity","quat4","quat","set","calculateW","inverse","multiply","quat2","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVec3","qx","qy","qz","qw","ix","iy","iz","iw","toMat3","xx","xy","xz","yy","yz","zz","wx","wy","wz","toMat4","slerp","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","str","glMatrix","xVec4","scalar","ha00","ha01","ha02","ha10","ha11","ha12","ha20","ha21","ha22","invDetA","hb00","hb01","hb02","hb10","hb11","hb12","hb20","hb21","hb22","xVec3","determinant","result","project","glMatrixAddon","init","arr","l","shuffle","random","toPointList","row","rows","scoreFunc","queue","maxIndex","max","Cluster2","ArrayHelper","CVUtils","toVec2","toVec3","round","imageWrapper","integralWrapper","imageData","integralImageData","posA","posB","posC","posD","v","u","targetWrapper","targetData","bitsPerPixel","bitShift","hist","Int32Array","line","px","end","mx","p1","p2","p12","k","m12","vet","computeHistogram","determineThreshold","determineOtsuThreshold","thresholdImage","computeIntegralImage","A","B","C","avg","kernel","cluster","clusters","addToCluster","found","Tracer","trace","iteration","centerPos","currentPos","idx","forward","to","toIdx","predictedPos","thresholdY","match","pos","predicted","DILATE","ERODE","dilate","inImageWrapper","outImageWrapper","yStart1","yStart2","xStart1","xStart2","inImageData","outImageData","erode","subtract","aImageWrapper","bImageWrapper","resultImageWrapper","aImageData","bImageData","cImageData","bitwiseOr","countNonZero","topGeneric","list","score","hit","minIdx","min","item","Number","MAX_VALUE","grayArrayFromImage","htmlImage","offsetX","array","drawImage","ctxData","computeGray","grayArrayFromContext","grayAndHalfSampleFromCanvasData","canvasData","outArray","topRowIdx","bottomRowIdx","endIdx","outWidth","outImgIdx","inWidth","singleChannel","loadImageArray","document","createElement","Uint8Array","halfSample","inImgWrapper","outImgWrapper","inImg","outImg","hsv2rgb","hsv","rgb","h","m","r","g","_computeDivisors","largeDivisors","divisors","unshift","_computeIntersection","arr1","arr2","calculatePatchSize","patchSize","imgSize","optimalPatchSize","divisorsX","divisorsY","wideSide","common","nrOfPatchesList","nrOfPatchesMap","nrOfPatchesIdx","medium","nrOfPatches","desiredPatchSize","findPatchSizeForDivisors","_parseCSSDimensionValues","parseFloat","unit","_dimensionsConverters","dimension","context","computeImageArea","inputWidth","inputHeight","area","parsedArea","keys","reduce","key","parsed","calculated","sx","sy","sw","sh","ImageWrapper","ArrayType","initialize","inImageWithBorder","imgRef","border","transform","M","inOrig","outOrig","ih","across","down","p0","xVec2","min_x","min_y","max_x","max_y","sampleFunc","sample","carrigeReturn","x_bound","y_bound","count","lx","ly","base","clearArray","subImage","subImageAsCopy","sizeY","sizeX","copyTo","srcData","dstData","getSafe","indexMapping","zeroBorder","invert","convolve","kx","ky","kSize","accu","moments","labelcount","ysq","label","mu11","x_","y_","tmp","labelsum","PI_4","m00","m01","m10","m11","m02","m20","theta","isNaN","atan","overlay","whiteRgb","blackRgb","searchDirections","labelWrapper","labelData","color","edgelabel","cy","dir","cx","vertex2D","next","prev","contourTracing","Cv","P","ldir","Fv","Rasterizer","createContour2D","firstVertex","insideContours","nextpeer","prevpeer","CONTOUR_DIR","CW_DIR","CCW_DIR","UNKNOWN_DIR","DIR","OUTSIDE_EDGE","INSIDE_EDGE","tracer","rasterize","depthlabel","bc","lc","labelindex","vertex","cc","sc","colorMap","connectedCount","debug","drawContour","firstContour","iq","q","pq","strokeStyle","fillStyle","lineWidth","beginPath","moveTo","lineTo","stroke","stdlib","foreign","buffer","images","inImagePtr","outImagePtr","aImagePtr","bImagePtr","imagePtr","memcpy","srcImagePtr","dstImagePtr","skeletonize","subImagePtr","erodedImagePtr","tempImagePtr","skelImagePtr","done","drawRect","style","strokeRect","drawPath","path","def","closePath","imageDataPos","canvasDataPos","skeletonizer","ImageDebug","_currentImageWrapper","_skelImageWrapper","_subImageWrapper","_labelImageWrapper","_patchGrid","_patchLabelGrid","_imageToPatchGrid","_binaryImageWrapper","_patchSize","_inputImageWrapper","_skeletonizer","_canvasContainer","binary","dom","_numPatches","self","boxFromPatches","patches","overAvg","patch","transMat","box","minx","miny","maxx","maxy","showPatches","showTransformed","showTransformedBox","showBB","imageRef","showSkeleton","describePatch","patchPos","matchingMoments","eligibleMoments","patchesFound","minComponentWeight","ceil","topCluster","similarMoments","inputImageWrapper","skeletonImageData","ArrayBuffer","initBuffers","useWorker","className","showCanvas","querySelector","appendChild","locate","topLabels","boxes","otsuThreshold","rasterResult","showLabels","showFoundPatches","findPatches","maxLabel","currIdx","notYetProcessed","currentIdx","currentPatch","showPatchLabels","rasterizeAngularSimilarity","labelHist","sort","filter","el","findBiggestConnectedAreas","showRemainingPatchLabels","findBoxes","checkImageConstraints","inputStream","JSON","stringify","Bresenham","Slope","UP","DOWN","getBarcodeLine","deltax","deltay","error","ystep","steep","read","toOtsuBinaryLine","sharpenLine","toBinaryLine","slope","slope2","currentDir","extrema","rThreshold","printFrequency","printPattern","fillColor","fillRect","BarcodeReader","_row","_nextUnset","start","_matchPattern","counter","code","singleError","modulo","MODULO","maxSingleError","SINGLE_CODE_ERROR","_nextSet","_normalize","ratio","numOnes","normalized","norm","_matchTrace","cmpCounter","epsilon","isWhite","counterPos","bestMatch","decodePattern","pattern","_decode","reverse","direction","DIRECTION","REVERSE","FORWARD","format","FORMAT","_matchRange","_fillCounters","counters","defineProperty","writeable","Exception","StartNotFoundException","CodeNotFoundException","PatternNotFoundException","CONFIG_KEYS","Code128Reader","CODE_SHIFT","CODE_C","CODE_B","CODE_A","START_CODE_A","START_CODE_B","START_CODE_C","STOP_CODE","CODE_PATTERN","AVG_CODE_ERROR","constructor","_decodeCode","_findStart","codeset","startInfo","multiplier","checksum","rawResult","decodedCodes","shiftNext","String","fromCharCode","_verifyTrailingWhitespace","endInfo","trailingWhitespaceEnd","EANReader","opts","CODE_L_START","CODE_G_START","START_PATTERN","STOP_PATTERN","MIDDLE_PATTERN","CODE_FREQUENCY","coderange","_findPattern","tryHarder","leadingWhitespaceStart","_findEnd","_calculateFirstDigit","codeFrequency","_decodePayload","firstDigit","_checksum","Code39Reader","ALPHABETH_STRING","ALPHABET","CHARACTER_ENCODINGS","ASTERISK","_toCounters","numCounters","decodedChar","lastStart","nextStart","_toPattern","_patternToChar","pop","patternSize","_findNextWidth","minWidth","maxNarrowWidth","numWideBars","wideBarWidth","whiteSpaceMustStart","patternStart","Code39VINReader","patterns","_checkChecksum","CodabarReader","_counters","START_END","MIN_ENCODED_CHARS","MAX_ACCEPTABLE","PADDING","startCounter","_isStartEnd","_verifyWhitespace","_validateResult","_sumCounters","endCounter","_calculatePatternLength","_thresholdResultPattern","kind","cat","categorization","space","narrow","counts","wide","bar","_charToPattern","char","charCode","charCodeAt","thresholds","_computeAlternatingThreshold","barThreshold","spaceThreshold","bitmask","UPCReader","EAN8Reader","UPCEReader","_determineParity","nrSystem","_convertToUPCA","upca","lastDigit","mergeObjects","obj1","obj2","createNode","htmlStr","temp","innerHTML","firstChild","HTMLUtils","I2of5Reader","getDefaulConfig","barSpaceRatio","normalizeBarSpaceWidth","properties","N","W","writable","MAX_CORRECTION_FACTOR","counterSum","codeSum","correction","correctionRatio","correctionRatioInverse","narrowBarWidth","_decodePair","counterPair","codes","counterLength","_verifyCounterLength","readers","code_128_reader","ean_reader","ean_8_reader","code_39_reader","code_39_vin_reader","codabar_reader","upc_reader","upc_e_reader","i2of5_reader","_canvas","frequency","_barcodeReaders","initReaders","readerConfig","reader","tryDecode","barcodeLine","showFrequency","showPattern","codeResult","decodeFromBoundingBox","lineAngle","lineLength","drawBoundingBox","getLine","pow","getLineLength","ext","extendLine","amount","extension","getExtendedLine","atan2","sideLength","xdir","ydir","tryDecodeBruteForce","drawScanline","$debug","initCanvas","vis","node","display","initConfig","decodeFromBoundingBoxes","setReaders","FrameGrabber","_that","_streamConfig","_video_size","_size","_sx","_sy","_ctx","_data","videoSize","canvasSize","attachData","getData","grab","doHalfSample","getSize","constraints","minAspectRatio","maxAspectRatio","facing","tracking","controls","numOfWorkers","visual","decoder","locator","events","getEvent","subscribers","subscribe","async","subscription","publish","subscriber","publishSubscription","once","unsubscribe","HtmlUtils","streamRef","loadedDataHandler","loadedData","attempts","checkVideo","initCamera","success","failure","videoSrc","createObjectURL","TypeError","bind","request","videoConstraints","cb","audio","MediaStreamTrack","getSources","mediaSource","sourceInfos","videoSourceId","sourceInfo","mandatory","minHeight","optional","sourceId","normalizeConstraints","release","tracks","getVideoTracks","stop","results","capacity","capture","matchesConstraints","some","every","contains","blacklist","passesFilter","addResult","imageSize","toDataURL","getResults","BarcodeLocator","BarcodeDecoder","Events","CameraAccess","ResultCollector","_inputStream","_framegrabber","_stopped","_boxSize","_decoder","_resultCollector","_workerPool","_onUIThread","initializeData","initInputStream","$viewport","err","canRecord","clearFix","initWorker","workerInitialized","workerThread","initWorkers","ready","publishResult","xOffset","yOffset","moveBox","corner","transformResult","locateAndDecode","availableWorker","busy","worker","postMessage","cmd","update","blobURL","blob","Blob","workerInterface","generateWorkerBlob","Worker","onmessage","revokeObjectURL","message","Quagga","onProcessed","terminate","onDetected","offDetected","offProcessed","registerResultCollector","resultCollector","decodeSingle","resultCallback"],"sourceRoot":""}